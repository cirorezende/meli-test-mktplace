{"timestamp":"2025-09-23T13:52:38.5704429-03:00","level":"ERROR","logger":"o.s.boot.SpringApplication","thread":"main","exception":"java.lang.IllegalStateException: java.lang.IllegalStateException: Logback configuration error detected: \r\nERROR in net.logstash.logback.composite.loggingevent.LoggingEventPatternJsonProvider@76fa3dd8 - Invalid [pattern]: pattern is not a valid JSON object net.logstash.logback.pattern.AbstractJsonPatternParser$JsonPatternException: pattern is not a valid JSON object\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.initializeSystem(LoggingApplicationListener.java:347)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.initialize(LoggingApplicationListener.java:298)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEnvironmentPreparedEvent(LoggingApplicationListener.java:246)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEvent(LoggingApplicationListener.java:223)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:178)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:171)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:149)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:137)\r\n\tat org.springframework.boot.context.event.EventPublishingRunListener.multicastInitialEvent(EventPublishingRunListener.java:136)\r\n\tat org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:81)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:64)\r\n\tat java.base/java.lang.Iterable.forEach(Iterable.java:75)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:63)\r\n\tat org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:366)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:318)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)\r\n\tat org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)\r\n\tat org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)\r\n\tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\r\nCaused by: java.lang.IllegalStateException: Logback configuration error detected: \r\nERROR in net.logstash.logback.composite.loggingevent.LoggingEventPatternJsonProvider@76fa3dd8 - Invalid [pattern]: pattern is not a valid JSON object net.logstash.logback.pattern.AbstractJsonPatternParser$JsonPatternException: pattern is not a valid JSON object\r\n\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.reportConfigurationErrorsIfNecessary(LogbackLoggingSystem.java:277)\r\n\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.loadConfiguration(LogbackLoggingSystem.java:255)\r\n\tat org.springframework.boot.logging.AbstractLoggingSystem.initializeWithConventions(AbstractLoggingSystem.java:81)\r\n\tat org.springframework.boot.logging.AbstractLoggingSystem.initialize(AbstractLoggingSystem.java:61)\r\n\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.initialize(LogbackLoggingSystem.java:189)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.initializeSystem(LoggingApplicationListener.java:332)\r\n\t... 98 common frames omitted\r\n\tSuppressed: net.logstash.logback.pattern.AbstractJsonPatternParser$JsonPatternException: pattern is not a valid JSON object\r\n\t\tat net.logstash.logback.pattern.AbstractJsonPatternParser.parse(AbstractJsonPatternParser.java:304)\r\n\t\tat net.logstash.logback.composite.AbstractPatternJsonProvider.initializeNodeWriter(AbstractPatternJsonProvider.java:104)\r\n\t\tat net.logstash.logback.composite.AbstractPatternJsonProvider.start(AbstractPatternJsonProvider.java:85)\r\n\t\tat net.logstash.logback.composite.JsonProviders.start(JsonProviders.java:48)\r\n\t\tat net.logstash.logback.composite.AbstractCompositeJsonFormatter.start(AbstractCompositeJsonFormatter.java:120)\r\n\t\tat net.logstash.logback.encoder.CompositeJsonEncoder.start(CompositeJsonEncoder.java:129)\r\n\t\tat ch.qos.logback.core.model.processor.ImplicitModelHandler.postHandleComplex(ImplicitModelHandler.java:208)\r\n\t\tat ch.qos.logback.core.model.processor.ImplicitModelHandler.postHandle(ImplicitModelHandler.java:186)\r\n\t\tat ch.qos.logback.core.model.processor.DefaultProcessor.secondPhaseTraverse(DefaultProcessor.java:257)\r\n\t\tat ch.qos.logback.core.model.processor.DefaultProcessor.secondPhaseTraverse(DefaultProcessor.java:253)\r\n\t\tat ch.qos.logback.core.model.processor.DefaultProcessor.secondPhaseTraverse(DefaultProcessor.java:253)\r\n\t\tat ch.qos.logback.core.model.processor.DefaultProcessor.traversalLoop(DefaultProcessor.java:90)\r\n\t\tat ch.qos.logback.core.model.processor.DefaultProcessor.process(DefaultProcessor.java:106)\r\n\t\tat ch.qos.logback.core.joran.GenericXMLConfigurator.processModel(GenericXMLConfigurator.java:208)\r\n\t\tat org.springframework.boot.logging.logback.SpringBootJoranConfigurator.processModel(SpringBootJoranConfigurator.java:122)\r\n\t\tat ch.qos.logback.core.joran.GenericXMLConfigurator.doConfigure(GenericXMLConfigurator.java:170)\r\n\t\tat ch.qos.logback.core.joran.GenericXMLConfigurator.doConfigure(GenericXMLConfigurator.java:122)\r\n\t\tat ch.qos.logback.core.joran.GenericXMLConfigurator.doConfigure(GenericXMLConfigurator.java:65)\r\n\t\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.configureByResourceUrl(LogbackLoggingSystem.java:287)\r\n\t\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.lambda$loadConfiguration$1(LogbackLoggingSystem.java:249)\r\n\t\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.withLoggingSuppressed(LogbackLoggingSystem.java:467)\r\n\t\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.loadConfiguration(LogbackLoggingSystem.java:244)\r\n\t\t... 102 common frames omitted\r\n\tCaused by: com.fasterxml.jackson.core.JsonParseException: Unexpected character ('\\' (code 92)): was expecting comma to separate Object entries\n at [Source: (String)\"{\"message\":\"%replace(%msg){\"\\\\n\",\"\\\\n\"}\"}\"; line: 1, column: 30]\r\n\t\tat com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2477)\r\n\t\tat com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:750)\r\n\t\tat com.fasterxml.jackson.core.base.ParserMinimalBase._reportUnexpectedChar(ParserMinimalBase.java:674)\r\n\t\tat com.fasterxml.jackson.core.json.ReaderBasedJsonParser._skipComma(ReaderBasedJsonParser.java:2462)\r\n\t\tat com.fasterxml.jackson.core.json.ReaderBasedJsonParser.nextFieldName(ReaderBasedJsonParser.java:953)\r\n\t\tat com.fasterxml.jackson.databind.deser.std.BaseNodeDeserializer._deserializeContainerNoRecursion(JsonNodeDeserializer.java:539)\r\n\t\tat com.fasterxml.jackson.databind.deser.std.JsonNodeDeserializer.deserialize(JsonNodeDeserializer.java:100)\r\n\t\tat com.fasterxml.jackson.databind.deser.std.JsonNodeDeserializer.deserialize(JsonNodeDeserializer.java:25)\r\n\t\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\r\n\t\tat com.fasterxml.jackson.databind.ObjectMapper._readValue(ObjectMapper.java:4801)\r\n\t\tat com.fasterxml.jackson.databind.ObjectMapper.readTree(ObjectMapper.java:3084)\r\n\t\tat com.fasterxml.jackson.core.JsonParser.readValueAsTree(JsonParser.java:2451)\r\n\t\tat net.logstash.logback.composite.JsonReadingUtils.readFully(JsonReadingUtils.java:60)\r\n\t\tat net.logstash.logback.composite.JsonReadingUtils.readFullyAsObjectNode(JsonReadingUtils.java:88)\r\n\t\tat net.logstash.logback.pattern.AbstractJsonPatternParser.parse(AbstractJsonPatternParser.java:302)\r\n\t\t... 123 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:52:38.5787193-03:00","level":"ERROR","logger":"o.s.test.context.TestContextManager","thread":"main","exception":"java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@610115e8 testClass = br.com.ml.mktplace.orders.integration.DistributionCenterCachingIT, locations = [], classes = [br.com.ml.mktplace.orders.OrdersApplication], contextInitializerClasses = [], activeProfiles = [\"integration-test\"], propertySourceDescriptors = [], propertySourceProperties = [\"org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true\", \"server.port=0\"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6a10b263, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@51ec2df1, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@60e5272, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@26f96b85, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@4d961a1d, org.springframework.boot.test.context.SpringBootTestAnnotation@56660b6b], resourceBasePath = \"src/main/webapp\", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)\r\n\tat org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)\r\n\tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\r\nCaused by: java.lang.IllegalStateException: java.lang.IllegalStateException: Logback configuration error detected: \r\nERROR in net.logstash.logback.composite.loggingevent.LoggingEventPatternJsonProvider@76fa3dd8 - Invalid [pattern]: pattern is not a valid JSON object net.logstash.logback.pattern.AbstractJsonPatternParser$JsonPatternException: pattern is not a valid JSON object\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.initializeSystem(LoggingApplicationListener.java:347)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.initialize(LoggingApplicationListener.java:298)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEnvironmentPreparedEvent(LoggingApplicationListener.java:246)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEvent(LoggingApplicationListener.java:223)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:178)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:171)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:149)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:137)\r\n\tat org.springframework.boot.context.event.EventPublishingRunListener.multicastInitialEvent(EventPublishingRunListener.java:136)\r\n\tat org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:81)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:64)\r\n\tat java.base/java.lang.Iterable.forEach(Iterable.java:75)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:63)\r\n\tat org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:366)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:318)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)\r\n\tat org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)\r\n\t... 73 common frames omitted\r\nCaused by: java.lang.IllegalStateException: Logback configuration error detected: \r\nERROR in net.logstash.logback.composite.loggingevent.LoggingEventPatternJsonProvider@76fa3dd8 - Invalid [pattern]: pattern is not a valid JSON object net.logstash.logback.pattern.AbstractJsonPatternParser$JsonPatternException: pattern is not a valid JSON object\r\n\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.reportConfigurationErrorsIfNecessary(LogbackLoggingSystem.java:277)\r\n\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.loadConfiguration(LogbackLoggingSystem.java:255)\r\n\tat org.springframework.boot.logging.AbstractLoggingSystem.initializeWithConventions(AbstractLoggingSystem.java:81)\r\n\tat org.springframework.boot.logging.AbstractLoggingSystem.initialize(AbstractLoggingSystem.java:61)\r\n\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.initialize(LogbackLoggingSystem.java:189)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.initializeSystem(LoggingApplicationListener.java:332)\r\n\t... 98 common frames omitted\r\n\tSuppressed: net.logstash.logback.pattern.AbstractJsonPatternParser$JsonPatternException: pattern is not a valid JSON object\r\n\t\tat net.logstash.logback.pattern.AbstractJsonPatternParser.parse(AbstractJsonPatternParser.java:304)\r\n\t\tat net.logstash.logback.composite.AbstractPatternJsonProvider.initializeNodeWriter(AbstractPatternJsonProvider.java:104)\r\n\t\tat net.logstash.logback.composite.AbstractPatternJsonProvider.start(AbstractPatternJsonProvider.java:85)\r\n\t\tat net.logstash.logback.composite.JsonProviders.start(JsonProviders.java:48)\r\n\t\tat net.logstash.logback.composite.AbstractCompositeJsonFormatter.start(AbstractCompositeJsonFormatter.java:120)\r\n\t\tat net.logstash.logback.encoder.CompositeJsonEncoder.start(CompositeJsonEncoder.java:129)\r\n\t\tat ch.qos.logback.core.model.processor.ImplicitModelHandler.postHandleComplex(ImplicitModelHandler.java:208)\r\n\t\tat ch.qos.logback.core.model.processor.ImplicitModelHandler.postHandle(ImplicitModelHandler.java:186)\r\n\t\tat ch.qos.logback.core.model.processor.DefaultProcessor.secondPhaseTraverse(DefaultProcessor.java:257)\r\n\t\tat ch.qos.logback.core.model.processor.DefaultProcessor.secondPhaseTraverse(DefaultProcessor.java:253)\r\n\t\tat ch.qos.logback.core.model.processor.DefaultProcessor.secondPhaseTraverse(DefaultProcessor.java:253)\r\n\t\tat ch.qos.logback.core.model.processor.DefaultProcessor.traversalLoop(DefaultProcessor.java:90)\r\n\t\tat ch.qos.logback.core.model.processor.DefaultProcessor.process(DefaultProcessor.java:106)\r\n\t\tat ch.qos.logback.core.joran.GenericXMLConfigurator.processModel(GenericXMLConfigurator.java:208)\r\n\t\tat org.springframework.boot.logging.logback.SpringBootJoranConfigurator.processModel(SpringBootJoranConfigurator.java:122)\r\n\t\tat ch.qos.logback.core.joran.GenericXMLConfigurator.doConfigure(GenericXMLConfigurator.java:170)\r\n\t\tat ch.qos.logback.core.joran.GenericXMLConfigurator.doConfigure(GenericXMLConfigurator.java:122)\r\n\t\tat ch.qos.logback.core.joran.GenericXMLConfigurator.doConfigure(GenericXMLConfigurator.java:65)\r\n\t\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.configureByResourceUrl(LogbackLoggingSystem.java:287)\r\n\t\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.lambda$loadConfiguration$1(LogbackLoggingSystem.java:249)\r\n\t\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.withLoggingSuppressed(LogbackLoggingSystem.java:467)\r\n\t\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.loadConfiguration(LogbackLoggingSystem.java:244)\r\n\t\t... 102 common frames omitted\r\n\tCaused by: com.fasterxml.jackson.core.JsonParseException: Unexpected character ('\\' (code 92)): was expecting comma to separate Object entries\n at [Source: (String)\"{\"message\":\"%replace(%msg){\"\\\\n\",\"\\\\n\"}\"}\"; line: 1, column: 30]\r\n\t\tat com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2477)\r\n\t\tat com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:750)\r\n\t\tat com.fasterxml.jackson.core.base.ParserMinimalBase._reportUnexpectedChar(ParserMinimalBase.java:674)\r\n\t\tat com.fasterxml.jackson.core.json.ReaderBasedJsonParser._skipComma(ReaderBasedJsonParser.java:2462)\r\n\t\tat com.fasterxml.jackson.core.json.ReaderBasedJsonParser.nextFieldName(ReaderBasedJsonParser.java:953)\r\n\t\tat com.fasterxml.jackson.databind.deser.std.BaseNodeDeserializer._deserializeContainerNoRecursion(JsonNodeDeserializer.java:539)\r\n\t\tat com.fasterxml.jackson.databind.deser.std.JsonNodeDeserializer.deserialize(JsonNodeDeserializer.java:100)\r\n\t\tat com.fasterxml.jackson.databind.deser.std.JsonNodeDeserializer.deserialize(JsonNodeDeserializer.java:25)\r\n\t\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\r\n\t\tat com.fasterxml.jackson.databind.ObjectMapper._readValue(ObjectMapper.java:4801)\r\n\t\tat com.fasterxml.jackson.databind.ObjectMapper.readTree(ObjectMapper.java:3084)\r\n\t\tat com.fasterxml.jackson.core.JsonParser.readValueAsTree(JsonParser.java:2451)\r\n\t\tat net.logstash.logback.composite.JsonReadingUtils.readFully(JsonReadingUtils.java:60)\r\n\t\tat net.logstash.logback.composite.JsonReadingUtils.readFullyAsObjectNode(JsonReadingUtils.java:88)\r\n\t\tat net.logstash.logback.pattern.AbstractJsonPatternParser.parse(AbstractJsonPatternParser.java:302)\r\n\t\t... 123 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:52:38.6013741-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","service":"orders-service"}
{"timestamp":"2025-09-23T13:52:38.6043753-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","service":"orders-service"}
{"timestamp":"2025-09-23T13:52:38.6712848-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","service":"orders-service"}
{"timestamp":"2025-09-23T13:52:38.6722847-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","service":"orders-service"}
{"timestamp":"2025-09-23T13:52:38.6907011-03:00","level":"ERROR","logger":"o.s.test.context.TestContextManager","thread":"main","exception":"java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@5f31385e testClass = br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT, locations = [], classes = [br.com.ml.mktplace.orders.OrdersApplication], contextInitializerClasses = [], activeProfiles = [\"integration-test\"], propertySourceDescriptors = [], propertySourceProperties = [\"org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true\", \"server.port=0\"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6a10b263, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@51ec2df1, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@60e5272, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@26f96b85, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@4d961a1d, org.springframework.boot.test.context.SpringBootTestAnnotation@56660b6b], resourceBasePath = \"src/main/webapp\", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)\r\n\tat org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)\r\n\tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:52:38.6944068-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","service":"orders-service"}
{"timestamp":"2025-09-23T13:52:38.6959761-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","service":"orders-service"}
{"timestamp":"2025-09-23T13:52:38.7128538-03:00","level":"ERROR","logger":"o.s.test.context.TestContextManager","thread":"main","exception":"java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@6e48b9ed testClass = br.com.ml.mktplace.orders.integration.OrderEventPublishingIT, locations = [], classes = [br.com.ml.mktplace.orders.OrdersApplication], contextInitializerClasses = [], activeProfiles = [\"integration-test\"], propertySourceDescriptors = [], propertySourceProperties = [\"org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true\", \"server.port=0\"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6a10b263, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@51ec2df1, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@60e5272, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@26f96b85, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@4d961a1d, org.springframework.boot.test.context.SpringBootTestAnnotation@56660b6b], resourceBasePath = \"src/main/webapp\", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)\r\n\tat org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)\r\n\tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:52:38.716593-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","service":"orders-service"}
{"timestamp":"2025-09-23T13:52:38.7181767-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","service":"orders-service"}
{"timestamp":"2025-09-23T13:52:46.9372088-03:00","level":"ERROR","logger":"o.s.boot.SpringApplication","thread":"main","exception":"java.lang.IllegalStateException: java.lang.IllegalStateException: Logback configuration error detected: \r\nERROR in net.logstash.logback.composite.loggingevent.LoggingEventPatternJsonProvider@80347b2 - Invalid [pattern]: pattern is not a valid JSON object net.logstash.logback.pattern.AbstractJsonPatternParser$JsonPatternException: pattern is not a valid JSON object\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.initializeSystem(LoggingApplicationListener.java:347)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.initialize(LoggingApplicationListener.java:298)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEnvironmentPreparedEvent(LoggingApplicationListener.java:246)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEvent(LoggingApplicationListener.java:223)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:178)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:171)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:149)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:137)\r\n\tat org.springframework.boot.context.event.EventPublishingRunListener.multicastInitialEvent(EventPublishingRunListener.java:136)\r\n\tat org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:81)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:64)\r\n\tat java.base/java.lang.Iterable.forEach(Iterable.java:75)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:63)\r\n\tat org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:366)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:318)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)\r\n\tat org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)\r\n\tat org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)\r\n\tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\r\nCaused by: java.lang.IllegalStateException: Logback configuration error detected: \r\nERROR in net.logstash.logback.composite.loggingevent.LoggingEventPatternJsonProvider@80347b2 - Invalid [pattern]: pattern is not a valid JSON object net.logstash.logback.pattern.AbstractJsonPatternParser$JsonPatternException: pattern is not a valid JSON object\r\n\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.reportConfigurationErrorsIfNecessary(LogbackLoggingSystem.java:277)\r\n\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.loadConfiguration(LogbackLoggingSystem.java:255)\r\n\tat org.springframework.boot.logging.AbstractLoggingSystem.initializeWithConventions(AbstractLoggingSystem.java:81)\r\n\tat org.springframework.boot.logging.AbstractLoggingSystem.initialize(AbstractLoggingSystem.java:61)\r\n\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.initialize(LogbackLoggingSystem.java:189)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.initializeSystem(LoggingApplicationListener.java:332)\r\n\t... 98 common frames omitted\r\n\tSuppressed: net.logstash.logback.pattern.AbstractJsonPatternParser$JsonPatternException: pattern is not a valid JSON object\r\n\t\tat net.logstash.logback.pattern.AbstractJsonPatternParser.parse(AbstractJsonPatternParser.java:304)\r\n\t\tat net.logstash.logback.composite.AbstractPatternJsonProvider.initializeNodeWriter(AbstractPatternJsonProvider.java:104)\r\n\t\tat net.logstash.logback.composite.AbstractPatternJsonProvider.start(AbstractPatternJsonProvider.java:85)\r\n\t\tat net.logstash.logback.composite.JsonProviders.start(JsonProviders.java:48)\r\n\t\tat net.logstash.logback.composite.AbstractCompositeJsonFormatter.start(AbstractCompositeJsonFormatter.java:120)\r\n\t\tat net.logstash.logback.encoder.CompositeJsonEncoder.start(CompositeJsonEncoder.java:129)\r\n\t\tat ch.qos.logback.core.model.processor.ImplicitModelHandler.postHandleComplex(ImplicitModelHandler.java:208)\r\n\t\tat ch.qos.logback.core.model.processor.ImplicitModelHandler.postHandle(ImplicitModelHandler.java:186)\r\n\t\tat ch.qos.logback.core.model.processor.DefaultProcessor.secondPhaseTraverse(DefaultProcessor.java:257)\r\n\t\tat ch.qos.logback.core.model.processor.DefaultProcessor.secondPhaseTraverse(DefaultProcessor.java:253)\r\n\t\tat ch.qos.logback.core.model.processor.DefaultProcessor.secondPhaseTraverse(DefaultProcessor.java:253)\r\n\t\tat ch.qos.logback.core.model.processor.DefaultProcessor.traversalLoop(DefaultProcessor.java:90)\r\n\t\tat ch.qos.logback.core.model.processor.DefaultProcessor.process(DefaultProcessor.java:106)\r\n\t\tat ch.qos.logback.core.joran.GenericXMLConfigurator.processModel(GenericXMLConfigurator.java:208)\r\n\t\tat org.springframework.boot.logging.logback.SpringBootJoranConfigurator.processModel(SpringBootJoranConfigurator.java:122)\r\n\t\tat ch.qos.logback.core.joran.GenericXMLConfigurator.doConfigure(GenericXMLConfigurator.java:170)\r\n\t\tat ch.qos.logback.core.joran.GenericXMLConfigurator.doConfigure(GenericXMLConfigurator.java:122)\r\n\t\tat ch.qos.logback.core.joran.GenericXMLConfigurator.doConfigure(GenericXMLConfigurator.java:65)\r\n\t\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.configureByResourceUrl(LogbackLoggingSystem.java:287)\r\n\t\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.lambda$loadConfiguration$1(LogbackLoggingSystem.java:249)\r\n\t\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.withLoggingSuppressed(LogbackLoggingSystem.java:467)\r\n\t\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.loadConfiguration(LogbackLoggingSystem.java:244)\r\n\t\t... 102 common frames omitted\r\n\tCaused by: com.fasterxml.jackson.core.JsonParseException: Unexpected character ('\\' (code 92)): was expecting comma to separate Object entries\n at [Source: (String)\"{\"message\":\"%replace(%msg){\"\\\\n\",\"\\\\n\"}\"}\"; line: 1, column: 30]\r\n\t\tat com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2477)\r\n\t\tat com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:750)\r\n\t\tat com.fasterxml.jackson.core.base.ParserMinimalBase._reportUnexpectedChar(ParserMinimalBase.java:674)\r\n\t\tat com.fasterxml.jackson.core.json.ReaderBasedJsonParser._skipComma(ReaderBasedJsonParser.java:2462)\r\n\t\tat com.fasterxml.jackson.core.json.ReaderBasedJsonParser.nextFieldName(ReaderBasedJsonParser.java:953)\r\n\t\tat com.fasterxml.jackson.databind.deser.std.BaseNodeDeserializer._deserializeContainerNoRecursion(JsonNodeDeserializer.java:539)\r\n\t\tat com.fasterxml.jackson.databind.deser.std.JsonNodeDeserializer.deserialize(JsonNodeDeserializer.java:100)\r\n\t\tat com.fasterxml.jackson.databind.deser.std.JsonNodeDeserializer.deserialize(JsonNodeDeserializer.java:25)\r\n\t\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\r\n\t\tat com.fasterxml.jackson.databind.ObjectMapper._readValue(ObjectMapper.java:4801)\r\n\t\tat com.fasterxml.jackson.databind.ObjectMapper.readTree(ObjectMapper.java:3084)\r\n\t\tat com.fasterxml.jackson.core.JsonParser.readValueAsTree(JsonParser.java:2451)\r\n\t\tat net.logstash.logback.composite.JsonReadingUtils.readFully(JsonReadingUtils.java:60)\r\n\t\tat net.logstash.logback.composite.JsonReadingUtils.readFullyAsObjectNode(JsonReadingUtils.java:88)\r\n\t\tat net.logstash.logback.pattern.AbstractJsonPatternParser.parse(AbstractJsonPatternParser.java:302)\r\n\t\t... 123 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:52:46.9457216-03:00","level":"ERROR","logger":"o.s.test.context.TestContextManager","thread":"main","exception":"java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@2fb171f5 testClass = br.com.ml.mktplace.orders.integration.DistributionCenterCachingIT, locations = [], classes = [br.com.ml.mktplace.orders.OrdersApplication], contextInitializerClasses = [], activeProfiles = [\"integration-test\"], propertySourceDescriptors = [], propertySourceProperties = [\"org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true\", \"server.port=0\"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6a10b263, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@51ec2df1, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@60e5272, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@26f96b85, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@4d961a1d, org.springframework.boot.test.context.SpringBootTestAnnotation@5fd6c68a], resourceBasePath = \"src/main/webapp\", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)\r\n\tat org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)\r\n\tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\r\nCaused by: java.lang.IllegalStateException: java.lang.IllegalStateException: Logback configuration error detected: \r\nERROR in net.logstash.logback.composite.loggingevent.LoggingEventPatternJsonProvider@80347b2 - Invalid [pattern]: pattern is not a valid JSON object net.logstash.logback.pattern.AbstractJsonPatternParser$JsonPatternException: pattern is not a valid JSON object\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.initializeSystem(LoggingApplicationListener.java:347)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.initialize(LoggingApplicationListener.java:298)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEnvironmentPreparedEvent(LoggingApplicationListener.java:246)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEvent(LoggingApplicationListener.java:223)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:178)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:171)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:149)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:137)\r\n\tat org.springframework.boot.context.event.EventPublishingRunListener.multicastInitialEvent(EventPublishingRunListener.java:136)\r\n\tat org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:81)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:64)\r\n\tat java.base/java.lang.Iterable.forEach(Iterable.java:75)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:63)\r\n\tat org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:366)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:318)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)\r\n\tat org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)\r\n\t... 73 common frames omitted\r\nCaused by: java.lang.IllegalStateException: Logback configuration error detected: \r\nERROR in net.logstash.logback.composite.loggingevent.LoggingEventPatternJsonProvider@80347b2 - Invalid [pattern]: pattern is not a valid JSON object net.logstash.logback.pattern.AbstractJsonPatternParser$JsonPatternException: pattern is not a valid JSON object\r\n\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.reportConfigurationErrorsIfNecessary(LogbackLoggingSystem.java:277)\r\n\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.loadConfiguration(LogbackLoggingSystem.java:255)\r\n\tat org.springframework.boot.logging.AbstractLoggingSystem.initializeWithConventions(AbstractLoggingSystem.java:81)\r\n\tat org.springframework.boot.logging.AbstractLoggingSystem.initialize(AbstractLoggingSystem.java:61)\r\n\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.initialize(LogbackLoggingSystem.java:189)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.initializeSystem(LoggingApplicationListener.java:332)\r\n\t... 98 common frames omitted\r\n\tSuppressed: net.logstash.logback.pattern.AbstractJsonPatternParser$JsonPatternException: pattern is not a valid JSON object\r\n\t\tat net.logstash.logback.pattern.AbstractJsonPatternParser.parse(AbstractJsonPatternParser.java:304)\r\n\t\tat net.logstash.logback.composite.AbstractPatternJsonProvider.initializeNodeWriter(AbstractPatternJsonProvider.java:104)\r\n\t\tat net.logstash.logback.composite.AbstractPatternJsonProvider.start(AbstractPatternJsonProvider.java:85)\r\n\t\tat net.logstash.logback.composite.JsonProviders.start(JsonProviders.java:48)\r\n\t\tat net.logstash.logback.composite.AbstractCompositeJsonFormatter.start(AbstractCompositeJsonFormatter.java:120)\r\n\t\tat net.logstash.logback.encoder.CompositeJsonEncoder.start(CompositeJsonEncoder.java:129)\r\n\t\tat ch.qos.logback.core.model.processor.ImplicitModelHandler.postHandleComplex(ImplicitModelHandler.java:208)\r\n\t\tat ch.qos.logback.core.model.processor.ImplicitModelHandler.postHandle(ImplicitModelHandler.java:186)\r\n\t\tat ch.qos.logback.core.model.processor.DefaultProcessor.secondPhaseTraverse(DefaultProcessor.java:257)\r\n\t\tat ch.qos.logback.core.model.processor.DefaultProcessor.secondPhaseTraverse(DefaultProcessor.java:253)\r\n\t\tat ch.qos.logback.core.model.processor.DefaultProcessor.secondPhaseTraverse(DefaultProcessor.java:253)\r\n\t\tat ch.qos.logback.core.model.processor.DefaultProcessor.traversalLoop(DefaultProcessor.java:90)\r\n\t\tat ch.qos.logback.core.model.processor.DefaultProcessor.process(DefaultProcessor.java:106)\r\n\t\tat ch.qos.logback.core.joran.GenericXMLConfigurator.processModel(GenericXMLConfigurator.java:208)\r\n\t\tat org.springframework.boot.logging.logback.SpringBootJoranConfigurator.processModel(SpringBootJoranConfigurator.java:122)\r\n\t\tat ch.qos.logback.core.joran.GenericXMLConfigurator.doConfigure(GenericXMLConfigurator.java:170)\r\n\t\tat ch.qos.logback.core.joran.GenericXMLConfigurator.doConfigure(GenericXMLConfigurator.java:122)\r\n\t\tat ch.qos.logback.core.joran.GenericXMLConfigurator.doConfigure(GenericXMLConfigurator.java:65)\r\n\t\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.configureByResourceUrl(LogbackLoggingSystem.java:287)\r\n\t\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.lambda$loadConfiguration$1(LogbackLoggingSystem.java:249)\r\n\t\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.withLoggingSuppressed(LogbackLoggingSystem.java:467)\r\n\t\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.loadConfiguration(LogbackLoggingSystem.java:244)\r\n\t\t... 102 common frames omitted\r\n\tCaused by: com.fasterxml.jackson.core.JsonParseException: Unexpected character ('\\' (code 92)): was expecting comma to separate Object entries\n at [Source: (String)\"{\"message\":\"%replace(%msg){\"\\\\n\",\"\\\\n\"}\"}\"; line: 1, column: 30]\r\n\t\tat com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2477)\r\n\t\tat com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:750)\r\n\t\tat com.fasterxml.jackson.core.base.ParserMinimalBase._reportUnexpectedChar(ParserMinimalBase.java:674)\r\n\t\tat com.fasterxml.jackson.core.json.ReaderBasedJsonParser._skipComma(ReaderBasedJsonParser.java:2462)\r\n\t\tat com.fasterxml.jackson.core.json.ReaderBasedJsonParser.nextFieldName(ReaderBasedJsonParser.java:953)\r\n\t\tat com.fasterxml.jackson.databind.deser.std.BaseNodeDeserializer._deserializeContainerNoRecursion(JsonNodeDeserializer.java:539)\r\n\t\tat com.fasterxml.jackson.databind.deser.std.JsonNodeDeserializer.deserialize(JsonNodeDeserializer.java:100)\r\n\t\tat com.fasterxml.jackson.databind.deser.std.JsonNodeDeserializer.deserialize(JsonNodeDeserializer.java:25)\r\n\t\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\r\n\t\tat com.fasterxml.jackson.databind.ObjectMapper._readValue(ObjectMapper.java:4801)\r\n\t\tat com.fasterxml.jackson.databind.ObjectMapper.readTree(ObjectMapper.java:3084)\r\n\t\tat com.fasterxml.jackson.core.JsonParser.readValueAsTree(JsonParser.java:2451)\r\n\t\tat net.logstash.logback.composite.JsonReadingUtils.readFully(JsonReadingUtils.java:60)\r\n\t\tat net.logstash.logback.composite.JsonReadingUtils.readFullyAsObjectNode(JsonReadingUtils.java:88)\r\n\t\tat net.logstash.logback.pattern.AbstractJsonPatternParser.parse(AbstractJsonPatternParser.java:302)\r\n\t\t... 123 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:52:46.9684054-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","service":"orders-service"}
{"timestamp":"2025-09-23T13:52:46.9704043-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","service":"orders-service"}
{"timestamp":"2025-09-23T13:52:47.0309093-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","service":"orders-service"}
{"timestamp":"2025-09-23T13:52:47.0315105-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","service":"orders-service"}
{"timestamp":"2025-09-23T13:52:47.0536891-03:00","level":"ERROR","logger":"o.s.test.context.TestContextManager","thread":"main","exception":"java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@1465914 testClass = br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT, locations = [], classes = [br.com.ml.mktplace.orders.OrdersApplication], contextInitializerClasses = [], activeProfiles = [\"integration-test\"], propertySourceDescriptors = [], propertySourceProperties = [\"org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true\", \"server.port=0\"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6a10b263, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@51ec2df1, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@60e5272, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@26f96b85, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@4d961a1d, org.springframework.boot.test.context.SpringBootTestAnnotation@5fd6c68a], resourceBasePath = \"src/main/webapp\", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)\r\n\tat org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)\r\n\tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:52:47.0576227-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","service":"orders-service"}
{"timestamp":"2025-09-23T13:52:47.0592452-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","service":"orders-service"}
{"timestamp":"2025-09-23T13:52:47.0784704-03:00","level":"ERROR","logger":"o.s.test.context.TestContextManager","thread":"main","exception":"java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@5c96cbe7 testClass = br.com.ml.mktplace.orders.integration.OrderEventPublishingIT, locations = [], classes = [br.com.ml.mktplace.orders.OrdersApplication], contextInitializerClasses = [], activeProfiles = [\"integration-test\"], propertySourceDescriptors = [], propertySourceProperties = [\"org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true\", \"server.port=0\"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6a10b263, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@51ec2df1, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@60e5272, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@26f96b85, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@4d961a1d, org.springframework.boot.test.context.SpringBootTestAnnotation@5fd6c68a], resourceBasePath = \"src/main/webapp\", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)\r\n\tat org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)\r\n\tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:52:47.0825441-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","service":"orders-service"}
{"timestamp":"2025-09-23T13:52:47.0843052-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:51.5271318-03:00","level":"INFO","logger":"o.h.validator.internal.util.Version","thread":"background-preinit","message":"HV000001: Hibernate Validator 8.0.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:51.5691592-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Starting DistributionCenterCachingIT using Java 21.0.8 with PID 22468 (started by ciror in Z:\\projects\\meli-test-mktplace)","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:51.5701612-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"The following 1 profile is active: \"integration-test\"","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:52.1403017-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:52.1403017-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:52.2335576-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 87 ms. Found 1 JPA repository interface.","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:52.6694264-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:52.6714357-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data Redis repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:52.7016233-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationExtensionSupport","thread":"main","message":"Spring Data Redis - Could not safely identify store assignment for repository candidate interface br.com.ml.mktplace.orders.adapter.outbound.persistence.repository.JpaOrderEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:52.7016233-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 17 ms. Found 0 Redis repository interfaces.","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:53.6150354-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat initialized with port 0 (http)","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:53.6233718-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Initializing ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:53.6244511-03:00","level":"INFO","logger":"o.a.catalina.core.StandardService","thread":"main","message":"Starting service [Tomcat]","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:53.6254139-03:00","level":"INFO","logger":"o.a.catalina.core.StandardEngine","thread":"main","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:53.6769266-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"main","message":"Initializing Spring embedded WebApplicationContext","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:53.6769266-03:00","level":"INFO","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","thread":"main","message":"Root WebApplicationContext: initialization completed in 2092 ms","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.0093242-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Starting...","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.2331246-03:00","level":"INFO","logger":"com.zaxxer.hikari.pool.HikariPool","thread":"main","message":"OrdersHikariPool - Added connection org.postgresql.jdbc.PgConnection@74d9f7","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.2352934-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Start completed.","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.3783071-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"Flyway Community Edition 9.22.3 by Redgate","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.3783071-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"See release notes here: https://rd.gt/416ObMi","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.3783071-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.4035479-03:00","level":"INFO","logger":"org.flywaydb.core.FlywayExecutor","thread":"main","message":"Database: jdbc:postgresql://localhost:52271/mktplace_orders (PostgreSQL 16.10)","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.4168177-03:00","level":"WARN","logger":"o.f.c.i.database.base.Database","thread":"main","message":"Flyway upgrade recommended: PostgreSQL 16.10 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.4578875-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Schema history table \"public\".\"flyway_schema_history\" does not exist yet","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.4631061-03:00","level":"INFO","logger":"o.f.core.internal.command.DbValidate","thread":"main","message":"Successfully validated 2 migrations (execution time 00:00.032s)","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.481879-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Creating Schema History table \"public\".\"flyway_schema_history\" ...","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.5218335-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Current version of schema \"public\": << Empty Schema >>","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.5337967-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"1 - initial schema\"","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.5473895-03:00","level":"WARN","logger":"c.zaxxer.hikari.pool.ProxyConnection","thread":"main","message":"OrdersHikariPool - Connection org.postgresql.jdbc.PgConnection@34d2b43d marked as broken because of SQLSTATE(0A000), ErrorCode(0)","exception":"org.postgresql.util.PSQLException: ERROR: extension \"postgis\" is not available\n  Detalhe: Could not open extension control file \"/usr/local/share/postgresql/extension/postgis.control\": No such file or directory.\n  Dica: The extension must first be installed on the system where PostgreSQL is running.\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)\r\n\tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)\r\n\tat org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)\r\n\tat org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)\r\n\tat org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)\r\n\tat com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)\r\n\tat com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)\r\n\tat org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)\r\n\tat org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)\r\n\tat org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)\r\n\tat org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)\r\n\tat org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)\r\n\tat org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)\r\n\tat org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)\r\n\tat org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:374)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:272)\r\n\tat org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:271)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:244)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:139)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.lambda$execute$0(PostgreSQLAdvisoryLockTemplate.java:56)\r\n\tat org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:56)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:96)\r\n\tat org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:144)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:139)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:97)\r\n\tat org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:188)\r\n\tat org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)\r\n\tat org.flywaydb.core.Flyway.migrate(Flyway.java:140)\r\n\tat org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:323)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)\r\n\tat org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)\r\n\tat org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)\r\n\tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.5582705-03:00","level":"ERROR","logger":"o.f.c.i.j.TransactionalExecutionTemplate","thread":"main","message":"Unable to rollback transaction","exception":"java.sql.SQLException: Connection is closed\r\n\tat com.zaxxer.hikari.pool.ProxyConnection$ClosedConnection.lambda$getClosedConnection$0(ProxyConnection.java:502)\r\n\tat jdk.proxy3/jdk.proxy3.$Proxy147.rollback(Unknown Source)\r\n\tat com.zaxxer.hikari.pool.ProxyConnection.rollback(ProxyConnection.java:385)\r\n\tat com.zaxxer.hikari.pool.HikariProxyConnection.rollback(HikariProxyConnection.java)\r\n\tat org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:71)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:271)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:244)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:139)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.lambda$execute$0(PostgreSQLAdvisoryLockTemplate.java:56)\r\n\tat org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:56)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:96)\r\n\tat org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:144)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:139)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:97)\r\n\tat org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:188)\r\n\tat org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)\r\n\tat org.flywaydb.core.Flyway.migrate(Flyway.java:140)\r\n\tat org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:323)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)\r\n\tat org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)\r\n\tat org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)\r\n\tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.5605311-03:00","level":"ERROR","logger":"o.f.c.i.j.TransactionalExecutionTemplate","thread":"main","message":"Unable to restore autocommit to original value for connection","exception":"java.sql.SQLException: Connection is closed\r\n\tat com.zaxxer.hikari.pool.ProxyConnection$ClosedConnection.lambda$getClosedConnection$0(ProxyConnection.java:502)\r\n\tat jdk.proxy3/jdk.proxy3.$Proxy147.setAutoCommit(Unknown Source)\r\n\tat com.zaxxer.hikari.pool.ProxyConnection.setAutoCommit(ProxyConnection.java:401)\r\n\tat com.zaxxer.hikari.pool.HikariProxyConnection.setAutoCommit(HikariProxyConnection.java)\r\n\tat org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:86)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:271)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:244)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:139)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.lambda$execute$0(PostgreSQLAdvisoryLockTemplate.java:56)\r\n\tat org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:56)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:96)\r\n\tat org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:144)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:139)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:97)\r\n\tat org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:188)\r\n\tat org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)\r\n\tat org.flywaydb.core.Flyway.migrate(Flyway.java:140)\r\n\tat org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:323)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)\r\n\tat org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)\r\n\tat org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)\r\n\tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.5625485-03:00","level":"ERROR","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migration of schema \"public\" to version \"1 - initial schema\" failed! Changes successfully rolled back.","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.5654275-03:00","level":"WARN","logger":"o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext","thread":"main","message":"Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V1__initial_schema.sql failed\n---------------------------------------\nSQL State  : 0A000\nError Code : 0\nMessage    : ERROR: extension \"postgis\" is not available\n  Detalhe: Could not open extension control file \"/usr/local/share/postgresql/extension/postgis.control\": No such file or directory.\n  Dica: The extension must first be installed on the system where PostgreSQL is running.\nLocation   : db/migration/V1__initial_schema.sql (Z:\\projects\\meli-test-mktplace\\target\\classes\\db\\migration\\V1__initial_schema.sql)\nLine       : 5\nStatement  : -- Initial schema for ML Marketplace Orders system\r\n-- Following ADR-001 (PostgreSQL with PostGIS), ADR-004 (Logistic decisions storage), ADR-008 (ULID identifiers)\r\n\r\n-- Enable PostGIS extension for geospatial calculations\r\nCREATE EXTENSION IF NOT EXISTS postgis\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.5659913-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Shutdown initiated...","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.5689106-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Shutdown completed.","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.5744251-03:00","level":"INFO","logger":"o.a.catalina.core.StandardService","thread":"main","message":"Stopping service [Tomcat]","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.5941174-03:00","level":"INFO","logger":"o.s.b.a.l.ConditionEvaluationReportLogger","thread":"main","message":"\r\n\r\nError starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.6197842-03:00","level":"ERROR","logger":"o.s.boot.SpringApplication","thread":"main","message":"Application run failed","exception":"org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V1__initial_schema.sql failed\n---------------------------------------\nSQL State  : 0A000\nError Code : 0\nMessage    : ERROR: extension \"postgis\" is not available\n  Detalhe: Could not open extension control file \"/usr/local/share/postgresql/extension/postgis.control\": No such file or directory.\n  Dica: The extension must first be installed on the system where PostgreSQL is running.\nLocation   : db/migration/V1__initial_schema.sql (Z:\\projects\\meli-test-mktplace\\target\\classes\\db\\migration\\V1__initial_schema.sql)\nLine       : 5\nStatement  : -- Initial schema for ML Marketplace Orders system\r\n-- Following ADR-001 (PostgreSQL with PostGIS), ADR-004 (Logistic decisions storage), ADR-008 (ULID identifiers)\r\n\r\n-- Enable PostGIS extension for geospatial calculations\r\nCREATE EXTENSION IF NOT EXISTS postgis\n\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:323)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)\r\n\tat org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)\r\n\tat org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)\r\n\tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\r\nCaused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V1__initial_schema.sql failed\n---------------------------------------\nSQL State  : 0A000\nError Code : 0\nMessage    : ERROR: extension \"postgis\" is not available\n  Detalhe: Could not open extension control file \"/usr/local/share/postgresql/extension/postgis.control\": No such file or directory.\n  Dica: The extension must first be installed on the system where PostgreSQL is running.\nLocation   : db/migration/V1__initial_schema.sql (Z:\\projects\\meli-test-mktplace\\target\\classes\\db\\migration\\V1__initial_schema.sql)\nLine       : 5\nStatement  : -- Initial schema for ML Marketplace Orders system\r\n-- Following ADR-001 (PostgreSQL with PostGIS), ADR-004 (Logistic decisions storage), ADR-008 (ULID identifiers)\r\n\r\n-- Enable PostGIS extension for geospatial calculations\r\nCREATE EXTENSION IF NOT EXISTS postgis\n\r\n\tat org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:382)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:272)\r\n\tat org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:271)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:244)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:139)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.lambda$execute$0(PostgreSQLAdvisoryLockTemplate.java:56)\r\n\tat org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:56)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:96)\r\n\tat org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:144)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:139)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:97)\r\n\tat org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:188)\r\n\tat org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)\r\n\tat org.flywaydb.core.Flyway.migrate(Flyway.java:140)\r\n\tat org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)\r\n\t... 97 common frames omitted\r\nCaused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V1__initial_schema.sql failed\n---------------------------------------\nSQL State  : 0A000\nError Code : 0\nMessage    : ERROR: extension \"postgis\" is not available\n  Detalhe: Could not open extension control file \"/usr/local/share/postgresql/extension/postgis.control\": No such file or directory.\n  Dica: The extension must first be installed on the system where PostgreSQL is running.\nLocation   : db/migration/V1__initial_schema.sql (Z:\\projects\\meli-test-mktplace\\target\\classes\\db\\migration\\V1__initial_schema.sql)\nLine       : 5\nStatement  : -- Initial schema for ML Marketplace Orders system\r\n-- Following ADR-001 (PostgreSQL with PostGIS), ADR-004 (Logistic decisions storage), ADR-008 (ULID identifiers)\r\n\r\n-- Enable PostGIS extension for geospatial calculations\r\nCREATE EXTENSION IF NOT EXISTS postgis\n\r\n\tat org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:267)\r\n\tat org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)\r\n\tat org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)\r\n\tat org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)\r\n\tat org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)\r\n\tat org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)\r\n\tat org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:374)\r\n\t... 116 common frames omitted\r\nCaused by: org.postgresql.util.PSQLException: ERROR: extension \"postgis\" is not available\n  Detalhe: Could not open extension control file \"/usr/local/share/postgresql/extension/postgis.control\": No such file or directory.\n  Dica: The extension must first be installed on the system where PostgreSQL is running.\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)\r\n\tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)\r\n\tat org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)\r\n\tat org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)\r\n\tat org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)\r\n\tat com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)\r\n\tat com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)\r\n\tat org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)\r\n\tat org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)\r\n\tat org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)\r\n\t... 122 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.6305618-03:00","level":"ERROR","logger":"o.s.test.context.TestContextManager","thread":"main","message":"Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [br.com.ml.mktplace.orders.integration.DistributionCenterCachingIT@50a7ace8]","exception":"java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@22431593 testClass = br.com.ml.mktplace.orders.integration.DistributionCenterCachingIT, locations = [], classes = [br.com.ml.mktplace.orders.OrdersApplication], contextInitializerClasses = [], activeProfiles = [\"integration-test\"], propertySourceDescriptors = [], propertySourceProperties = [\"org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true\", \"server.port=0\"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@325bb9a6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@15fa55a6, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@69c93ca4, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@3c0036b, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@4d961a1d, org.springframework.boot.test.context.SpringBootTestAnnotation@56660b6b], resourceBasePath = \"src/main/webapp\", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)\r\n\tat org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)\r\n\tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V1__initial_schema.sql failed\n---------------------------------------\nSQL State  : 0A000\nError Code : 0\nMessage    : ERROR: extension \"postgis\" is not available\n  Detalhe: Could not open extension control file \"/usr/local/share/postgresql/extension/postgis.control\": No such file or directory.\n  Dica: The extension must first be installed on the system where PostgreSQL is running.\nLocation   : db/migration/V1__initial_schema.sql (Z:\\projects\\meli-test-mktplace\\target\\classes\\db\\migration\\V1__initial_schema.sql)\nLine       : 5\nStatement  : -- Initial schema for ML Marketplace Orders system\r\n-- Following ADR-001 (PostgreSQL with PostGIS), ADR-004 (Logistic decisions storage), ADR-008 (ULID identifiers)\r\n\r\n-- Enable PostGIS extension for geospatial calculations\r\nCREATE EXTENSION IF NOT EXISTS postgis\n\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:323)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)\r\n\tat org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)\r\n\t... 73 common frames omitted\r\nCaused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V1__initial_schema.sql failed\n---------------------------------------\nSQL State  : 0A000\nError Code : 0\nMessage    : ERROR: extension \"postgis\" is not available\n  Detalhe: Could not open extension control file \"/usr/local/share/postgresql/extension/postgis.control\": No such file or directory.\n  Dica: The extension must first be installed on the system where PostgreSQL is running.\nLocation   : db/migration/V1__initial_schema.sql (Z:\\projects\\meli-test-mktplace\\target\\classes\\db\\migration\\V1__initial_schema.sql)\nLine       : 5\nStatement  : -- Initial schema for ML Marketplace Orders system\r\n-- Following ADR-001 (PostgreSQL with PostGIS), ADR-004 (Logistic decisions storage), ADR-008 (ULID identifiers)\r\n\r\n-- Enable PostGIS extension for geospatial calculations\r\nCREATE EXTENSION IF NOT EXISTS postgis\n\r\n\tat org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:382)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:272)\r\n\tat org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:271)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:244)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:139)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.lambda$execute$0(PostgreSQLAdvisoryLockTemplate.java:56)\r\n\tat org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:56)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:96)\r\n\tat org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:144)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:139)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:97)\r\n\tat org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:188)\r\n\tat org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)\r\n\tat org.flywaydb.core.Flyway.migrate(Flyway.java:140)\r\n\tat org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)\r\n\t... 97 common frames omitted\r\nCaused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V1__initial_schema.sql failed\n---------------------------------------\nSQL State  : 0A000\nError Code : 0\nMessage    : ERROR: extension \"postgis\" is not available\n  Detalhe: Could not open extension control file \"/usr/local/share/postgresql/extension/postgis.control\": No such file or directory.\n  Dica: The extension must first be installed on the system where PostgreSQL is running.\nLocation   : db/migration/V1__initial_schema.sql (Z:\\projects\\meli-test-mktplace\\target\\classes\\db\\migration\\V1__initial_schema.sql)\nLine       : 5\nStatement  : -- Initial schema for ML Marketplace Orders system\r\n-- Following ADR-001 (PostgreSQL with PostGIS), ADR-004 (Logistic decisions storage), ADR-008 (ULID identifiers)\r\n\r\n-- Enable PostGIS extension for geospatial calculations\r\nCREATE EXTENSION IF NOT EXISTS postgis\n\r\n\tat org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:267)\r\n\tat org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)\r\n\tat org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)\r\n\tat org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)\r\n\tat org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)\r\n\tat org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)\r\n\tat org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:374)\r\n\t... 116 common frames omitted\r\nCaused by: org.postgresql.util.PSQLException: ERROR: extension \"postgis\" is not available\n  Detalhe: Could not open extension control file \"/usr/local/share/postgresql/extension/postgis.control\": No such file or directory.\n  Dica: The extension must first be installed on the system where PostgreSQL is running.\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)\r\n\tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)\r\n\tat org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)\r\n\tat org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)\r\n\tat org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)\r\n\tat com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)\r\n\tat com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)\r\n\tat org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)\r\n\tat org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)\r\n\tat org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)\r\n\t... 122 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.6702402-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT]: OrderEndToEndProcessingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.6722399-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.7212474-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT]: OrderEventConsumptionIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.7232466-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.7443879-03:00","level":"ERROR","logger":"o.s.test.context.TestContextManager","thread":"main","message":"Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT@31a4dd80]","exception":"java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@701bb19c testClass = br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT, locations = [], classes = [br.com.ml.mktplace.orders.OrdersApplication], contextInitializerClasses = [], activeProfiles = [\"integration-test\"], propertySourceDescriptors = [], propertySourceProperties = [\"org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true\", \"server.port=0\"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@325bb9a6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@15fa55a6, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@69c93ca4, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@3c0036b, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@4d961a1d, org.springframework.boot.test.context.SpringBootTestAnnotation@56660b6b], resourceBasePath = \"src/main/webapp\", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)\r\n\tat org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)\r\n\tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.7486628-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventPublishingIT]: OrderEventPublishingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.7502749-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventPublishingIT","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.7702533-03:00","level":"ERROR","logger":"o.s.test.context.TestContextManager","thread":"main","message":"Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [br.com.ml.mktplace.orders.integration.OrderEventPublishingIT@303529f6]","exception":"java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@1d8fec8a testClass = br.com.ml.mktplace.orders.integration.OrderEventPublishingIT, locations = [], classes = [br.com.ml.mktplace.orders.OrdersApplication], contextInitializerClasses = [], activeProfiles = [\"integration-test\"], propertySourceDescriptors = [], propertySourceProperties = [\"org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true\", \"server.port=0\"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@325bb9a6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@15fa55a6, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@69c93ca4, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@3c0036b, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@4d961a1d, org.springframework.boot.test.context.SpringBootTestAnnotation@56660b6b], resourceBasePath = \"src/main/webapp\", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)\r\n\tat org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)\r\n\tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.7750908-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderFlowIT]: OrderFlowIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T13:53:54.7761711-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderFlowIT","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:02.8497293-03:00","level":"INFO","logger":"o.h.validator.internal.util.Version","thread":"background-preinit","message":"HV000001: Hibernate Validator 8.0.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:02.8877262-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Starting DistributionCenterCachingIT using Java 21.0.8 with PID 28884 (started by ciror in Z:\\projects\\meli-test-mktplace)","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:02.8877262-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"The following 1 profile is active: \"integration-test\"","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:03.4863896-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:03.4874042-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:03.587332-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 94 ms. Found 1 JPA repository interface.","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:04.0217584-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:04.0227592-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data Redis repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:04.0544364-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationExtensionSupport","thread":"main","message":"Spring Data Redis - Could not safely identify store assignment for repository candidate interface br.com.ml.mktplace.orders.adapter.outbound.persistence.repository.JpaOrderEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:04.0554409-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 18 ms. Found 0 Redis repository interfaces.","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.0209071-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat initialized with port 0 (http)","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.028118-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Initializing ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.0301184-03:00","level":"INFO","logger":"o.a.catalina.core.StandardService","thread":"main","message":"Starting service [Tomcat]","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.0301184-03:00","level":"INFO","logger":"o.a.catalina.core.StandardEngine","thread":"main","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.08492-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"main","message":"Initializing Spring embedded WebApplicationContext","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.08492-03:00","level":"INFO","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","thread":"main","message":"Root WebApplicationContext: initialization completed in 2183 ms","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.4178546-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Starting...","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.6455575-03:00","level":"INFO","logger":"com.zaxxer.hikari.pool.HikariPool","thread":"main","message":"OrdersHikariPool - Added connection org.postgresql.jdbc.PgConnection@4d1e93a6","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.6471607-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Start completed.","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.7908908-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"Flyway Community Edition 9.22.3 by Redgate","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.7918923-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"See release notes here: https://rd.gt/416ObMi","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.7918923-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.8170794-03:00","level":"INFO","logger":"org.flywaydb.core.FlywayExecutor","thread":"main","message":"Database: jdbc:postgresql://localhost:52296/mktplace_orders (PostgreSQL 16.10)","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.8298453-03:00","level":"WARN","logger":"o.f.c.i.database.base.Database","thread":"main","message":"Flyway upgrade recommended: PostgreSQL 16.10 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.8756298-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Schema history table \"public\".\"flyway_schema_history\" does not exist yet","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.8811219-03:00","level":"INFO","logger":"o.f.core.internal.command.DbValidate","thread":"main","message":"Successfully validated 2 migrations (execution time 00:00.035s)","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.9003462-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Creating Schema History table \"public\".\"flyway_schema_history\" ...","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.9406221-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Current version of schema \"public\": << Empty Schema >>","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.9522704-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"1 - initial schema\"","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.9632012-03:00","level":"WARN","logger":"c.zaxxer.hikari.pool.ProxyConnection","thread":"main","message":"OrdersHikariPool - Connection org.postgresql.jdbc.PgConnection@54f7e81b marked as broken because of SQLSTATE(0A000), ErrorCode(0)","exception":"org.postgresql.util.PSQLException: ERROR: extension \"postgis\" is not available\n  Detalhe: Could not open extension control file \"/usr/local/share/postgresql/extension/postgis.control\": No such file or directory.\n  Dica: The extension must first be installed on the system where PostgreSQL is running.\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)\r\n\tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)\r\n\tat org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)\r\n\tat org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)\r\n\tat org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)\r\n\tat com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)\r\n\tat com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)\r\n\tat org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)\r\n\tat org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)\r\n\tat org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)\r\n\tat org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)\r\n\tat org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)\r\n\tat org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)\r\n\tat org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)\r\n\tat org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:374)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:272)\r\n\tat org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:271)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:244)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:139)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.lambda$execute$0(PostgreSQLAdvisoryLockTemplate.java:56)\r\n\tat org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:56)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:96)\r\n\tat org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:144)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:139)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:97)\r\n\tat org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:188)\r\n\tat org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)\r\n\tat org.flywaydb.core.Flyway.migrate(Flyway.java:140)\r\n\tat org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:323)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)\r\n\tat org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)\r\n\tat org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)\r\n\tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.9744787-03:00","level":"ERROR","logger":"o.f.c.i.j.TransactionalExecutionTemplate","thread":"main","message":"Unable to rollback transaction","exception":"java.sql.SQLException: Connection is closed\r\n\tat com.zaxxer.hikari.pool.ProxyConnection$ClosedConnection.lambda$getClosedConnection$0(ProxyConnection.java:502)\r\n\tat jdk.proxy3/jdk.proxy3.$Proxy147.rollback(Unknown Source)\r\n\tat com.zaxxer.hikari.pool.ProxyConnection.rollback(ProxyConnection.java:385)\r\n\tat com.zaxxer.hikari.pool.HikariProxyConnection.rollback(HikariProxyConnection.java)\r\n\tat org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:71)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:271)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:244)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:139)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.lambda$execute$0(PostgreSQLAdvisoryLockTemplate.java:56)\r\n\tat org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:56)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:96)\r\n\tat org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:144)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:139)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:97)\r\n\tat org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:188)\r\n\tat org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)\r\n\tat org.flywaydb.core.Flyway.migrate(Flyway.java:140)\r\n\tat org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:323)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)\r\n\tat org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)\r\n\tat org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)\r\n\tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.976822-03:00","level":"ERROR","logger":"o.f.c.i.j.TransactionalExecutionTemplate","thread":"main","message":"Unable to restore autocommit to original value for connection","exception":"java.sql.SQLException: Connection is closed\r\n\tat com.zaxxer.hikari.pool.ProxyConnection$ClosedConnection.lambda$getClosedConnection$0(ProxyConnection.java:502)\r\n\tat jdk.proxy3/jdk.proxy3.$Proxy147.setAutoCommit(Unknown Source)\r\n\tat com.zaxxer.hikari.pool.ProxyConnection.setAutoCommit(ProxyConnection.java:401)\r\n\tat com.zaxxer.hikari.pool.HikariProxyConnection.setAutoCommit(HikariProxyConnection.java)\r\n\tat org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:86)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:271)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:244)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:139)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.lambda$execute$0(PostgreSQLAdvisoryLockTemplate.java:56)\r\n\tat org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:56)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:96)\r\n\tat org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:144)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:139)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:97)\r\n\tat org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:188)\r\n\tat org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)\r\n\tat org.flywaydb.core.Flyway.migrate(Flyway.java:140)\r\n\tat org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:323)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)\r\n\tat org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)\r\n\tat org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)\r\n\tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.9787335-03:00","level":"ERROR","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migration of schema \"public\" to version \"1 - initial schema\" failed! Changes successfully rolled back.","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.9810847-03:00","level":"WARN","logger":"o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext","thread":"main","message":"Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V1__initial_schema.sql failed\n---------------------------------------\nSQL State  : 0A000\nError Code : 0\nMessage    : ERROR: extension \"postgis\" is not available\n  Detalhe: Could not open extension control file \"/usr/local/share/postgresql/extension/postgis.control\": No such file or directory.\n  Dica: The extension must first be installed on the system where PostgreSQL is running.\nLocation   : db/migration/V1__initial_schema.sql (Z:\\projects\\meli-test-mktplace\\target\\classes\\db\\migration\\V1__initial_schema.sql)\nLine       : 5\nStatement  : -- Initial schema for ML Marketplace Orders system\r\n-- Following ADR-001 (PostgreSQL with PostGIS), ADR-004 (Logistic decisions storage), ADR-008 (ULID identifiers)\r\n\r\n-- Enable PostGIS extension for geospatial calculations\r\nCREATE EXTENSION IF NOT EXISTS postgis\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.9816725-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Shutdown initiated...","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.9851513-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Shutdown completed.","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:05.991697-03:00","level":"INFO","logger":"o.a.catalina.core.StandardService","thread":"main","message":"Stopping service [Tomcat]","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:06.0111068-03:00","level":"INFO","logger":"o.s.b.a.l.ConditionEvaluationReportLogger","thread":"main","message":"\r\n\r\nError starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:06.0433436-03:00","level":"ERROR","logger":"o.s.boot.SpringApplication","thread":"main","message":"Application run failed","exception":"org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V1__initial_schema.sql failed\n---------------------------------------\nSQL State  : 0A000\nError Code : 0\nMessage    : ERROR: extension \"postgis\" is not available\n  Detalhe: Could not open extension control file \"/usr/local/share/postgresql/extension/postgis.control\": No such file or directory.\n  Dica: The extension must first be installed on the system where PostgreSQL is running.\nLocation   : db/migration/V1__initial_schema.sql (Z:\\projects\\meli-test-mktplace\\target\\classes\\db\\migration\\V1__initial_schema.sql)\nLine       : 5\nStatement  : -- Initial schema for ML Marketplace Orders system\r\n-- Following ADR-001 (PostgreSQL with PostGIS), ADR-004 (Logistic decisions storage), ADR-008 (ULID identifiers)\r\n\r\n-- Enable PostGIS extension for geospatial calculations\r\nCREATE EXTENSION IF NOT EXISTS postgis\n\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:323)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)\r\n\tat org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)\r\n\tat org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)\r\n\tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\r\nCaused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V1__initial_schema.sql failed\n---------------------------------------\nSQL State  : 0A000\nError Code : 0\nMessage    : ERROR: extension \"postgis\" is not available\n  Detalhe: Could not open extension control file \"/usr/local/share/postgresql/extension/postgis.control\": No such file or directory.\n  Dica: The extension must first be installed on the system where PostgreSQL is running.\nLocation   : db/migration/V1__initial_schema.sql (Z:\\projects\\meli-test-mktplace\\target\\classes\\db\\migration\\V1__initial_schema.sql)\nLine       : 5\nStatement  : -- Initial schema for ML Marketplace Orders system\r\n-- Following ADR-001 (PostgreSQL with PostGIS), ADR-004 (Logistic decisions storage), ADR-008 (ULID identifiers)\r\n\r\n-- Enable PostGIS extension for geospatial calculations\r\nCREATE EXTENSION IF NOT EXISTS postgis\n\r\n\tat org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:382)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:272)\r\n\tat org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:271)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:244)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:139)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.lambda$execute$0(PostgreSQLAdvisoryLockTemplate.java:56)\r\n\tat org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:56)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:96)\r\n\tat org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:144)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:139)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:97)\r\n\tat org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:188)\r\n\tat org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)\r\n\tat org.flywaydb.core.Flyway.migrate(Flyway.java:140)\r\n\tat org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)\r\n\t... 97 common frames omitted\r\nCaused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V1__initial_schema.sql failed\n---------------------------------------\nSQL State  : 0A000\nError Code : 0\nMessage    : ERROR: extension \"postgis\" is not available\n  Detalhe: Could not open extension control file \"/usr/local/share/postgresql/extension/postgis.control\": No such file or directory.\n  Dica: The extension must first be installed on the system where PostgreSQL is running.\nLocation   : db/migration/V1__initial_schema.sql (Z:\\projects\\meli-test-mktplace\\target\\classes\\db\\migration\\V1__initial_schema.sql)\nLine       : 5\nStatement  : -- Initial schema for ML Marketplace Orders system\r\n-- Following ADR-001 (PostgreSQL with PostGIS), ADR-004 (Logistic decisions storage), ADR-008 (ULID identifiers)\r\n\r\n-- Enable PostGIS extension for geospatial calculations\r\nCREATE EXTENSION IF NOT EXISTS postgis\n\r\n\tat org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:267)\r\n\tat org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)\r\n\tat org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)\r\n\tat org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)\r\n\tat org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)\r\n\tat org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)\r\n\tat org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:374)\r\n\t... 116 common frames omitted\r\nCaused by: org.postgresql.util.PSQLException: ERROR: extension \"postgis\" is not available\n  Detalhe: Could not open extension control file \"/usr/local/share/postgresql/extension/postgis.control\": No such file or directory.\n  Dica: The extension must first be installed on the system where PostgreSQL is running.\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)\r\n\tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)\r\n\tat org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)\r\n\tat org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)\r\n\tat org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)\r\n\tat com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)\r\n\tat com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)\r\n\tat org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)\r\n\tat org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)\r\n\tat org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)\r\n\t... 122 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:06.0574943-03:00","level":"ERROR","logger":"o.s.test.context.TestContextManager","thread":"main","message":"Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [br.com.ml.mktplace.orders.integration.DistributionCenterCachingIT@3c573c04]","exception":"java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@407c9ee8 testClass = br.com.ml.mktplace.orders.integration.DistributionCenterCachingIT, locations = [], classes = [br.com.ml.mktplace.orders.OrdersApplication], contextInitializerClasses = [], activeProfiles = [\"integration-test\"], propertySourceDescriptors = [], propertySourceProperties = [\"org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true\", \"server.port=0\"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@325bb9a6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@15fa55a6, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@69c93ca4, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@3c0036b, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@4d961a1d, org.springframework.boot.test.context.SpringBootTestAnnotation@5fd6c68a], resourceBasePath = \"src/main/webapp\", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)\r\n\tat org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)\r\n\tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V1__initial_schema.sql failed\n---------------------------------------\nSQL State  : 0A000\nError Code : 0\nMessage    : ERROR: extension \"postgis\" is not available\n  Detalhe: Could not open extension control file \"/usr/local/share/postgresql/extension/postgis.control\": No such file or directory.\n  Dica: The extension must first be installed on the system where PostgreSQL is running.\nLocation   : db/migration/V1__initial_schema.sql (Z:\\projects\\meli-test-mktplace\\target\\classes\\db\\migration\\V1__initial_schema.sql)\nLine       : 5\nStatement  : -- Initial schema for ML Marketplace Orders system\r\n-- Following ADR-001 (PostgreSQL with PostGIS), ADR-004 (Logistic decisions storage), ADR-008 (ULID identifiers)\r\n\r\n-- Enable PostGIS extension for geospatial calculations\r\nCREATE EXTENSION IF NOT EXISTS postgis\n\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:323)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)\r\n\tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)\r\n\tat org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)\r\n\t... 73 common frames omitted\r\nCaused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V1__initial_schema.sql failed\n---------------------------------------\nSQL State  : 0A000\nError Code : 0\nMessage    : ERROR: extension \"postgis\" is not available\n  Detalhe: Could not open extension control file \"/usr/local/share/postgresql/extension/postgis.control\": No such file or directory.\n  Dica: The extension must first be installed on the system where PostgreSQL is running.\nLocation   : db/migration/V1__initial_schema.sql (Z:\\projects\\meli-test-mktplace\\target\\classes\\db\\migration\\V1__initial_schema.sql)\nLine       : 5\nStatement  : -- Initial schema for ML Marketplace Orders system\r\n-- Following ADR-001 (PostgreSQL with PostGIS), ADR-004 (Logistic decisions storage), ADR-008 (ULID identifiers)\r\n\r\n-- Enable PostGIS extension for geospatial calculations\r\nCREATE EXTENSION IF NOT EXISTS postgis\n\r\n\tat org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:382)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:272)\r\n\tat org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:271)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:244)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:139)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.lambda$execute$0(PostgreSQLAdvisoryLockTemplate.java:56)\r\n\tat org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:56)\r\n\tat org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:96)\r\n\tat org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:144)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:139)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:97)\r\n\tat org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:188)\r\n\tat org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)\r\n\tat org.flywaydb.core.Flyway.migrate(Flyway.java:140)\r\n\tat org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)\r\n\t... 97 common frames omitted\r\nCaused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V1__initial_schema.sql failed\n---------------------------------------\nSQL State  : 0A000\nError Code : 0\nMessage    : ERROR: extension \"postgis\" is not available\n  Detalhe: Could not open extension control file \"/usr/local/share/postgresql/extension/postgis.control\": No such file or directory.\n  Dica: The extension must first be installed on the system where PostgreSQL is running.\nLocation   : db/migration/V1__initial_schema.sql (Z:\\projects\\meli-test-mktplace\\target\\classes\\db\\migration\\V1__initial_schema.sql)\nLine       : 5\nStatement  : -- Initial schema for ML Marketplace Orders system\r\n-- Following ADR-001 (PostgreSQL with PostGIS), ADR-004 (Logistic decisions storage), ADR-008 (ULID identifiers)\r\n\r\n-- Enable PostGIS extension for geospatial calculations\r\nCREATE EXTENSION IF NOT EXISTS postgis\n\r\n\tat org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:267)\r\n\tat org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)\r\n\tat org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)\r\n\tat org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)\r\n\tat org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)\r\n\tat org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)\r\n\tat org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)\r\n\tat org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:374)\r\n\t... 116 common frames omitted\r\nCaused by: org.postgresql.util.PSQLException: ERROR: extension \"postgis\" is not available\n  Detalhe: Could not open extension control file \"/usr/local/share/postgresql/extension/postgis.control\": No such file or directory.\n  Dica: The extension must first be installed on the system where PostgreSQL is running.\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)\r\n\tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)\r\n\tat org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)\r\n\tat org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)\r\n\tat org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)\r\n\tat com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)\r\n\tat com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)\r\n\tat org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)\r\n\tat org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)\r\n\tat org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)\r\n\t... 122 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:06.1016053-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT]: OrderEndToEndProcessingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:06.10361-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:06.1528587-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT]: OrderEventConsumptionIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:06.1548586-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:06.1747958-03:00","level":"ERROR","logger":"o.s.test.context.TestContextManager","thread":"main","message":"Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT@3f7c623a]","exception":"java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@46494bec testClass = br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT, locations = [], classes = [br.com.ml.mktplace.orders.OrdersApplication], contextInitializerClasses = [], activeProfiles = [\"integration-test\"], propertySourceDescriptors = [], propertySourceProperties = [\"org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true\", \"server.port=0\"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@325bb9a6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@15fa55a6, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@69c93ca4, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@3c0036b, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@4d961a1d, org.springframework.boot.test.context.SpringBootTestAnnotation@5fd6c68a], resourceBasePath = \"src/main/webapp\", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)\r\n\tat org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)\r\n\tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:06.1801272-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventPublishingIT]: OrderEventPublishingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:06.1817255-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventPublishingIT","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:06.1986911-03:00","level":"ERROR","logger":"o.s.test.context.TestContextManager","thread":"main","message":"Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [br.com.ml.mktplace.orders.integration.OrderEventPublishingIT@26088886]","exception":"java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@2a12b003 testClass = br.com.ml.mktplace.orders.integration.OrderEventPublishingIT, locations = [], classes = [br.com.ml.mktplace.orders.OrdersApplication], contextInitializerClasses = [], activeProfiles = [\"integration-test\"], propertySourceDescriptors = [], propertySourceProperties = [\"org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true\", \"server.port=0\"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@325bb9a6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@15fa55a6, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@69c93ca4, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@3c0036b, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@4d961a1d, org.springframework.boot.test.context.SpringBootTestAnnotation@5fd6c68a], resourceBasePath = \"src/main/webapp\", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)\r\n\tat org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)\r\n\tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:06.202904-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderFlowIT]: OrderFlowIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T13:54:06.2039596-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderFlowIT","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:11.2309846-03:00","level":"INFO","logger":"o.h.validator.internal.util.Version","thread":"background-preinit","message":"HV000001: Hibernate Validator 8.0.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:11.308539-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Starting DistributionCenterCachingIT using Java 21.0.8 with PID 13948 (started by ciror in Z:\\projects\\meli-test-mktplace)","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:11.3095452-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"The following 1 profile is active: \"integration-test\"","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:12.1956988-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:12.1966986-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:12.3162947-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 111 ms. Found 1 JPA repository interface.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:12.9453212-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:12.9473249-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data Redis repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:12.9883379-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationExtensionSupport","thread":"main","message":"Spring Data Redis - Could not safely identify store assignment for repository candidate interface br.com.ml.mktplace.orders.adapter.outbound.persistence.repository.JpaOrderEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:12.9893396-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 24 ms. Found 0 Redis repository interfaces.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:14.3113319-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat initialized with port 0 (http)","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:14.3252656-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Initializing ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:14.3292661-03:00","level":"INFO","logger":"o.a.catalina.core.StandardService","thread":"main","message":"Starting service [Tomcat]","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:14.3312708-03:00","level":"INFO","logger":"o.a.catalina.core.StandardEngine","thread":"main","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:14.4149677-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"main","message":"Initializing Spring embedded WebApplicationContext","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:14.4149677-03:00","level":"INFO","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","thread":"main","message":"Root WebApplicationContext: initialization completed in 3083 ms","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:14.915961-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Starting...","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:15.1845406-03:00","level":"INFO","logger":"com.zaxxer.hikari.pool.HikariPool","thread":"main","message":"OrdersHikariPool - Added connection org.postgresql.jdbc.PgConnection@34350895","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:15.18674-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Start completed.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:15.3607129-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"Flyway Community Edition 9.22.3 by Redgate","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:15.3607129-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"See release notes here: https://rd.gt/416ObMi","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:15.3607129-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:15.3952769-03:00","level":"INFO","logger":"org.flywaydb.core.FlywayExecutor","thread":"main","message":"Database: jdbc:postgresql://localhost:52419/mktplace_orders (PostgreSQL 16.4)","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:15.4072178-03:00","level":"WARN","logger":"o.f.c.i.database.base.Database","thread":"main","message":"Flyway upgrade recommended: PostgreSQL 16.4 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:15.4545272-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Schema history table \"public\".\"flyway_schema_history\" does not exist yet","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:15.4605778-03:00","level":"INFO","logger":"o.f.core.internal.command.DbValidate","thread":"main","message":"Successfully validated 2 migrations (execution time 00:00.035s)","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:15.4800671-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Creating Schema History table \"public\".\"flyway_schema_history\" ...","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:15.5195705-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Current version of schema \"public\": << Empty Schema >>","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:15.5327693-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"1 - initial schema\"","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:15.5409262-03:00","level":"WARN","logger":"o.f.c.i.s.DefaultSqlScriptExecutor","thread":"main","message":"DB: extension \"postgis\" already exists, skipping (SQL State: 42710 - Error Code: 0)","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:15.588353-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"2 - sample distribution centers\"","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:15.6015969-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Successfully applied 2 migrations to schema \"public\", now at version v2 (execution time 00:00.038s)","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:15.6749562-03:00","level":"INFO","logger":"o.h.jpa.internal.util.LogHelper","thread":"main","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:15.7474547-03:00","level":"INFO","logger":"org.hibernate.Version","thread":"main","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:15.7578056-03:00","level":"INFO","logger":"o.h.s.integration.SpatialService","thread":"main","message":"HHH80000001: hibernate-spatial integration enabled : true","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:15.7923877-03:00","level":"INFO","logger":"o.h.c.i.RegionFactoryInitiator","thread":"main","message":"HHH000026: Second-level cache disabled","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:15.9311018-03:00","level":"WARN","logger":"org.hibernate.orm.deprecation","thread":"main","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:15.9630743-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:16.2020257-03:00","level":"INFO","logger":"o.s.o.j.p.SpringPersistenceUnitInfo","thread":"main","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:16.2296469-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:16.7078172-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000004: hibernate-spatial adding function contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:17.3368671-03:00","level":"INFO","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator","thread":"main","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:17.3522531-03:00","level":"INFO","logger":"o.hibernate.orm.connections.access","thread":"main","message":"HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@5756dc17] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:17.3763908-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"main","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:17.9843991-03:00","level":"INFO","logger":"o.s.d.j.r.query.QueryEnhancerFactory","thread":"main","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:19.5063965-03:00","level":"WARN","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration","thread":"main","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:20.8274443-03:00","level":"INFO","logger":"o.s.b.a.e.web.EndpointLinksResolver","thread":"main","message":"Exposing 5 endpoint(s) beneath base path '/actuator'","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:21.1136636-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Starting ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:21.1300671-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat started on port 52431 (http) with context path '/api'","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:21.1727852-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:52423]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-orders-service-it-consumer-1\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = orders-service-it-consumer\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:21.3919318-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:21.3929311-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:21.3929311-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758646581390","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:21.3984556-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:21.4184693-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Started DistributionCenterCachingIT in 10.863 seconds (process running for 29.418)","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:21.9340338-03:00","level":"WARN","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error while fetching metadata with correlation id 2 : {orders.events=LEADER_NOT_AVAILABLE}","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:21.9375215-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cluster ID: VU2i7LECSK-jsdnhOOufhw","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:22.0514217-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Discovered group coordinator localhost:52423 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:22.0575801-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:22.0807816-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: need to re-join with the given member-id: consumer-orders-service-it-consumer-1-5fdf1906-66e0-48e6-9bac-659aca65ef3b","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:22.0813105-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:22.0813105-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:22.0943594-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully joined group with generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-5fdf1906-66e0-48e6-9bac-659aca65ef3b', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:22.0994722-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Finished assignment for group at generation 1: {consumer-orders-service-it-consumer-1-5fdf1906-66e0-48e6-9bac-659aca65ef3b=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:22.1378543-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully synced group in generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-5fdf1906-66e0-48e6-9bac-659aca65ef3b', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:22.1384261-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:22.1424271-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:22.1538103-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:22.1642194-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:52423 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:22.165218-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions assigned: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:22.3147882-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT]: OrderEndToEndProcessingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:22.3165312-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:22.5027897-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT]: OrderEventConsumptionIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:22.5057901-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:22.7244316-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventPublishingIT]: OrderEventPublishingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:22.726963-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventPublishingIT","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:22.7979473-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderFlowIT]: OrderFlowIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:22.7990113-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderFlowIT","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:23.0172776-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:23.0204726-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight FETCH request with correlation id 13 due to node 1 being disconnected (elapsed time since creation: 333ms, elapsed time since send: 333ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:23.0204726-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 2147483646 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:23.0225099-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:23.0225099-03:00","level":"INFO","logger":"o.a.k.clients.FetchSessionHandler","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error sending fetch request (sessionId=1648074208, epoch=1) to node 1:","exception":"org.apache.kafka.common.errors.DisconnectException: null\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:23.0238876-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Group coordinator localhost:52423 (id: 2147483646 rack: null) is unavailable or invalid due to cause: coordinator unavailable. isDisconnected: true. Rediscovery will be attempted.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:23.0243134-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:23.0243134-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions revoked: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:23.0251604-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:23.0251604-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:23.025858-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Unsubscribed all topics or patterns and assigned partitions","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:23.0264313-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:23.027029-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:23.0305737-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:23.0305737-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:23.0311362-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:23.0344311-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"App info kafka.consumer for consumer-orders-service-it-consumer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:23.035455-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: Consumer stopped","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:23.1670827-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"SpringApplicationShutdownHook","message":"Closing JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:23.1690829-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown initiated...","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:23.1719342-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown completed.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:31.905628-03:00","level":"INFO","logger":"o.h.validator.internal.util.Version","thread":"background-preinit","message":"HV000001: Hibernate Validator 8.0.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:31.9472605-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Starting DistributionCenterCachingIT using Java 21.0.8 with PID 10060 (started by ciror in Z:\\projects\\meli-test-mktplace)","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:31.9484449-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"The following 1 profile is active: \"integration-test\"","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:32.5355395-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:32.5365442-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:32.6256911-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 84 ms. Found 1 JPA repository interface.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:33.037295-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:33.0390535-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data Redis repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:33.0706762-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationExtensionSupport","thread":"main","message":"Spring Data Redis - Could not safely identify store assignment for repository candidate interface br.com.ml.mktplace.orders.adapter.outbound.persistence.repository.JpaOrderEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:33.0712033-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 16 ms. Found 0 Redis repository interfaces.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:33.9871861-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat initialized with port 0 (http)","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:33.9966821-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Initializing ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:33.9989132-03:00","level":"INFO","logger":"o.a.catalina.core.StandardService","thread":"main","message":"Starting service [Tomcat]","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:33.9989132-03:00","level":"INFO","logger":"o.a.catalina.core.StandardEngine","thread":"main","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:34.055353-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"main","message":"Initializing Spring embedded WebApplicationContext","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:34.0563474-03:00","level":"INFO","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","thread":"main","message":"Root WebApplicationContext: initialization completed in 2089 ms","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:34.414521-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Starting...","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:34.6362388-03:00","level":"INFO","logger":"com.zaxxer.hikari.pool.HikariPool","thread":"main","message":"OrdersHikariPool - Added connection org.postgresql.jdbc.PgConnection@400ccb09","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:34.6379595-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Start completed.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:34.8135119-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"Flyway Community Edition 9.22.3 by Redgate","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:34.8135119-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"See release notes here: https://rd.gt/416ObMi","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:34.8140669-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:34.8461475-03:00","level":"INFO","logger":"org.flywaydb.core.FlywayExecutor","thread":"main","message":"Database: jdbc:postgresql://localhost:52455/mktplace_orders (PostgreSQL 16.4)","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:34.8612345-03:00","level":"WARN","logger":"o.f.c.i.database.base.Database","thread":"main","message":"Flyway upgrade recommended: PostgreSQL 16.4 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:34.8997452-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Schema history table \"public\".\"flyway_schema_history\" does not exist yet","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:34.9055173-03:00","level":"INFO","logger":"o.f.core.internal.command.DbValidate","thread":"main","message":"Successfully validated 2 migrations (execution time 00:00.028s)","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:34.924458-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Creating Schema History table \"public\".\"flyway_schema_history\" ...","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:34.9657931-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Current version of schema \"public\": << Empty Schema >>","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:34.9790277-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"1 - initial schema\"","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:34.9854241-03:00","level":"WARN","logger":"o.f.c.i.s.DefaultSqlScriptExecutor","thread":"main","message":"DB: extension \"postgis\" already exists, skipping (SQL State: 42710 - Error Code: 0)","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:35.0337072-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"2 - sample distribution centers\"","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:35.0556483-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Successfully applied 2 migrations to schema \"public\", now at version v2 (execution time 00:00.042s)","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:35.1267139-03:00","level":"INFO","logger":"o.h.jpa.internal.util.LogHelper","thread":"main","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:35.1962151-03:00","level":"INFO","logger":"org.hibernate.Version","thread":"main","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:35.2065587-03:00","level":"INFO","logger":"o.h.s.integration.SpatialService","thread":"main","message":"HHH80000001: hibernate-spatial integration enabled : true","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:35.2364801-03:00","level":"INFO","logger":"o.h.c.i.RegionFactoryInitiator","thread":"main","message":"HHH000026: Second-level cache disabled","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:35.3627347-03:00","level":"WARN","logger":"org.hibernate.orm.deprecation","thread":"main","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:35.3803774-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:35.5941115-03:00","level":"INFO","logger":"o.s.o.j.p.SpringPersistenceUnitInfo","thread":"main","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:35.6167254-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:35.9378611-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000004: hibernate-spatial adding function contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:36.4133292-03:00","level":"INFO","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator","thread":"main","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:36.4279339-03:00","level":"INFO","logger":"o.hibernate.orm.connections.access","thread":"main","message":"HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@a538872] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:36.4482211-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"main","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:36.8304624-03:00","level":"INFO","logger":"o.s.d.j.r.query.QueryEnhancerFactory","thread":"main","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:38.0563795-03:00","level":"WARN","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration","thread":"main","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:39.0469023-03:00","level":"INFO","logger":"o.s.b.a.e.web.EndpointLinksResolver","thread":"main","message":"Exposing 5 endpoint(s) beneath base path '/actuator'","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:39.2439057-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Starting ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:39.2565261-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat started on port 52467 (http) with context path '/api'","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:39.2899713-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:52458]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-orders-service-it-consumer-1\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = orders-service-it-consumer\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:39.4118929-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:39.4129074-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:39.4129074-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758646599410","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:39.415064-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:39.4307249-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Started DistributionCenterCachingIT in 8.001 seconds (process running for 15.546)","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:39.8635043-03:00","level":"WARN","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error while fetching metadata with correlation id 2 : {orders.events=LEADER_NOT_AVAILABLE}","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:39.8641024-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cluster ID: 4BXotSmNRYep_CabuOGidg","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:39.9884141-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Discovered group coordinator localhost:52458 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:39.9927507-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.011149-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: need to re-join with the given member-id: consumer-orders-service-it-consumer-1-48c81dc1-c953-46c8-a43e-25c1464080de","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.0116675-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.0116675-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.0240809-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully joined group with generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-48c81dc1-c953-46c8-a43e-25c1464080de', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.0286791-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Finished assignment for group at generation 1: {consumer-orders-service-it-consumer-1-48c81dc1-c953-46c8-a43e-25c1464080de=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.039257-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT]: OrderEndToEndProcessingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.0402557-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.068058-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully synced group in generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-48c81dc1-c953-46c8-a43e-25c1464080de', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.0686089-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.0701732-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.0795842-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.0896767-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:52458 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.0902863-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions assigned: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.1824956-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT]: OrderEventConsumptionIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.1854972-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.3269902-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventPublishingIT]: OrderEventPublishingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.3279967-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventPublishingIT","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.362113-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderFlowIT]: OrderFlowIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.363114-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderFlowIT","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.5685929-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.5703196-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight FETCH request with correlation id 12 due to node 1 being disconnected (elapsed time since creation: 475ms, elapsed time since send: 475ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.5709451-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.5715255-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 2147483646 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.5715255-03:00","level":"INFO","logger":"o.a.k.clients.FetchSessionHandler","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error sending fetch request (sessionId=INVALID, epoch=INITIAL) to node 1:","exception":"org.apache.kafka.common.errors.DisconnectException: null\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.573265-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Group coordinator localhost:52458 (id: 2147483646 rack: null) is unavailable or invalid due to cause: coordinator unavailable. isDisconnected: true. Rediscovery will be attempted.","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.5738925-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.5744303-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions revoked: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.5744303-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.5744303-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.5744303-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Unsubscribed all topics or patterns and assigned partitions","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.5755372-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.5755372-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.5761903-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.5761903-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.5761903-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.5785906-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"App info kafka.consumer for consumer-orders-service-it-consumer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.5791532-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: Consumer stopped","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.7056859-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"SpringApplicationShutdownHook","message":"Closing JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.7066863-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown initiated...","service":"orders-service"}
{"timestamp":"2025-09-23T13:56:40.7076872-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown completed.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:05.1661621-03:00","level":"INFO","logger":"o.h.validator.internal.util.Version","thread":"background-preinit","message":"HV000001: Hibernate Validator 8.0.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:05.204834-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Starting DistributionCenterCachingIT using Java 21.0.8 with PID 30728 (started by ciror in Z:\\projects\\meli-test-mktplace)","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:05.2063945-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"The following 1 profile is active: \"integration-test\"","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:05.8247869-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:05.8247869-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:05.9138279-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 82 ms. Found 1 JPA repository interface.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:06.3564611-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:06.3585994-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data Redis repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:06.3883004-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationExtensionSupport","thread":"main","message":"Spring Data Redis - Could not safely identify store assignment for repository candidate interface br.com.ml.mktplace.orders.adapter.outbound.persistence.repository.JpaOrderEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:06.3883004-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 18 ms. Found 0 Redis repository interfaces.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:07.3673843-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat initialized with port 0 (http)","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:07.3770017-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Initializing ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:07.3780434-03:00","level":"INFO","logger":"o.a.catalina.core.StandardService","thread":"main","message":"Starting service [Tomcat]","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:07.3790866-03:00","level":"INFO","logger":"o.a.catalina.core.StandardEngine","thread":"main","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:07.4456756-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"main","message":"Initializing Spring embedded WebApplicationContext","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:07.4456756-03:00","level":"INFO","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","thread":"main","message":"Root WebApplicationContext: initialization completed in 2223 ms","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:07.7891054-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Starting...","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:07.9998076-03:00","level":"INFO","logger":"com.zaxxer.hikari.pool.HikariPool","thread":"main","message":"OrdersHikariPool - Added connection org.postgresql.jdbc.PgConnection@6e82c947","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:08.0013454-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Start completed.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:08.1337944-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"Flyway Community Edition 9.22.3 by Redgate","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:08.1343327-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"See release notes here: https://rd.gt/416ObMi","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:08.1343327-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:08.1588133-03:00","level":"INFO","logger":"org.flywaydb.core.FlywayExecutor","thread":"main","message":"Database: jdbc:postgresql://localhost:52546/mktplace_orders (PostgreSQL 16.4)","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:08.1707355-03:00","level":"WARN","logger":"o.f.c.i.database.base.Database","thread":"main","message":"Flyway upgrade recommended: PostgreSQL 16.4 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:08.2076668-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Schema history table \"public\".\"flyway_schema_history\" does not exist yet","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:08.2126724-03:00","level":"INFO","logger":"o.f.core.internal.command.DbValidate","thread":"main","message":"Successfully validated 2 migrations (execution time 00:00.027s)","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:08.230396-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Creating Schema History table \"public\".\"flyway_schema_history\" ...","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:08.2628353-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Current version of schema \"public\": << Empty Schema >>","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:08.2739667-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"1 - initial schema\"","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:08.281307-03:00","level":"WARN","logger":"o.f.c.i.s.DefaultSqlScriptExecutor","thread":"main","message":"DB: extension \"postgis\" already exists, skipping (SQL State: 42710 - Error Code: 0)","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:08.3232574-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"2 - sample distribution centers\"","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:08.3407014-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Successfully applied 2 migrations to schema \"public\", now at version v2 (execution time 00:00.038s)","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:08.4000388-03:00","level":"INFO","logger":"o.h.jpa.internal.util.LogHelper","thread":"main","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:08.4533469-03:00","level":"INFO","logger":"org.hibernate.Version","thread":"main","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:08.4609951-03:00","level":"INFO","logger":"o.h.s.integration.SpatialService","thread":"main","message":"HHH80000001: hibernate-spatial integration enabled : true","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:08.4849433-03:00","level":"INFO","logger":"o.h.c.i.RegionFactoryInitiator","thread":"main","message":"HHH000026: Second-level cache disabled","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:08.58341-03:00","level":"WARN","logger":"org.hibernate.orm.deprecation","thread":"main","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:08.6006037-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:08.7766988-03:00","level":"INFO","logger":"o.s.o.j.p.SpringPersistenceUnitInfo","thread":"main","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:08.7962062-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:09.1005081-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000004: hibernate-spatial adding function contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:09.6344358-03:00","level":"INFO","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator","thread":"main","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:09.6534843-03:00","level":"INFO","logger":"o.hibernate.orm.connections.access","thread":"main","message":"HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@348247ed] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:09.6797245-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"main","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:10.1725161-03:00","level":"INFO","logger":"o.s.d.j.r.query.QueryEnhancerFactory","thread":"main","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:11.4231654-03:00","level":"WARN","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration","thread":"main","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:12.4623737-03:00","level":"INFO","logger":"o.s.b.a.e.web.EndpointLinksResolver","thread":"main","message":"Exposing 5 endpoint(s) beneath base path '/actuator'","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:12.656091-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Starting ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:12.6755006-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat started on port 52558 (http) with context path '/api'","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:12.7285508-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:52550]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-orders-service-it-consumer-1\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = orders-service-it-consumer\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:12.8472578-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:12.8472578-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:12.8472578-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758646752845","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:12.8512854-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:12.8662592-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Started DistributionCenterCachingIT in 8.155 seconds (process running for 15.481)","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.2506315-03:00","level":"WARN","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error while fetching metadata with correlation id 2 : {orders.events=LEADER_NOT_AVAILABLE}","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.2517641-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cluster ID: L9y3CNvWTtS3I05Alc5f3A","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.3705549-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Discovered group coordinator localhost:52550 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.374258-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.3927118-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: need to re-join with the given member-id: consumer-orders-service-it-consumer-1-f672fa70-6d1b-4413-9086-89506f8e7925","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.3932176-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.3932176-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.40594-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully joined group with generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-f672fa70-6d1b-4413-9086-89506f8e7925', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.409635-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Finished assignment for group at generation 1: {consumer-orders-service-it-consumer-1-f672fa70-6d1b-4413-9086-89506f8e7925=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.4278149-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT]: OrderEndToEndProcessingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.429814-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.4447998-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully synced group in generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-f672fa70-6d1b-4413-9086-89506f8e7925', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.4453224-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.4469283-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.4566725-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT]: OrderEventConsumptionIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.4582621-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.4598675-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.4748943-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:52550 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.4754257-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions assigned: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.6108735-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventPublishingIT]: OrderEventPublishingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.6118581-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventPublishingIT","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.6394781-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderFlowIT]: OrderFlowIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.6405826-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderFlowIT","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.8346763-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.8346763-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions revoked: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.8346763-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Member consumer-orders-service-it-consumer-1-f672fa70-6d1b-4413-9086-89506f8e7925 sending LeaveGroup request to coordinator localhost:52550 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.8354599-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.8354599-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.8354599-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Unsubscribed all topics or patterns and assigned partitions","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.8362099-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.8369434-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.8761998-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.8779372-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight FETCH request with correlation id 12 due to node 1 being disconnected (elapsed time since creation: 395ms, elapsed time since send: 395ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.8785484-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight FETCH request with correlation id 14 due to node 1 being disconnected (elapsed time since creation: 32ms, elapsed time since send: 32ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.8785484-03:00","level":"INFO","logger":"o.a.k.clients.FetchSessionHandler","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error sending fetch request (sessionId=INVALID, epoch=FINAL) to node 1:","exception":"org.apache.kafka.common.errors.DisconnectException: null\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.8804299-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.8804299-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.8804299-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.8833124-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"App info kafka.consumer for consumer-orders-service-it-consumer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:13.8833124-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: Consumer stopped","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:14.0236977-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"SpringApplicationShutdownHook","message":"Closing JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:14.0247051-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown initiated...","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:14.0266998-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown completed.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:22.8140494-03:00","level":"INFO","logger":"o.h.validator.internal.util.Version","thread":"background-preinit","message":"HV000001: Hibernate Validator 8.0.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:22.850543-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Starting DistributionCenterCachingIT using Java 21.0.8 with PID 14656 (started by ciror in Z:\\projects\\meli-test-mktplace)","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:22.8545423-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"The following 1 profile is active: \"integration-test\"","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:23.5549104-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:23.5549104-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:23.6479015-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 87 ms. Found 1 JPA repository interface.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:24.1462095-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:24.1477133-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data Redis repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:24.1819859-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationExtensionSupport","thread":"main","message":"Spring Data Redis - Could not safely identify store assignment for repository candidate interface br.com.ml.mktplace.orders.adapter.outbound.persistence.repository.JpaOrderEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:24.1829861-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 19 ms. Found 0 Redis repository interfaces.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:25.1596732-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat initialized with port 0 (http)","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:25.1678776-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Initializing ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:25.1688768-03:00","level":"INFO","logger":"o.a.catalina.core.StandardService","thread":"main","message":"Starting service [Tomcat]","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:25.1698769-03:00","level":"INFO","logger":"o.a.catalina.core.StandardEngine","thread":"main","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:25.2278895-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"main","message":"Initializing Spring embedded WebApplicationContext","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:25.2285809-03:00","level":"INFO","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","thread":"main","message":"Root WebApplicationContext: initialization completed in 2357 ms","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:25.5588601-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Starting...","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:25.7798446-03:00","level":"INFO","logger":"com.zaxxer.hikari.pool.HikariPool","thread":"main","message":"OrdersHikariPool - Added connection org.postgresql.jdbc.PgConnection@459fd4ac","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:25.7828399-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Start completed.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:25.9418048-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"Flyway Community Edition 9.22.3 by Redgate","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:25.9418048-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"See release notes here: https://rd.gt/416ObMi","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:25.9418048-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:25.9704838-03:00","level":"INFO","logger":"org.flywaydb.core.FlywayExecutor","thread":"main","message":"Database: jdbc:postgresql://localhost:52577/mktplace_orders (PostgreSQL 16.4)","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:25.9829101-03:00","level":"WARN","logger":"o.f.c.i.database.base.Database","thread":"main","message":"Flyway upgrade recommended: PostgreSQL 16.4 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:26.0236801-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Schema history table \"public\".\"flyway_schema_history\" does not exist yet","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:26.0283837-03:00","level":"INFO","logger":"o.f.core.internal.command.DbValidate","thread":"main","message":"Successfully validated 2 migrations (execution time 00:00.030s)","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:26.0474934-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Creating Schema History table \"public\".\"flyway_schema_history\" ...","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:26.0859559-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Current version of schema \"public\": << Empty Schema >>","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:26.0987067-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"1 - initial schema\"","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:26.1063535-03:00","level":"WARN","logger":"o.f.c.i.s.DefaultSqlScriptExecutor","thread":"main","message":"DB: extension \"postgis\" already exists, skipping (SQL State: 42710 - Error Code: 0)","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:26.153378-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"2 - sample distribution centers\"","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:26.1674713-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Successfully applied 2 migrations to schema \"public\", now at version v2 (execution time 00:00.043s)","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:26.2194255-03:00","level":"INFO","logger":"o.h.jpa.internal.util.LogHelper","thread":"main","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:26.2709489-03:00","level":"INFO","logger":"org.hibernate.Version","thread":"main","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:26.2799127-03:00","level":"INFO","logger":"o.h.s.integration.SpatialService","thread":"main","message":"HHH80000001: hibernate-spatial integration enabled : true","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:26.3073881-03:00","level":"INFO","logger":"o.h.c.i.RegionFactoryInitiator","thread":"main","message":"HHH000026: Second-level cache disabled","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:26.4046588-03:00","level":"WARN","logger":"org.hibernate.orm.deprecation","thread":"main","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:26.4234061-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:26.5951018-03:00","level":"INFO","logger":"o.s.o.j.p.SpringPersistenceUnitInfo","thread":"main","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:26.6140278-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:26.8883144-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000004: hibernate-spatial adding function contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:27.3339501-03:00","level":"INFO","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator","thread":"main","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:27.3483594-03:00","level":"INFO","logger":"o.hibernate.orm.connections.access","thread":"main","message":"HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@19701b7f] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:27.3702929-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"main","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:27.7882903-03:00","level":"INFO","logger":"o.s.d.j.r.query.QueryEnhancerFactory","thread":"main","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:28.9608328-03:00","level":"WARN","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration","thread":"main","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:29.9965112-03:00","level":"INFO","logger":"o.s.b.a.e.web.EndpointLinksResolver","thread":"main","message":"Exposing 5 endpoint(s) beneath base path '/actuator'","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:30.184385-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Starting ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:30.202414-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat started on port 52590 (http) with context path '/api'","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:30.2367488-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:52580]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-orders-service-it-consumer-1\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = orders-service-it-consumer\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:30.3549586-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:30.3549586-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:30.3549586-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758646770353","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:30.3574681-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:30.3717131-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Started DistributionCenterCachingIT in 8.036 seconds (process running for 15.656)","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:30.7327117-03:00","level":"WARN","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error while fetching metadata with correlation id 2 : {orders.events=LEADER_NOT_AVAILABLE}","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:30.7342781-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cluster ID: ZfVoMrJKQw-QT0S9UuW4wQ","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:30.9562247-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT]: OrderEndToEndProcessingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:30.9582226-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:30.9663225-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Discovered group coordinator localhost:52580 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:30.9717914-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:30.9828545-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT]: OrderEventConsumptionIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:30.9844252-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.0003326-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: need to re-join with the given member-id: consumer-orders-service-it-consumer-1-f477bc02-af37-4247-8f10-2e1a752126c5","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.0008571-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.0008571-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.0164211-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully joined group with generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-f477bc02-af37-4247-8f10-2e1a752126c5', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.0202865-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Finished assignment for group at generation 1: {consumer-orders-service-it-consumer-1-f477bc02-af37-4247-8f10-2e1a752126c5=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.0555783-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully synced group in generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-f477bc02-af37-4247-8f10-2e1a752126c5', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.0560833-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.0580877-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.0681013-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.081348-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:52580 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.082882-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions assigned: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.1683287-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventPublishingIT]: OrderEventPublishingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.1703336-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventPublishingIT","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.1999564-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderFlowIT]: OrderFlowIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.2009622-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderFlowIT","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.4038502-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 2147483646 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.4063411-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.4073467-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight FETCH request with correlation id 14 due to node 1 being disconnected (elapsed time since creation: 319ms, elapsed time since send: 319ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.4073467-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight METADATA request with correlation id 15 due to node 1 being disconnected (elapsed time since creation: 283ms, elapsed time since send: 283ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.4073467-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.407901-03:00","level":"INFO","logger":"o.a.k.clients.FetchSessionHandler","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error sending fetch request (sessionId=INVALID, epoch=INITIAL) to node 1:","exception":"org.apache.kafka.common.errors.DisconnectException: null\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.4090728-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Group coordinator localhost:52580 (id: 2147483646 rack: null) is unavailable or invalid due to cause: coordinator unavailable. isDisconnected: true. Rediscovery will be attempted.","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.410165-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.410165-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions revoked: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.410165-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.4107279-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.4107279-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Unsubscribed all topics or patterns and assigned partitions","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.4113847-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.4113847-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.4120804-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.4120804-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.4120804-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.4145406-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"App info kafka.consumer for consumer-orders-service-it-consumer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.4150475-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: Consumer stopped","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.5433702-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"SpringApplicationShutdownHook","message":"Closing JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.544357-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown initiated...","service":"orders-service"}
{"timestamp":"2025-09-23T13:59:31.5459344-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown completed.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:39.0590526-03:00","level":"INFO","logger":"o.h.validator.internal.util.Version","thread":"background-preinit","message":"HV000001: Hibernate Validator 8.0.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:39.097237-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Starting DistributionCenterCachingIT using Java 21.0.8 with PID 29724 (started by ciror in Z:\\projects\\meli-test-mktplace)","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:39.097237-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"The following 1 profile is active: \"integration-test\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:39.6816897-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:39.6826984-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:39.7820225-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 94 ms. Found 1 JPA repository interface.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:40.236517-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:40.2385176-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data Redis repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:40.2627468-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationExtensionSupport","thread":"main","message":"Spring Data Redis - Could not safely identify store assignment for repository candidate interface br.com.ml.mktplace.orders.adapter.outbound.persistence.repository.JpaOrderEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:40.2627468-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:41.2155949-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat initialized with port 0 (http)","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:41.2310045-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Initializing ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:41.2320057-03:00","level":"INFO","logger":"o.a.catalina.core.StandardService","thread":"main","message":"Starting service [Tomcat]","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:41.2330044-03:00","level":"INFO","logger":"o.a.catalina.core.StandardEngine","thread":"main","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:41.2964003-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"main","message":"Initializing Spring embedded WebApplicationContext","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:41.2974002-03:00","level":"INFO","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","thread":"main","message":"Root WebApplicationContext: initialization completed in 2184 ms","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:41.6393679-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Starting...","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:41.8262586-03:00","level":"INFO","logger":"com.zaxxer.hikari.pool.HikariPool","thread":"main","message":"OrdersHikariPool - Added connection org.postgresql.jdbc.PgConnection@12a1a7b2","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:41.8280329-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Start completed.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:41.94649-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"Flyway Community Edition 9.22.3 by Redgate","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:41.94649-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"See release notes here: https://rd.gt/416ObMi","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:41.9470106-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:41.9683345-03:00","level":"INFO","logger":"org.flywaydb.core.FlywayExecutor","thread":"main","message":"Database: jdbc:postgresql://localhost:52657/mktplace_orders (PostgreSQL 16.4)","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:41.9784674-03:00","level":"WARN","logger":"o.f.c.i.database.base.Database","thread":"main","message":"Flyway upgrade recommended: PostgreSQL 16.4 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:42.0165443-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Schema history table \"public\".\"flyway_schema_history\" does not exist yet","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:42.0225299-03:00","level":"INFO","logger":"o.f.core.internal.command.DbValidate","thread":"main","message":"Successfully validated 2 migrations (execution time 00:00.029s)","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:42.0412133-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Creating Schema History table \"public\".\"flyway_schema_history\" ...","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:42.0785424-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Current version of schema \"public\": << Empty Schema >>","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:42.0898639-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"1 - initial schema\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:42.0972517-03:00","level":"WARN","logger":"o.f.c.i.s.DefaultSqlScriptExecutor","thread":"main","message":"DB: extension \"postgis\" already exists, skipping (SQL State: 42710 - Error Code: 0)","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:42.1438405-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"2 - sample distribution centers\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:42.1642639-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Successfully applied 2 migrations to schema \"public\", now at version v2 (execution time 00:00.041s)","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:42.2279647-03:00","level":"INFO","logger":"o.h.jpa.internal.util.LogHelper","thread":"main","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:42.2785578-03:00","level":"INFO","logger":"org.hibernate.Version","thread":"main","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:42.2867287-03:00","level":"INFO","logger":"o.h.s.integration.SpatialService","thread":"main","message":"HHH80000001: hibernate-spatial integration enabled : true","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:42.3127842-03:00","level":"INFO","logger":"o.h.c.i.RegionFactoryInitiator","thread":"main","message":"HHH000026: Second-level cache disabled","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:42.4077402-03:00","level":"WARN","logger":"org.hibernate.orm.deprecation","thread":"main","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:42.4254765-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:42.5987868-03:00","level":"INFO","logger":"o.s.o.j.p.SpringPersistenceUnitInfo","thread":"main","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:42.6165575-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:42.9207986-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000004: hibernate-spatial adding function contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:43.4383704-03:00","level":"INFO","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator","thread":"main","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:43.4533876-03:00","level":"INFO","logger":"o.hibernate.orm.connections.access","thread":"main","message":"HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@1d72edfd] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:43.4766643-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"main","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:43.8698755-03:00","level":"INFO","logger":"o.s.d.j.r.query.QueryEnhancerFactory","thread":"main","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:45.0638522-03:00","level":"WARN","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration","thread":"main","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:46.0964008-03:00","level":"INFO","logger":"o.s.b.a.e.web.EndpointLinksResolver","thread":"main","message":"Exposing 5 endpoint(s) beneath base path '/actuator'","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:46.1776421-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Starting ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:46.1906729-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat started on port 52670 (http) with context path '/api'","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:46.2414151-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:52660]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-orders-service-it-consumer-1\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = orders-service-it-consumer\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:46.3503272-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:46.3503272-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:46.3503272-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758646906349","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:46.354314-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:46.368326-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Started DistributionCenterCachingIT in 7.78 seconds (process running for 15.441)","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:46.7648104-03:00","level":"WARN","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error while fetching metadata with correlation id 2 : {orders.events=LEADER_NOT_AVAILABLE}","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:46.766432-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cluster ID: WNbaoRZnQj2JTnHoYVUb4A","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:46.8873453-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Discovered group coordinator localhost:52660 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:46.8906918-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:46.9075261-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: need to re-join with the given member-id: consumer-orders-service-it-consumer-1-a9452002-9a17-4981-84b0-b703ee8ac86f","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:46.9082057-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:46.9082057-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:46.9211405-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully joined group with generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-a9452002-9a17-4981-84b0-b703ee8ac86f', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:46.9247132-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Finished assignment for group at generation 1: {consumer-orders-service-it-consumer-1-a9452002-9a17-4981-84b0-b703ee8ac86f=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:46.9577791-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully synced group in generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-a9452002-9a17-4981-84b0-b703ee8ac86f', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:46.9577791-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:46.9597836-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:46.9720587-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:46.9888008-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:52660 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:46.9898419-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions assigned: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:47.6773767-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"http-nio-auto-1-exec-1","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:47.6783727-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-1","message":"Initializing Servlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:47.6792918-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-1","message":"Completed initialization in 1 ms","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:47.7962957-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"3f2136d5-9371-4461-a02a-ea185d1652b4","message":"Processing new order request - Correlation ID: d2d353cb-2fc2-48bc-b7de-31bbf21b12f8, Customer: customer-cache, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.185786-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"3f2136d5-9371-4461-a02a-ea185d1652b4","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.185786-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"3f2136d5-9371-4461-a02a-ea185d1652b4","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.1954987-03:00","level":"INFO","logger":"o.a.k.c.producer.ProducerConfig","thread":"http-nio-auto-1-exec-1","correlationId":"3f2136d5-9371-4461-a02a-ea185d1652b4","message":"ProducerConfig values: \r\n\tacks = -1\r\n\tauto.include.jmx.reporter = true\r\n\tbatch.size = 16384\r\n\tbootstrap.servers = [PLAINTEXT://localhost:52660]\r\n\tbuffer.memory = 33554432\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = orders-service-producer-1\r\n\tcompression.type = snappy\r\n\tconnections.max.idle.ms = 540000\r\n\tdelivery.timeout.ms = 120000\r\n\tenable.idempotence = true\r\n\tinterceptor.classes = []\r\n\tkey.serializer = class org.apache.kafka.common.serialization.StringSerializer\r\n\tlinger.ms = 10\r\n\tmax.block.ms = 60000\r\n\tmax.in.flight.requests.per.connection = 5\r\n\tmax.request.size = 1048576\r\n\tmetadata.max.age.ms = 300000\r\n\tmetadata.max.idle.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartitioner.adaptive.partitioning.enable = true\r\n\tpartitioner.availability.timeout.ms = 0\r\n\tpartitioner.class = null\r\n\tpartitioner.ignore.keys = false\r\n\treceive.buffer.bytes = 32768\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretries = 3\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\ttransaction.timeout.ms = 60000\r\n\ttransactional.id = null\r\n\tvalue.serializer = class org.springframework.kafka.support.serializer.JsonSerializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.2062709-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"http-nio-auto-1-exec-1","correlationId":"3f2136d5-9371-4461-a02a-ea185d1652b4","message":"[Producer clientId=orders-service-producer-1] Instantiated an idempotent producer.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.2199605-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"3f2136d5-9371-4461-a02a-ea185d1652b4","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.2199605-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"3f2136d5-9371-4461-a02a-ea185d1652b4","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.2199605-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"3f2136d5-9371-4461-a02a-ea185d1652b4","message":"Kafka startTimeMs: 1758646908219","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.2304635-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cluster ID: WNbaoRZnQj2JTnHoYVUb4A","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.2434827-03:00","level":"INFO","logger":"o.a.k.c.p.i.TransactionManager","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] ProducerId set to 0 with epoch 0","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.4086743-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"3f2136d5-9371-4461-a02a-ea185d1652b4","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRCCX0N5J5T5M56FC6SV89","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.461654-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRCCX0N5J5T5M56FC6SV89","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.6916762-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-1","correlationId":"3f2136d5-9371-4461-a02a-ea185d1652b4","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1805)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1736)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1538)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1518)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1478)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1515)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1199)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1006)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:194)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:143)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:104)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:393)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:174)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\tat io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:350)\r\n\tat io.lettuce.core.RedisClient.connect(RedisClient.java:215)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1734)\r\n\t... 88 common frames omitted\r\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)\r\n\tat io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)\r\n\tat io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)\r\n\tat io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)\r\n\tat io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745)\r\n\tat io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680)\r\n\tat io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.6964179-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1805)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1736)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1538)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1518)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1478)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1515)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1199)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1006)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:194)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:143)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:104)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:393)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:174)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\tat io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:350)\r\n\tat io.lettuce.core.RedisClient.connect(RedisClient.java:215)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1734)\r\n\t... 54 common frames omitted\r\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)\r\n\tat io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)\r\n\tat io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)\r\n\tat io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)\r\n\tat io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745)\r\n\tat io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680)\r\n\tat io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.7259516-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.h.HttpDistributionCenterService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to fetch all distribution centers","exception":"org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.7259516-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.h.HttpDistributionCenterService","thread":"http-nio-auto-1-exec-1","correlationId":"3f2136d5-9371-4461-a02a-ea185d1652b4","message":"Failed to fetch all distribution centers","exception":"org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.7298599-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.failed - Event: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.7298599-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"3f2136d5-9371-4461-a02a-ea185d1652b4","message":"Publishing event to topic: order.failed - Event: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.7298599-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"3f2136d5-9371-4461-a02a-ea185d1652b4","message":"Event published successfully: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.7298599-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.7304546-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRCCX0N5J5T5M56FC6SV89","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.7304546-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"3f2136d5-9371-4461-a02a-ea185d1652b4","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRCCX0N5J5T5M56FC6SV89","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.7332214-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRCCX0N5J5T5M56FC6SV89 from event: Failed to process order [01K5VRCCX0N5J5T5M56FC6SV89]: Distribution center service unavailable","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRCCX0N5J5T5M56FC6SV89]: Distribution center service unavailable\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:165)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: br.com.ml.mktplace.orders.domain.model.ExternalServiceException: External service error [DistributionCenterService]: Failed to fetch all distribution centers\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:125)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\t... 38 common frames omitted\r\nCaused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\t... 40 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.7332214-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"3f2136d5-9371-4461-a02a-ea185d1652b4","message":"Failed to process order - Correlation ID: d2d353cb-2fc2-48bc-b7de-31bbf21b12f8","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRCCX0N5J5T5M56FC6SV89]: Distribution center service unavailable\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:165)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: br.com.ml.mktplace.orders.domain.model.ExternalServiceException: External service error [DistributionCenterService]: Failed to fetch all distribution centers\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:125)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\t... 72 common frames omitted\r\nCaused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\t... 74 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.7362857-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.r.h.GlobalExceptionHandler","thread":"http-nio-auto-1-exec-1","correlationId":"3f2136d5-9371-4461-a02a-ea185d1652b4","message":"Order processing error - Correlation ID: cfd0c501-c6b4-4b79-a4e4-e5b9fef85be5, Order ID: 01K5VRCCX0N5J5T5M56FC6SV89, Message: Failed to process order [01K5VRCCX0N5J5T5M56FC6SV89]: Distribution center service unavailable","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRCCX0N5J5T5M56FC6SV89]: Distribution center service unavailable\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:165)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: br.com.ml.mktplace.orders.domain.model.ExternalServiceException: External service error [DistributionCenterService]: Failed to fetch all distribution centers\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:125)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\t... 72 common frames omitted\r\nCaused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\t... 74 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.8398723-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT]: OrderEndToEndProcessingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.8418713-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.8827936-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"41c7a181-099b-491b-aa28-9c5149c1184d","message":"Processing new order request - Correlation ID: 41c7a181-099b-491b-aa28-9c5149c1184d, Customer: customer-async-proc, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.8893763-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"41c7a181-099b-491b-aa28-9c5149c1184d","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.8899576-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"41c7a181-099b-491b-aa28-9c5149c1184d","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.8899576-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"41c7a181-099b-491b-aa28-9c5149c1184d","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRCDYKJB3FQTQYGXERRDGB","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.9025146-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-2","correlationId":"41c7a181-099b-491b-aa28-9c5149c1184d","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1805)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1736)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1538)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1518)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1478)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1515)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1199)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1006)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:194)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:143)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:104)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:393)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:174)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\tat io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:350)\r\n\tat io.lettuce.core.RedisClient.connect(RedisClient.java:215)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1734)\r\n\t... 88 common frames omitted\r\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)\r\n\tat io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)\r\n\tat io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)\r\n\tat io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)\r\n\tat io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745)\r\n\tat io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680)\r\n\tat io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.9142689-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRCDYKJB3FQTQYGXERRDGB","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.9179625-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-2","correlationId":"41c7a181-099b-491b-aa28-9c5149c1184d","message":"Failed to cache value for key: distribution-centers:SP","exception":"org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1805)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1736)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1538)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1518)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1478)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1515)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1199)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1006)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:194)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:143)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:104)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:393)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:253)\r\n\tat org.springframework.data.redis.core.ValueOperations.set(ValueOperations.java:75)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.put(RedisCacheService.java:93)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:184)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\tat io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:350)\r\n\tat io.lettuce.core.RedisClient.connect(RedisClient.java:215)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1734)\r\n\t... 89 common frames omitted\r\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)\r\n\tat io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)\r\n\tat io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)\r\n\tat io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)\r\n\tat io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745)\r\n\tat io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680)\r\n\tat io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.9200484-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-2","correlationId":"41c7a181-099b-491b-aa28-9c5149c1184d","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.9200484-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-2","correlationId":"41c7a181-099b-491b-aa28-9c5149c1184d","message":"CD selecionado para item ASYNC-PROC-1 pedido 01K5VRCDYKJB3FQTQYGXERRDGB -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.9231947-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"41c7a181-099b-491b-aa28-9c5149c1184d","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.9231947-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"41c7a181-099b-491b-aa28-9c5149c1184d","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.9237268-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"41c7a181-099b-491b-aa28-9c5149c1184d","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRCDYKJB3FQTQYGXERRDGB","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.9237268-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1805)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1736)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1538)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1518)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1478)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1515)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1199)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1006)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:194)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:143)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:104)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:393)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:174)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\tat io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:350)\r\n\tat io.lettuce.core.RedisClient.connect(RedisClient.java:215)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1734)\r\n\t... 54 common frames omitted\r\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)\r\n\tat io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)\r\n\tat io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)\r\n\tat io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)\r\n\tat io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745)\r\n\tat io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680)\r\n\tat io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.9312001-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to cache value for key: distribution-centers:SP","exception":"org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1805)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1736)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1538)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1518)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1478)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1515)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1199)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1006)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:194)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:143)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:104)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:393)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:253)\r\n\tat org.springframework.data.redis.core.ValueOperations.set(ValueOperations.java:75)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.put(RedisCacheService.java:93)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:184)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\tat io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:350)\r\n\tat io.lettuce.core.RedisClient.connect(RedisClient.java:215)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1734)\r\n\t... 55 common frames omitted\r\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)\r\n\tat io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)\r\n\tat io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)\r\n\tat io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)\r\n\tat io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745)\r\n\tat io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680)\r\n\tat io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.9322446-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.9322446-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item ASYNC-PROC-1 pedido 01K5VRCDYKJB3FQTQYGXERRDGB -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.9348569-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.9348569-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.9353807-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRCDYKJB3FQTQYGXERRDGB","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.9374751-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"41c7a181-099b-491b-aa28-9c5149c1184d","message":"Order processed successfully - ID: 01K5VRCDYKJB3FQTQYGXERRDGB, Status: PROCESSED, Correlation ID: 41c7a181-099b-491b-aa28-9c5149c1184d","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.9411706-03:00","level":"INFO","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100503: On release of batch it still contained JDBC statements","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.9416901-03:00","level":"ERROR","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100501: Exception executing batch [org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?], SQL: delete from order_items where id=?","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.9448732-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRCDYKJB3FQTQYGXERRDGB from event: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?","exception":"org.springframework.orm.ObjectOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:328)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:565)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:669)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:419)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:67)\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:54)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.checkRowCounts(BatchImpl.java:314)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:278)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.PreparedStatementGroupSingleTable.forEachStatement(PreparedStatementGroupSingleTable.java:59)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.performExecution(BatchImpl.java:260)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.execute(BatchImpl.java:239)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.executeBatch(JdbcCoordinatorImpl.java:188)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:659)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1415)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:496)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2325)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1988)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:561)\r\n\t... 31 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.9475412-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-3","correlationId":"5e8394b3-ca1e-418c-b63f-32c4a01ce8cf","message":"Fetching order by ID: 01K5VRCDYKJB3FQTQYGXERRDGB - Correlation ID: db8f79c0-b8f3-4ac9-8cbe-bb89701c2a83","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.9626474-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-3","correlationId":"5e8394b3-ca1e-418c-b63f-32c4a01ce8cf","message":"Order retrieved successfully - ID: 01K5VRCDYKJB3FQTQYGXERRDGB, Status: PROCESSED, Correlation ID: db8f79c0-b8f3-4ac9-8cbe-bb89701c2a83","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.9886474-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT]: OrderEventConsumptionIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:48.9911528-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0342857-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-9","correlationId":"b396068c-89a0-4e7b-8c61-5b3686db591c","message":"Processing new order request - Correlation ID: e34cf4d7-a1e4-4946-95cc-52a6de7c0070, Customer: customer-event-consumer, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.04058-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-9","correlationId":"b396068c-89a0-4e7b-8c61-5b3686db591c","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0411925-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-9","correlationId":"b396068c-89a0-4e7b-8c61-5b3686db591c","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0411925-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-9","correlationId":"b396068c-89a0-4e7b-8c61-5b3686db591c","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRCE3AAFAQ9GAEXYPYQJ32","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0510596-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-9","correlationId":"b396068c-89a0-4e7b-8c61-5b3686db591c","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1805)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1736)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1538)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1518)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1478)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1515)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1199)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1006)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:194)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:143)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:104)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:393)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:174)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\tat io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:350)\r\n\tat io.lettuce.core.RedisClient.connect(RedisClient.java:215)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1734)\r\n\t... 88 common frames omitted\r\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)\r\n\tat io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)\r\n\tat io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)\r\n\tat io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)\r\n\tat io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745)\r\n\tat io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680)\r\n\tat io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0574718-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-9","correlationId":"b396068c-89a0-4e7b-8c61-5b3686db591c","message":"Failed to cache value for key: distribution-centers:SP","exception":"org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1805)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1736)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1538)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1518)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1478)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1515)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1199)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1006)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:194)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:143)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:104)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:393)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:253)\r\n\tat org.springframework.data.redis.core.ValueOperations.set(ValueOperations.java:75)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.put(RedisCacheService.java:93)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:184)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\tat io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:350)\r\n\tat io.lettuce.core.RedisClient.connect(RedisClient.java:215)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1734)\r\n\t... 89 common frames omitted\r\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)\r\n\tat io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)\r\n\tat io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)\r\n\tat io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)\r\n\tat io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745)\r\n\tat io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680)\r\n\tat io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0579809-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-9","correlationId":"b396068c-89a0-4e7b-8c61-5b3686db591c","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0579809-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-9","correlationId":"b396068c-89a0-4e7b-8c61-5b3686db591c","message":"CD selecionado para item EVT-CONSUME-1 pedido 01K5VRCE3AAFAQ9GAEXYPYQJ32 -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0609376-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-9","correlationId":"b396068c-89a0-4e7b-8c61-5b3686db591c","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0615213-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-9","correlationId":"b396068c-89a0-4e7b-8c61-5b3686db591c","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0615213-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-9","correlationId":"b396068c-89a0-4e7b-8c61-5b3686db591c","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRCE3AAFAQ9GAEXYPYQJ32","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0650109-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-9","correlationId":"b396068c-89a0-4e7b-8c61-5b3686db591c","message":"Order processed successfully - ID: 01K5VRCE3AAFAQ9GAEXYPYQJ32, Status: PROCESSED, Correlation ID: e34cf4d7-a1e4-4946-95cc-52a6de7c0070","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0675659-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:52660]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab-2\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0675659-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRCE3AAFAQ9GAEXYPYQJ32","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0706336-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0711868-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0711868-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758646909070","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.072352-03:00","level":"INFO","logger":"o.a.k.clients.consumer.KafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab-2, groupId=order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.072352-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRCE3AAFAQ9GAEXYPYQJ32 from event: Failed to process order [01K5VRCE3AAFAQ9GAEXYPYQJ32]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRCE3AAFAQ9GAEXYPYQJ32]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0766256-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab-2, groupId=order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab] Cluster ID: WNbaoRZnQj2JTnHoYVUb4A","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0771454-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab-2, groupId=order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab] Discovered group coordinator localhost:52660 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.078363-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab-2, groupId=order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0810754-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab-2, groupId=order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab] Request joining group due to: need to re-join with the given member-id: consumer-order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab-2-fc223709-d76e-4fce-b1b0-6d0c1594b8c1","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0810754-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab-2, groupId=order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0810754-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab-2, groupId=order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0848054-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab-2, groupId=order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab] Successfully joined group with generation Generation{generationId=1, memberId='consumer-order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab-2-fc223709-d76e-4fce-b1b0-6d0c1594b8c1', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0853177-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab-2, groupId=order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab] Finished assignment for group at generation 1: {consumer-order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab-2-fc223709-d76e-4fce-b1b0-6d0c1594b8c1=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0886028-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab-2, groupId=order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab] Successfully synced group in generation Generation{generationId=1, memberId='consumer-order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab-2-fc223709-d76e-4fce-b1b0-6d0c1594b8c1', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0886028-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab-2, groupId=order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.089129-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab-2, groupId=order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0901756-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab-2, groupId=order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.0944947-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab-2, groupId=order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:52660 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.1087621-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab-2, groupId=order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.1087621-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab-2, groupId=order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab] Member consumer-order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab-2-fc223709-d76e-4fce-b1b0-6d0c1594b8c1 sending LeaveGroup request to coordinator localhost:52660 (id: 2147483646 rack: null) due to the consumer is being closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.1099782-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab-2, groupId=order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.1099782-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab-2, groupId=order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.5646142-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.5646142-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.5652107-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.5664301-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"App info kafka.consumer for consumer-order-events-test-group-d8c90e3a-5144-4553-b239-9669626352ab-2 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.5756565-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventPublishingIT]: OrderEventPublishingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.5767705-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventPublishingIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.6161574-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"da11c9fb-12c8-4eba-800d-ceed800730f7","message":"Processing new order request - Correlation ID: 189bce9c-e99b-4f9b-a375-d3cd4e13f519, Customer: customer-events, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.6237994-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"da11c9fb-12c8-4eba-800d-ceed800730f7","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.6237994-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"da11c9fb-12c8-4eba-800d-ceed800730f7","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.6243101-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"da11c9fb-12c8-4eba-800d-ceed800730f7","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRCENG5PCX4T82QYD8VPBY","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.6345818-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-5","correlationId":"da11c9fb-12c8-4eba-800d-ceed800730f7","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1805)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1736)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1538)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1518)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1478)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1515)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1199)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1006)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:194)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:143)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:104)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:393)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:174)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\tat io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:350)\r\n\tat io.lettuce.core.RedisClient.connect(RedisClient.java:215)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1734)\r\n\t... 88 common frames omitted\r\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)\r\n\tat io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)\r\n\tat io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)\r\n\tat io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)\r\n\tat io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745)\r\n\tat io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680)\r\n\tat io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.6404717-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-5","correlationId":"da11c9fb-12c8-4eba-800d-ceed800730f7","message":"Failed to cache value for key: distribution-centers:SP","exception":"org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1805)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1736)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1538)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1518)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1478)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1515)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1199)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1006)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:194)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:143)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:104)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:393)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:253)\r\n\tat org.springframework.data.redis.core.ValueOperations.set(ValueOperations.java:75)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.put(RedisCacheService.java:93)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:184)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\tat io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:350)\r\n\tat io.lettuce.core.RedisClient.connect(RedisClient.java:215)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1734)\r\n\t... 89 common frames omitted\r\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)\r\n\tat io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)\r\n\tat io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)\r\n\tat io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)\r\n\tat io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745)\r\n\tat io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680)\r\n\tat io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.6410599-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-5","correlationId":"da11c9fb-12c8-4eba-800d-ceed800730f7","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.6410599-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-5","correlationId":"da11c9fb-12c8-4eba-800d-ceed800730f7","message":"CD selecionado para item EVT123 pedido 01K5VRCENG5PCX4T82QYD8VPBY -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.6439974-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"da11c9fb-12c8-4eba-800d-ceed800730f7","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.6445809-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"da11c9fb-12c8-4eba-800d-ceed800730f7","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.6445809-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"da11c9fb-12c8-4eba-800d-ceed800730f7","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRCENG5PCX4T82QYD8VPBY","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.6488017-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"da11c9fb-12c8-4eba-800d-ceed800730f7","message":"Order processed successfully - ID: 01K5VRCENG5PCX4T82QYD8VPBY, Status: PROCESSED, Correlation ID: 189bce9c-e99b-4f9b-a375-d3cd4e13f519","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.6493835-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRCENG5PCX4T82QYD8VPBY","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.6530187-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderFlowIT]: OrderFlowIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.6541267-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderFlowIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.654643-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRCENG5PCX4T82QYD8VPBY from event: Failed to process order [01K5VRCENG5PCX4T82QYD8VPBY]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRCENG5PCX4T82QYD8VPBY]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.6928982-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"8038fdd0-03d5-4032-b922-48e69b941566","message":"Processing new order request - Correlation ID: 8038fdd0-03d5-4032-b922-48e69b941566, Customer: customer-1, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.7000488-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"8038fdd0-03d5-4032-b922-48e69b941566","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.7000488-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"8038fdd0-03d5-4032-b922-48e69b941566","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.7006057-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"8038fdd0-03d5-4032-b922-48e69b941566","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRCEQXXAQ22R6H8M8P7PJW","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.7100359-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-6","correlationId":"8038fdd0-03d5-4032-b922-48e69b941566","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1805)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1736)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1538)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1518)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1478)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1515)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1199)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1006)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:194)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:143)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:104)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:393)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:174)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\tat io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:350)\r\n\tat io.lettuce.core.RedisClient.connect(RedisClient.java:215)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1734)\r\n\t... 88 common frames omitted\r\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)\r\n\tat io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)\r\n\tat io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)\r\n\tat io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)\r\n\tat io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745)\r\n\tat io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680)\r\n\tat io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.715457-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-6","correlationId":"8038fdd0-03d5-4032-b922-48e69b941566","message":"Failed to cache value for key: distribution-centers:SP","exception":"org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1805)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1736)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1538)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1518)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1478)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1515)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1199)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1006)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:194)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:143)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:104)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:393)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:253)\r\n\tat org.springframework.data.redis.core.ValueOperations.set(ValueOperations.java:75)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.put(RedisCacheService.java:93)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:184)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\tat io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:350)\r\n\tat io.lettuce.core.RedisClient.connect(RedisClient.java:215)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1734)\r\n\t... 89 common frames omitted\r\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)\r\n\tat io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)\r\n\tat io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)\r\n\tat io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)\r\n\tat io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745)\r\n\tat io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680)\r\n\tat io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.7160603-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-6","correlationId":"8038fdd0-03d5-4032-b922-48e69b941566","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.7160603-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-6","correlationId":"8038fdd0-03d5-4032-b922-48e69b941566","message":"CD selecionado para item ABC123 pedido 01K5VRCEQXXAQ22R6H8M8P7PJW -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.7192933-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"8038fdd0-03d5-4032-b922-48e69b941566","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.7192933-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"8038fdd0-03d5-4032-b922-48e69b941566","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.7192933-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"8038fdd0-03d5-4032-b922-48e69b941566","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRCEQXXAQ22R6H8M8P7PJW","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.7239567-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"8038fdd0-03d5-4032-b922-48e69b941566","message":"Order processed successfully - ID: 01K5VRCEQXXAQ22R6H8M8P7PJW, Status: PROCESSED, Correlation ID: 8038fdd0-03d5-4032-b922-48e69b941566","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.7256781-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRCEQXXAQ22R6H8M8P7PJW","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.7267943-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"29abc8c2-e105-4df4-9a93-cd3a2473aada","message":"Fetching order by ID: 01K5VRCEQXXAQ22R6H8M8P7PJW - Correlation ID: 4874b0f9-c5f5-4dc9-b104-2567ca96f9e3","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.7300263-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRCEQXXAQ22R6H8M8P7PJW from event: Failed to process order [01K5VRCEQXXAQ22R6H8M8P7PJW]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRCEQXXAQ22R6H8M8P7PJW]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.7311733-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"29abc8c2-e105-4df4-9a93-cd3a2473aada","message":"Order retrieved successfully - ID: 01K5VRCEQXXAQ22R6H8M8P7PJW, Status: PROCESSED, Correlation ID: 4874b0f9-c5f5-4dc9-b104-2567ca96f9e3","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.8034885-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 2147483646 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.8034885-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.9533233-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.9533233-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.9548283-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cancelled in-flight METADATA request with correlation id 12 due to node 1 being disconnected (elapsed time since creation: 0ms, elapsed time since send: 0ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.9548283-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight FETCH request with correlation id 24 due to node 1 being disconnected (elapsed time since creation: 228ms, elapsed time since send: 228ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.9548283-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight METADATA request with correlation id 25 due to node 1 being disconnected (elapsed time since creation: 201ms, elapsed time since send: 201ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.9548283-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.9554362-03:00","level":"INFO","logger":"o.a.k.clients.FetchSessionHandler","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error sending fetch request (sessionId=27333025, epoch=12) to node 1:","exception":"org.apache.kafka.common.errors.DisconnectException: null\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.9575113-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.9580549-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions revoked: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.9580549-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Member consumer-orders-service-it-consumer-1-a9452002-9a17-4981-84b0-b703ee8ac86f sending LeaveGroup request to coordinator localhost:52660 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.9586209-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 2147483646 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.9586209-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight API_VERSIONS request with correlation id 27 due to node 2147483646 being disconnected (elapsed time since creation: 2ms, elapsed time since send: 2ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.9586209-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Group coordinator localhost:52660 (id: 2147483646 rack: null) is unavailable or invalid due to cause: null. isDisconnected: true. Rediscovery will be attempted.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.9586209-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.9586209-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.9586209-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Unsubscribed all topics or patterns and assigned partitions","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.9592605-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.9592605-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.9592605-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.9592605-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.9592605-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.959891-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"App info kafka.consumer for consumer-orders-service-it-consumer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:49.9604584-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: Consumer stopped","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:50.0556995-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:50.0564482-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cancelled in-flight API_VERSIONS request with correlation id 13 due to node 1 being disconnected (elapsed time since creation: 1ms, elapsed time since send: 1ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:50.0756617-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"SpringApplicationShutdownHook","message":"[Producer clientId=orders-service-producer-1] Closing the Kafka producer with timeoutMillis = 30000 ms.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:50.0766676-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:50.0766676-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:50.0766676-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:50.0776661-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"SpringApplicationShutdownHook","message":"App info kafka.producer for orders-service-producer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:50.0847234-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"SpringApplicationShutdownHook","message":"Closing JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:50.0859602-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown initiated...","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:50.0871882-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown completed.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:58.7641166-03:00","level":"INFO","logger":"o.h.validator.internal.util.Version","thread":"background-preinit","message":"HV000001: Hibernate Validator 8.0.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:58.812355-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Starting DistributionCenterCachingIT using Java 21.0.8 with PID 4768 (started by ciror in Z:\\projects\\meli-test-mktplace)","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:58.8133549-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"The following 1 profile is active: \"integration-test\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:59.4027581-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:59.4037622-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:59.5027656-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 92 ms. Found 1 JPA repository interface.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:59.9535547-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:59.9545549-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data Redis repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:59.9832339-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationExtensionSupport","thread":"main","message":"Spring Data Redis - Could not safely identify store assignment for repository candidate interface br.com.ml.mktplace.orders.adapter.outbound.persistence.repository.JpaOrderEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository","service":"orders-service"}
{"timestamp":"2025-09-23T14:01:59.9832339-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 18 ms. Found 0 Redis repository interfaces.","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:00.9506499-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat initialized with port 0 (http)","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:00.9603474-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Initializing ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:00.962346-03:00","level":"INFO","logger":"o.a.catalina.core.StandardService","thread":"main","message":"Starting service [Tomcat]","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:00.962346-03:00","level":"INFO","logger":"o.a.catalina.core.StandardEngine","thread":"main","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:01.0222332-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"main","message":"Initializing Spring embedded WebApplicationContext","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:01.0232337-03:00","level":"INFO","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","thread":"main","message":"Root WebApplicationContext: initialization completed in 2190 ms","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:01.370651-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Starting...","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:01.5709351-03:00","level":"INFO","logger":"com.zaxxer.hikari.pool.HikariPool","thread":"main","message":"OrdersHikariPool - Added connection org.postgresql.jdbc.PgConnection@5c455d42","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:01.5736166-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Start completed.","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:01.7250272-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"Flyway Community Edition 9.22.3 by Redgate","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:01.7255754-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"See release notes here: https://rd.gt/416ObMi","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:01.7255754-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:01.7536185-03:00","level":"INFO","logger":"org.flywaydb.core.FlywayExecutor","thread":"main","message":"Database: jdbc:postgresql://localhost:52716/mktplace_orders (PostgreSQL 16.4)","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:01.7650763-03:00","level":"WARN","logger":"o.f.c.i.database.base.Database","thread":"main","message":"Flyway upgrade recommended: PostgreSQL 16.4 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:01.8118966-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Schema history table \"public\".\"flyway_schema_history\" does not exist yet","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:01.8167259-03:00","level":"INFO","logger":"o.f.core.internal.command.DbValidate","thread":"main","message":"Successfully validated 2 migrations (execution time 00:00.035s)","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:01.8371207-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Creating Schema History table \"public\".\"flyway_schema_history\" ...","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:01.8760797-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Current version of schema \"public\": << Empty Schema >>","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:01.8883955-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"1 - initial schema\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:01.8949526-03:00","level":"WARN","logger":"o.f.c.i.s.DefaultSqlScriptExecutor","thread":"main","message":"DB: extension \"postgis\" already exists, skipping (SQL State: 42710 - Error Code: 0)","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:01.946984-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"2 - sample distribution centers\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:01.9730257-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Successfully applied 2 migrations to schema \"public\", now at version v2 (execution time 00:00.044s)","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:02.0454133-03:00","level":"INFO","logger":"o.h.jpa.internal.util.LogHelper","thread":"main","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:02.1076792-03:00","level":"INFO","logger":"org.hibernate.Version","thread":"main","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:02.1183796-03:00","level":"INFO","logger":"o.h.s.integration.SpatialService","thread":"main","message":"HHH80000001: hibernate-spatial integration enabled : true","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:02.1472148-03:00","level":"INFO","logger":"o.h.c.i.RegionFactoryInitiator","thread":"main","message":"HHH000026: Second-level cache disabled","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:02.2635949-03:00","level":"WARN","logger":"org.hibernate.orm.deprecation","thread":"main","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:02.2824526-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:02.4562094-03:00","level":"INFO","logger":"o.s.o.j.p.SpringPersistenceUnitInfo","thread":"main","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:02.4777551-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:02.7610126-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000004: hibernate-spatial adding function contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:03.2193338-03:00","level":"INFO","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator","thread":"main","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:03.2348545-03:00","level":"INFO","logger":"o.hibernate.orm.connections.access","thread":"main","message":"HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@13bc8778] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:03.2571635-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"main","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:03.6404212-03:00","level":"INFO","logger":"o.s.d.j.r.query.QueryEnhancerFactory","thread":"main","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:04.7879136-03:00","level":"WARN","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration","thread":"main","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:05.6933387-03:00","level":"INFO","logger":"o.s.b.a.e.web.EndpointLinksResolver","thread":"main","message":"Exposing 5 endpoint(s) beneath base path '/actuator'","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:05.7616837-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Starting ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:05.779443-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat started on port 52727 (http) with context path '/api'","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:05.8120273-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:52720]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-orders-service-it-consumer-1\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = orders-service-it-consumer\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:05.9317402-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:05.9317402-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:05.9317402-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758646925930","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:05.9357413-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:05.9492591-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Started DistributionCenterCachingIT in 7.699 seconds (process running for 15.196)","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:06.353202-03:00","level":"WARN","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error while fetching metadata with correlation id 2 : {orders.events=LEADER_NOT_AVAILABLE}","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:06.3552893-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cluster ID: w8kI4PPbTNu8xYflC-JnZQ","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:06.5835758-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Discovered group coordinator localhost:52720 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:06.5884142-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:06.6073158-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: need to re-join with the given member-id: consumer-orders-service-it-consumer-1-de46d30f-8b0d-4476-8ac2-3d79a3b16c3e","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:06.6073158-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:06.6073158-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:06.6220313-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully joined group with generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-de46d30f-8b0d-4476-8ac2-3d79a3b16c3e', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:06.6250378-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Finished assignment for group at generation 1: {consumer-orders-service-it-consumer-1-de46d30f-8b0d-4476-8ac2-3d79a3b16c3e=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:06.6580456-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully synced group in generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-de46d30f-8b0d-4476-8ac2-3d79a3b16c3e', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:06.6586277-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:06.6598216-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:06.668496-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:06.678182-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:52720 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:06.6791881-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions assigned: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:07.2554945-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"http-nio-auto-1-exec-1","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:07.2554945-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-1","message":"Initializing Servlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:07.2554945-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-1","message":"Completed initialization in 0 ms","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:07.3797749-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"de2dd2db-3e05-4781-b3fc-660f7fbfa079","message":"Processing new order request - Correlation ID: fbaee103-30a0-4fc6-a89a-dada35adfaf0, Customer: customer-cache, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:07.7520657-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"de2dd2db-3e05-4781-b3fc-660f7fbfa079","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:07.7520657-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"de2dd2db-3e05-4781-b3fc-660f7fbfa079","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:07.7652816-03:00","level":"INFO","logger":"o.a.k.c.producer.ProducerConfig","thread":"http-nio-auto-1-exec-1","correlationId":"de2dd2db-3e05-4781-b3fc-660f7fbfa079","message":"ProducerConfig values: \r\n\tacks = -1\r\n\tauto.include.jmx.reporter = true\r\n\tbatch.size = 16384\r\n\tbootstrap.servers = [PLAINTEXT://localhost:52720]\r\n\tbuffer.memory = 33554432\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = orders-service-producer-1\r\n\tcompression.type = snappy\r\n\tconnections.max.idle.ms = 540000\r\n\tdelivery.timeout.ms = 120000\r\n\tenable.idempotence = true\r\n\tinterceptor.classes = []\r\n\tkey.serializer = class org.apache.kafka.common.serialization.StringSerializer\r\n\tlinger.ms = 10\r\n\tmax.block.ms = 60000\r\n\tmax.in.flight.requests.per.connection = 5\r\n\tmax.request.size = 1048576\r\n\tmetadata.max.age.ms = 300000\r\n\tmetadata.max.idle.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartitioner.adaptive.partitioning.enable = true\r\n\tpartitioner.availability.timeout.ms = 0\r\n\tpartitioner.class = null\r\n\tpartitioner.ignore.keys = false\r\n\treceive.buffer.bytes = 32768\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretries = 3\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\ttransaction.timeout.ms = 60000\r\n\ttransactional.id = null\r\n\tvalue.serializer = class org.springframework.kafka.support.serializer.JsonSerializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:07.7775058-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"http-nio-auto-1-exec-1","correlationId":"de2dd2db-3e05-4781-b3fc-660f7fbfa079","message":"[Producer clientId=orders-service-producer-1] Instantiated an idempotent producer.","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:07.7931711-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"de2dd2db-3e05-4781-b3fc-660f7fbfa079","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:07.7931711-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"de2dd2db-3e05-4781-b3fc-660f7fbfa079","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:07.7931711-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"de2dd2db-3e05-4781-b3fc-660f7fbfa079","message":"Kafka startTimeMs: 1758646927793","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:07.8009802-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cluster ID: w8kI4PPbTNu8xYflC-JnZQ","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:07.8170962-03:00","level":"INFO","logger":"o.a.k.c.p.i.TransactionManager","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] ProducerId set to 0 with epoch 0","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:07.9933476-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"de2dd2db-3e05-4781-b3fc-660f7fbfa079","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRD0112TKQY94J8B64SYW6","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.0476252-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRD0112TKQY94J8B64SYW6","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.2711867-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-1","correlationId":"de2dd2db-3e05-4781-b3fc-660f7fbfa079","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1805)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1736)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1538)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1518)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1478)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1515)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1199)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1006)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:194)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:143)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:104)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:393)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:174)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\tat io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:350)\r\n\tat io.lettuce.core.RedisClient.connect(RedisClient.java:215)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1734)\r\n\t... 88 common frames omitted\r\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)\r\n\tat io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)\r\n\tat io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)\r\n\tat io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)\r\n\tat io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745)\r\n\tat io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680)\r\n\tat io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.2751297-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1805)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1736)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1538)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1518)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1478)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1515)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1199)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1006)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:194)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:143)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:104)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:393)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:174)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\tat io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:350)\r\n\tat io.lettuce.core.RedisClient.connect(RedisClient.java:215)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1734)\r\n\t... 54 common frames omitted\r\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)\r\n\tat io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)\r\n\tat io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)\r\n\tat io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)\r\n\tat io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745)\r\n\tat io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680)\r\n\tat io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.3038855-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.h.HttpDistributionCenterService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to fetch all distribution centers","exception":"org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.3038855-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.h.HttpDistributionCenterService","thread":"http-nio-auto-1-exec-1","correlationId":"de2dd2db-3e05-4781-b3fc-660f7fbfa079","message":"Failed to fetch all distribution centers","exception":"org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.3081852-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.failed - Event: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.3081852-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"de2dd2db-3e05-4781-b3fc-660f7fbfa079","message":"Publishing event to topic: order.failed - Event: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.3081852-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.3081852-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"de2dd2db-3e05-4781-b3fc-660f7fbfa079","message":"Event published successfully: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.3087937-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRD0112TKQY94J8B64SYW6","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.3087937-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"de2dd2db-3e05-4781-b3fc-660f7fbfa079","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRD0112TKQY94J8B64SYW6","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.3121211-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRD0112TKQY94J8B64SYW6 from event: Failed to process order [01K5VRD0112TKQY94J8B64SYW6]: Distribution center service unavailable","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRD0112TKQY94J8B64SYW6]: Distribution center service unavailable\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:165)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: br.com.ml.mktplace.orders.domain.model.ExternalServiceException: External service error [DistributionCenterService]: Failed to fetch all distribution centers\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:125)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\t... 38 common frames omitted\r\nCaused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\t... 40 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.3116076-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"de2dd2db-3e05-4781-b3fc-660f7fbfa079","message":"Failed to process order - Correlation ID: fbaee103-30a0-4fc6-a89a-dada35adfaf0","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRD0112TKQY94J8B64SYW6]: Distribution center service unavailable\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:165)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: br.com.ml.mktplace.orders.domain.model.ExternalServiceException: External service error [DistributionCenterService]: Failed to fetch all distribution centers\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:125)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\t... 72 common frames omitted\r\nCaused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\t... 74 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.315118-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.r.h.GlobalExceptionHandler","thread":"http-nio-auto-1-exec-1","correlationId":"de2dd2db-3e05-4781-b3fc-660f7fbfa079","message":"Order processing error - Correlation ID: cbbffe24-ae4b-44e1-8a2e-09528a27e830, Order ID: 01K5VRD0112TKQY94J8B64SYW6, Message: Failed to process order [01K5VRD0112TKQY94J8B64SYW6]: Distribution center service unavailable","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRD0112TKQY94J8B64SYW6]: Distribution center service unavailable\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:165)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: br.com.ml.mktplace.orders.domain.model.ExternalServiceException: External service error [DistributionCenterService]: Failed to fetch all distribution centers\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:125)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\t... 72 common frames omitted\r\nCaused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\t... 74 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.4017967-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT]: OrderEndToEndProcessingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.4027953-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.4425906-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"e2884338-b9db-4f86-b449-1e8b43530f7b","message":"Processing new order request - Correlation ID: e2884338-b9db-4f86-b449-1e8b43530f7b, Customer: customer-async-proc, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.4488761-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"e2884338-b9db-4f86-b449-1e8b43530f7b","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.4488761-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"e2884338-b9db-4f86-b449-1e8b43530f7b","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.4494857-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"e2884338-b9db-4f86-b449-1e8b43530f7b","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRD11VBEGG7MVHQEH20ZZG","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.4599173-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-2","correlationId":"e2884338-b9db-4f86-b449-1e8b43530f7b","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1805)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1736)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1538)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1518)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1478)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1515)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1199)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1006)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:194)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:143)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:104)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:393)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:174)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\tat io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:350)\r\n\tat io.lettuce.core.RedisClient.connect(RedisClient.java:215)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1734)\r\n\t... 88 common frames omitted\r\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)\r\n\tat io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)\r\n\tat io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)\r\n\tat io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)\r\n\tat io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745)\r\n\tat io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680)\r\n\tat io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.4730799-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRD11VBEGG7MVHQEH20ZZG","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.4748589-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-2","correlationId":"e2884338-b9db-4f86-b449-1e8b43530f7b","message":"Failed to cache value for key: distribution-centers:SP","exception":"org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1805)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1736)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1538)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1518)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1478)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1515)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1199)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1006)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:194)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:143)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:104)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:393)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:253)\r\n\tat org.springframework.data.redis.core.ValueOperations.set(ValueOperations.java:75)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.put(RedisCacheService.java:93)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:184)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\tat io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:350)\r\n\tat io.lettuce.core.RedisClient.connect(RedisClient.java:215)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1734)\r\n\t... 89 common frames omitted\r\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)\r\n\tat io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)\r\n\tat io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)\r\n\tat io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)\r\n\tat io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745)\r\n\tat io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680)\r\n\tat io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.4760324-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-2","correlationId":"e2884338-b9db-4f86-b449-1e8b43530f7b","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.4765597-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-2","correlationId":"e2884338-b9db-4f86-b449-1e8b43530f7b","message":"CD selecionado para item ASYNC-PROC-1 pedido 01K5VRD11VBEGG7MVHQEH20ZZG -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.47929-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"e2884338-b9db-4f86-b449-1e8b43530f7b","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.47929-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"e2884338-b9db-4f86-b449-1e8b43530f7b","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.4798138-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"e2884338-b9db-4f86-b449-1e8b43530f7b","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRD11VBEGG7MVHQEH20ZZG","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.4824521-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1805)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1736)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1538)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1518)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1478)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1515)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1199)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1006)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:194)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:143)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:104)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:393)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:174)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\tat io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:350)\r\n\tat io.lettuce.core.RedisClient.connect(RedisClient.java:215)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1734)\r\n\t... 54 common frames omitted\r\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)\r\n\tat io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)\r\n\tat io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)\r\n\tat io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)\r\n\tat io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745)\r\n\tat io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680)\r\n\tat io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.4889604-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"e2884338-b9db-4f86-b449-1e8b43530f7b","message":"Order processed successfully - ID: 01K5VRD11VBEGG7MVHQEH20ZZG, Status: PROCESSED, Correlation ID: e2884338-b9db-4f86-b449-1e8b43530f7b","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.4889604-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to cache value for key: distribution-centers:SP","exception":"org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1805)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1736)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1538)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1518)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1478)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1515)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1199)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1006)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:194)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:143)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:104)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:393)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:253)\r\n\tat org.springframework.data.redis.core.ValueOperations.set(ValueOperations.java:75)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.put(RedisCacheService.java:93)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:184)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\tat io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:350)\r\n\tat io.lettuce.core.RedisClient.connect(RedisClient.java:215)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1734)\r\n\t... 55 common frames omitted\r\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)\r\n\tat io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)\r\n\tat io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)\r\n\tat io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)\r\n\tat io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745)\r\n\tat io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680)\r\n\tat io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.4894738-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.4899976-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item ASYNC-PROC-1 pedido 01K5VRD11VBEGG7MVHQEH20ZZG -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.4920706-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.492597-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.492597-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRD11VBEGG7MVHQEH20ZZG","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.4968628-03:00","level":"INFO","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100503: On release of batch it still contained JDBC statements","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.4968628-03:00","level":"ERROR","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100501: Exception executing batch [org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?], SQL: delete from order_items where id=?","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.4991496-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-3","correlationId":"3878e596-1cfd-4637-ac50-0f8f255c83b4","message":"Fetching order by ID: 01K5VRD11VBEGG7MVHQEH20ZZG - Correlation ID: 0e58a89f-96e7-436f-bc31-17f5e0fc8009","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.5001838-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRD11VBEGG7MVHQEH20ZZG from event: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?","exception":"org.springframework.orm.ObjectOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:328)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:565)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:669)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:419)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:67)\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:54)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.checkRowCounts(BatchImpl.java:314)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:278)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.PreparedStatementGroupSingleTable.forEachStatement(PreparedStatementGroupSingleTable.java:59)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.performExecution(BatchImpl.java:260)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.execute(BatchImpl.java:239)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.executeBatch(JdbcCoordinatorImpl.java:188)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:659)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1415)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:496)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2325)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1988)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:561)\r\n\t... 31 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.5047533-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-3","correlationId":"3878e596-1cfd-4637-ac50-0f8f255c83b4","message":"Order retrieved successfully - ID: 01K5VRD11VBEGG7MVHQEH20ZZG, Status: PROCESSED, Correlation ID: 0e58a89f-96e7-436f-bc31-17f5e0fc8009","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.5114386-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT]: OrderEventConsumptionIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.5124443-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.5460634-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-4","correlationId":"c6b7dfc3-7ce3-4a5f-ba57-c9f410b8d7f7","message":"Processing new order request - Correlation ID: f43abdea-f586-4ca7-8299-7cd1a316e68a, Customer: customer-event-consumer, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.552767-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"c6b7dfc3-7ce3-4a5f-ba57-c9f410b8d7f7","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.552767-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"c6b7dfc3-7ce3-4a5f-ba57-c9f410b8d7f7","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.5533728-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"c6b7dfc3-7ce3-4a5f-ba57-c9f410b8d7f7","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRD153APB6TS1WYCDCWDX4","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.5629735-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-4","correlationId":"c6b7dfc3-7ce3-4a5f-ba57-c9f410b8d7f7","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1805)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1736)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1538)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1518)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1478)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1515)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1199)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1006)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:194)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:143)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:104)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:393)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:174)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\tat io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:350)\r\n\tat io.lettuce.core.RedisClient.connect(RedisClient.java:215)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1734)\r\n\t... 88 common frames omitted\r\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)\r\n\tat io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)\r\n\tat io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)\r\n\tat io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)\r\n\tat io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745)\r\n\tat io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680)\r\n\tat io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.568907-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-4","correlationId":"c6b7dfc3-7ce3-4a5f-ba57-c9f410b8d7f7","message":"Failed to cache value for key: distribution-centers:SP","exception":"org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1805)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1736)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1538)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1518)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1478)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1515)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1199)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1006)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:194)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:143)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:104)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:393)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:253)\r\n\tat org.springframework.data.redis.core.ValueOperations.set(ValueOperations.java:75)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.put(RedisCacheService.java:93)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:184)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\tat io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:350)\r\n\tat io.lettuce.core.RedisClient.connect(RedisClient.java:215)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1734)\r\n\t... 89 common frames omitted\r\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)\r\n\tat io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)\r\n\tat io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)\r\n\tat io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)\r\n\tat io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745)\r\n\tat io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680)\r\n\tat io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.5694951-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-4","correlationId":"c6b7dfc3-7ce3-4a5f-ba57-c9f410b8d7f7","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.5700962-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-4","correlationId":"c6b7dfc3-7ce3-4a5f-ba57-c9f410b8d7f7","message":"CD selecionado para item EVT-CONSUME-1 pedido 01K5VRD153APB6TS1WYCDCWDX4 -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.5725796-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"c6b7dfc3-7ce3-4a5f-ba57-c9f410b8d7f7","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.5725796-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"c6b7dfc3-7ce3-4a5f-ba57-c9f410b8d7f7","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.5731866-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"c6b7dfc3-7ce3-4a5f-ba57-c9f410b8d7f7","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRD153APB6TS1WYCDCWDX4","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.5767899-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-4","correlationId":"c6b7dfc3-7ce3-4a5f-ba57-c9f410b8d7f7","message":"Order processed successfully - ID: 01K5VRD153APB6TS1WYCDCWDX4, Status: PROCESSED, Correlation ID: f43abdea-f586-4ca7-8299-7cd1a316e68a","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.5792725-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:52720]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123-2\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.5805592-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRD153APB6TS1WYCDCWDX4","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.5846-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.5846-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.5846-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758646928584","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.5852683-03:00","level":"INFO","logger":"o.a.k.clients.consumer.KafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123-2, groupId=order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.5852683-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRD153APB6TS1WYCDCWDX4 from event: Failed to process order [01K5VRD153APB6TS1WYCDCWDX4]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRD153APB6TS1WYCDCWDX4]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.5908144-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123-2, groupId=order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123] Cluster ID: w8kI4PPbTNu8xYflC-JnZQ","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.5914695-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123-2, groupId=order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123] Discovered group coordinator localhost:52720 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.5931691-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123-2, groupId=order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.5962759-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123-2, groupId=order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123] Request joining group due to: need to re-join with the given member-id: consumer-order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123-2-b237f4e2-3721-42f9-a4fe-c3572d35a6dd","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.5969004-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123-2, groupId=order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.5969004-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123-2, groupId=order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.6017451-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123-2, groupId=order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123] Successfully joined group with generation Generation{generationId=1, memberId='consumer-order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123-2-b237f4e2-3721-42f9-a4fe-c3572d35a6dd', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.6017451-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123-2, groupId=order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123] Finished assignment for group at generation 1: {consumer-order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123-2-b237f4e2-3721-42f9-a4fe-c3572d35a6dd=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.6054385-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123-2, groupId=order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123] Successfully synced group in generation Generation{generationId=1, memberId='consumer-order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123-2-b237f4e2-3721-42f9-a4fe-c3572d35a6dd', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.6059584-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123-2, groupId=order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.6059584-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123-2, groupId=order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.6075919-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123-2, groupId=order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.6121294-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123-2, groupId=order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:52720 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.6263425-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123-2, groupId=order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.6268737-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123-2, groupId=order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123] Member consumer-order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123-2-b237f4e2-3721-42f9-a4fe-c3572d35a6dd sending LeaveGroup request to coordinator localhost:52720 (id: 2147483646 rack: null) due to the consumer is being closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.6274023-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123-2, groupId=order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:08.6274023-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123-2, groupId=order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.0826608-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.0826608-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.0826608-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.084365-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"App info kafka.consumer for consumer-order-events-test-group-6fa1cadb-5040-438d-8ce5-1b2b816a6123-2 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.0989827-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventPublishingIT]: OrderEventPublishingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.099989-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventPublishingIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.1470316-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"86472d16-65cf-48e3-95a0-ccee4adf3fb1","message":"Processing new order request - Correlation ID: 3251209e-2768-4d0e-bdc2-bf3398beb62e, Customer: customer-events, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.1580627-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"86472d16-65cf-48e3-95a0-ccee4adf3fb1","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.1586396-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"86472d16-65cf-48e3-95a0-ccee4adf3fb1","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.1586396-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"86472d16-65cf-48e3-95a0-ccee4adf3fb1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRD1QVNAAXMBNP4NV5803W","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.174536-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-5","correlationId":"86472d16-65cf-48e3-95a0-ccee4adf3fb1","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1805)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1736)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1538)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1518)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1478)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1515)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1199)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1006)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:194)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:143)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:104)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:393)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:174)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\tat io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:350)\r\n\tat io.lettuce.core.RedisClient.connect(RedisClient.java:215)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1734)\r\n\t... 88 common frames omitted\r\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)\r\n\tat io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)\r\n\tat io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)\r\n\tat io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)\r\n\tat io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745)\r\n\tat io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680)\r\n\tat io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.1811903-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRD1QVNAAXMBNP4NV5803W","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.1855212-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-5","correlationId":"86472d16-65cf-48e3-95a0-ccee4adf3fb1","message":"Failed to cache value for key: distribution-centers:SP","exception":"org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1805)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1736)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1538)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1518)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1478)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1515)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1199)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1006)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:194)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:143)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:104)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:393)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:253)\r\n\tat org.springframework.data.redis.core.ValueOperations.set(ValueOperations.java:75)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.put(RedisCacheService.java:93)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:184)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\tat io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:350)\r\n\tat io.lettuce.core.RedisClient.connect(RedisClient.java:215)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1734)\r\n\t... 89 common frames omitted\r\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)\r\n\tat io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)\r\n\tat io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)\r\n\tat io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)\r\n\tat io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745)\r\n\tat io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680)\r\n\tat io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.1860424-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-5","correlationId":"86472d16-65cf-48e3-95a0-ccee4adf3fb1","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.1865611-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-5","correlationId":"86472d16-65cf-48e3-95a0-ccee4adf3fb1","message":"CD selecionado para item EVT123 pedido 01K5VRD1QVNAAXMBNP4NV5803W -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.1898204-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"86472d16-65cf-48e3-95a0-ccee4adf3fb1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.1898204-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"86472d16-65cf-48e3-95a0-ccee4adf3fb1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.1903999-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"86472d16-65cf-48e3-95a0-ccee4adf3fb1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRD1QVNAAXMBNP4NV5803W","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.2135791-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"86472d16-65cf-48e3-95a0-ccee4adf3fb1","message":"Order processed successfully - ID: 01K5VRD1QVNAAXMBNP4NV5803W, Status: PROCESSED, Correlation ID: 3251209e-2768-4d0e-bdc2-bf3398beb62e","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.2135791-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1805)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1736)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1538)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1518)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1478)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1515)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1199)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1006)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:194)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:143)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:104)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:393)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:174)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\tat io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:350)\r\n\tat io.lettuce.core.RedisClient.connect(RedisClient.java:215)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1734)\r\n\t... 54 common frames omitted\r\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)\r\n\tat io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)\r\n\tat io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)\r\n\tat io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)\r\n\tat io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745)\r\n\tat io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680)\r\n\tat io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.2216216-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderFlowIT]: OrderFlowIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.2223531-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderFlowIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.2229533-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to cache value for key: distribution-centers:SP","exception":"org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1805)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1736)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1538)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1518)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1478)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1515)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1199)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1006)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:194)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:143)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:104)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:393)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:253)\r\n\tat org.springframework.data.redis.core.ValueOperations.set(ValueOperations.java:75)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.put(RedisCacheService.java:93)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:184)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\tat io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:350)\r\n\tat io.lettuce.core.RedisClient.connect(RedisClient.java:215)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1734)\r\n\t... 55 common frames omitted\r\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)\r\n\tat io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)\r\n\tat io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)\r\n\tat io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)\r\n\tat io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745)\r\n\tat io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680)\r\n\tat io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.2234872-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.2234872-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item EVT123 pedido 01K5VRD1QVNAAXMBNP4NV5803W -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.2266266-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.2266266-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.2266266-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRD1QVNAAXMBNP4NV5803W","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.230824-03:00","level":"INFO","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100503: On release of batch it still contained JDBC statements","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.230824-03:00","level":"ERROR","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100501: Exception executing batch [org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?], SQL: delete from order_items where id=?","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.2318903-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRD1QVNAAXMBNP4NV5803W from event: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?","exception":"org.springframework.orm.ObjectOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:328)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:565)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:669)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:419)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:67)\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:54)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.checkRowCounts(BatchImpl.java:314)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:278)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.PreparedStatementGroupSingleTable.forEachStatement(PreparedStatementGroupSingleTable.java:59)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.performExecution(BatchImpl.java:260)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.execute(BatchImpl.java:239)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.executeBatch(JdbcCoordinatorImpl.java:188)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:659)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1415)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:496)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2325)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1988)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:561)\r\n\t... 31 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.2649302-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"4715a1a7-8ffd-4ef5-8a57-fdb7160c615b","message":"Processing new order request - Correlation ID: 4715a1a7-8ffd-4ef5-8a57-fdb7160c615b, Customer: customer-1, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.2719415-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"4715a1a7-8ffd-4ef5-8a57-fdb7160c615b","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.2719415-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"4715a1a7-8ffd-4ef5-8a57-fdb7160c615b","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.2724605-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"4715a1a7-8ffd-4ef5-8a57-fdb7160c615b","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRD1VH824YHGP4S4HRY1G0","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.2822333-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-6","correlationId":"4715a1a7-8ffd-4ef5-8a57-fdb7160c615b","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1805)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1736)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1538)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1518)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1478)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1515)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1199)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1006)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:194)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:143)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:104)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:393)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:174)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\tat io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:350)\r\n\tat io.lettuce.core.RedisClient.connect(RedisClient.java:215)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1734)\r\n\t... 88 common frames omitted\r\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)\r\n\tat io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)\r\n\tat io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)\r\n\tat io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)\r\n\tat io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745)\r\n\tat io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680)\r\n\tat io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.2895563-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-6","correlationId":"4715a1a7-8ffd-4ef5-8a57-fdb7160c615b","message":"Failed to cache value for key: distribution-centers:SP","exception":"org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.translateException(LettuceConnectionFactory.java:1805)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1736)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1538)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.lambda$getConnection$0(LettuceConnectionFactory.java:1518)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.doInLock(LettuceConnectionFactory.java:1478)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1515)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:1199)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:1006)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.fetchConnection(RedisConnectionUtils.java:194)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.doGetConnection(RedisConnectionUtils.java:143)\r\n\tat org.springframework.data.redis.core.RedisConnectionUtils.getConnection(RedisConnectionUtils.java:104)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:393)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:253)\r\n\tat org.springframework.data.redis.core.ValueOperations.set(ValueOperations.java:75)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.put(RedisCacheService.java:93)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:184)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost/<unresolved>:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\tat io.lettuce.core.AbstractRedisClient.getConnection(AbstractRedisClient.java:350)\r\n\tat io.lettuce.core.RedisClient.connect(RedisClient.java:215)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.lambda$getConnection$1(StandaloneConnectionProvider.java:112)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.springframework.data.redis.connection.lettuce.StandaloneConnectionProvider.getConnection(StandaloneConnectionProvider.java:112)\r\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$ExceptionTranslatingConnectionProvider.getConnection(LettuceConnectionFactory.java:1734)\r\n\t... 89 common frames omitted\r\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO <proto> AUTH <user> <pass> option can be used to authenticate the client and select the RESP protocol version at the same time\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:147)\r\n\tat io.lettuce.core.internal.ExceptionFactory.createExecutionException(ExceptionFactory.java:116)\r\n\tat io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120)\r\n\tat io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111)\r\n\tat io.lettuce.core.protocol.CommandWrapper.complete(CommandWrapper.java:63)\r\n\tat io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:745)\r\n\tat io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:680)\r\n\tat io.lettuce.core.protocol.CommandHandler.channelRead(CommandHandler.java:597)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.2902534-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-6","correlationId":"4715a1a7-8ffd-4ef5-8a57-fdb7160c615b","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.2902534-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-6","correlationId":"4715a1a7-8ffd-4ef5-8a57-fdb7160c615b","message":"CD selecionado para item ABC123 pedido 01K5VRD1VH824YHGP4S4HRY1G0 -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.2941593-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"4715a1a7-8ffd-4ef5-8a57-fdb7160c615b","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.2941593-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"4715a1a7-8ffd-4ef5-8a57-fdb7160c615b","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.2946949-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"4715a1a7-8ffd-4ef5-8a57-fdb7160c615b","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRD1VH824YHGP4S4HRY1G0","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.2983732-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"4715a1a7-8ffd-4ef5-8a57-fdb7160c615b","message":"Order processed successfully - ID: 01K5VRD1VH824YHGP4S4HRY1G0, Status: PROCESSED, Correlation ID: 4715a1a7-8ffd-4ef5-8a57-fdb7160c615b","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.2989145-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRD1VH824YHGP4S4HRY1G0","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.3016759-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"825a1b09-a11a-4009-992b-9cdb52ac9824","message":"Fetching order by ID: 01K5VRD1VH824YHGP4S4HRY1G0 - Correlation ID: 344fa3c1-7019-4c54-a098-1380e2a726fe","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.3033734-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRD1VH824YHGP4S4HRY1G0 from event: Failed to process order [01K5VRD1VH824YHGP4S4HRY1G0]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRD1VH824YHGP4S4HRY1G0]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.3059955-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"825a1b09-a11a-4009-992b-9cdb52ac9824","message":"Order retrieved successfully - ID: 01K5VRD1VH824YHGP4S4HRY1G0, Status: PROCESSED, Correlation ID: 344fa3c1-7019-4c54-a098-1380e2a726fe","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.3786918-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.3786918-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.5411371-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight FETCH request with correlation id 27 due to node 1 being disconnected (elapsed time since creation: 66ms, elapsed time since send: 66ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.542137-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.542137-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.5433705-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 2147483646 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.5433705-03:00","level":"INFO","logger":"o.a.k.clients.FetchSessionHandler","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error sending fetch request (sessionId=82901536, epoch=13) to node 1:","exception":"org.apache.kafka.common.errors.DisconnectException: null\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.5442317-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Group coordinator localhost:52720 (id: 2147483646 rack: null) is unavailable or invalid due to cause: coordinator unavailable. isDisconnected: true. Rediscovery will be attempted.","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.5442317-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.5442317-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.5442317-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cancelled in-flight API_VERSIONS request with correlation id 14 due to node 1 being disconnected (elapsed time since creation: 1ms, elapsed time since send: 1ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.5447357-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions revoked: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.5447357-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.5453237-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.5453237-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Unsubscribed all topics or patterns and assigned partitions","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.5453237-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.5453237-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.5468858-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.5468858-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight API_VERSIONS request with correlation id 30 due to node 1 being disconnected (elapsed time since creation: 1ms, elapsed time since send: 1ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.5474039-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.5474039-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.5474039-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.5484393-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"App info kafka.consumer for consumer-orders-service-it-consumer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.5489587-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: Consumer stopped","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.6524715-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.6524715-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cancelled in-flight API_VERSIONS request with correlation id 15 due to node 1 being disconnected (elapsed time since creation: 0ms, elapsed time since send: 0ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.6667582-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"SpringApplicationShutdownHook","message":"[Producer clientId=orders-service-producer-1] Closing the Kafka producer with timeoutMillis = 30000 ms.","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.6682573-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.6682573-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.6682573-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.6682573-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"SpringApplicationShutdownHook","message":"App info kafka.producer for orders-service-producer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.678321-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"SpringApplicationShutdownHook","message":"Closing JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.6793219-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown initiated...","service":"orders-service"}
{"timestamp":"2025-09-23T14:02:09.6803216-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown completed.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:18.101006-03:00","level":"INFO","logger":"o.h.validator.internal.util.Version","thread":"background-preinit","message":"HV000001: Hibernate Validator 8.0.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:18.1520941-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Starting DistributionCenterCachingIT using Java 21.0.8 with PID 14004 (started by ciror in Z:\\projects\\meli-test-mktplace)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:18.1542955-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"The following 1 profile is active: \"integration-test\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:18.9420731-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:18.9430811-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:19.0685262-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 119 ms. Found 1 JPA repository interface.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:19.6711432-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:19.6742002-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data Redis repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:19.7164859-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationExtensionSupport","thread":"main","message":"Spring Data Redis - Could not safely identify store assignment for repository candidate interface br.com.ml.mktplace.orders.adapter.outbound.persistence.repository.JpaOrderEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:19.7174866-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 26 ms. Found 0 Redis repository interfaces.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:21.0814066-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat initialized with port 0 (http)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:21.0949359-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Initializing ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:21.096944-03:00","level":"INFO","logger":"o.a.catalina.core.StandardService","thread":"main","message":"Starting service [Tomcat]","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:21.0979361-03:00","level":"INFO","logger":"o.a.catalina.core.StandardEngine","thread":"main","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:21.1833865-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"main","message":"Initializing Spring embedded WebApplicationContext","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:21.1833865-03:00","level":"INFO","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","thread":"main","message":"Root WebApplicationContext: initialization completed in 3001 ms","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:21.6543044-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Starting...","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:21.9791644-03:00","level":"INFO","logger":"com.zaxxer.hikari.pool.HikariPool","thread":"main","message":"OrdersHikariPool - Added connection org.postgresql.jdbc.PgConnection@ee55f69","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:21.981332-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Start completed.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:22.1729299-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"Flyway Community Edition 9.22.3 by Redgate","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:22.1729299-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"See release notes here: https://rd.gt/416ObMi","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:22.1729299-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:22.2056076-03:00","level":"INFO","logger":"org.flywaydb.core.FlywayExecutor","thread":"main","message":"Database: jdbc:postgresql://localhost:52826/mktplace_orders (PostgreSQL 16.4)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:22.2181442-03:00","level":"WARN","logger":"o.f.c.i.database.base.Database","thread":"main","message":"Flyway upgrade recommended: PostgreSQL 16.4 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:22.2751123-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Schema history table \"public\".\"flyway_schema_history\" does not exist yet","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:22.285881-03:00","level":"INFO","logger":"o.f.core.internal.command.DbValidate","thread":"main","message":"Successfully validated 2 migrations (execution time 00:00.047s)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:22.3063027-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Creating Schema History table \"public\".\"flyway_schema_history\" ...","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:22.3443762-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Current version of schema \"public\": << Empty Schema >>","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:22.3569173-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"1 - initial schema\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:22.3650948-03:00","level":"WARN","logger":"o.f.c.i.s.DefaultSqlScriptExecutor","thread":"main","message":"DB: extension \"postgis\" already exists, skipping (SQL State: 42710 - Error Code: 0)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:22.4093509-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"2 - sample distribution centers\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:22.4335213-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Successfully applied 2 migrations to schema \"public\", now at version v2 (execution time 00:00.038s)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:22.5197785-03:00","level":"INFO","logger":"o.h.jpa.internal.util.LogHelper","thread":"main","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:22.5805184-03:00","level":"INFO","logger":"org.hibernate.Version","thread":"main","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:22.5973783-03:00","level":"INFO","logger":"o.h.s.integration.SpatialService","thread":"main","message":"HHH80000001: hibernate-spatial integration enabled : true","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:22.6310817-03:00","level":"INFO","logger":"o.h.c.i.RegionFactoryInitiator","thread":"main","message":"HHH000026: Second-level cache disabled","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:22.7681533-03:00","level":"WARN","logger":"org.hibernate.orm.deprecation","thread":"main","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:22.7970747-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:23.009889-03:00","level":"INFO","logger":"o.s.o.j.p.SpringPersistenceUnitInfo","thread":"main","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:23.0390009-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:23.4765234-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000004: hibernate-spatial adding function contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:24.1964149-03:00","level":"INFO","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator","thread":"main","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:24.2108008-03:00","level":"INFO","logger":"o.hibernate.orm.connections.access","thread":"main","message":"HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@77db9559] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:24.2411692-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"main","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:24.871651-03:00","level":"INFO","logger":"o.s.d.j.r.query.QueryEnhancerFactory","thread":"main","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:26.5224823-03:00","level":"WARN","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration","thread":"main","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:27.9009153-03:00","level":"INFO","logger":"o.s.b.a.e.web.EndpointLinksResolver","thread":"main","message":"Exposing 5 endpoint(s) beneath base path '/actuator'","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:28.0046867-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Starting ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:28.0172165-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat started on port 52838 (http) with context path '/api'","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:28.0500788-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:52830]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-orders-service-it-consumer-1\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = orders-service-it-consumer\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:28.2071998-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:28.2082001-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:28.2082001-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758647128205","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:28.2153081-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:28.2321151-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Started DistributionCenterCachingIT in 10.853 seconds (process running for 19.006)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:28.6768276-03:00","level":"WARN","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error while fetching metadata with correlation id 2 : {orders.events=LEADER_NOT_AVAILABLE}","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:28.6786084-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cluster ID: W6vCOYt8Se2HbWmhbF84Ew","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:28.7955161-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Discovered group coordinator localhost:52830 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:28.8043978-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:28.8370117-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: need to re-join with the given member-id: consumer-orders-service-it-consumer-1-e24a2ae2-d0d7-42b9-8d86-f8e3b96c2d3b","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:28.8375751-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:28.8375751-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:28.8497948-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully joined group with generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-e24a2ae2-d0d7-42b9-8d86-f8e3b96c2d3b', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:28.8664104-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Finished assignment for group at generation 1: {consumer-orders-service-it-consumer-1-e24a2ae2-d0d7-42b9-8d86-f8e3b96c2d3b=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:28.9012747-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully synced group in generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-e24a2ae2-d0d7-42b9-8d86-f8e3b96c2d3b', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:28.9023203-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:28.9057324-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:28.9214501-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:28.9343287-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:52830 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:28.9354259-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions assigned: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:30.023151-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"http-nio-auto-1-exec-3","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:30.023151-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-3","message":"Initializing Servlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:30.0242401-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-3","message":"Completed initialization in 0 ms","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:30.1708317-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-3","correlationId":"3ac0c9c3-302a-46ce-aa1b-f0627aedae8a","message":"Processing new order request - Correlation ID: 36984ca3-a188-4aec-9bf2-4601b663064b, Customer: customer-cache, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:30.7073849-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"3ac0c9c3-302a-46ce-aa1b-f0627aedae8a","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:30.7073849-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"3ac0c9c3-302a-46ce-aa1b-f0627aedae8a","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:30.7249733-03:00","level":"INFO","logger":"o.a.k.c.producer.ProducerConfig","thread":"http-nio-auto-1-exec-3","correlationId":"3ac0c9c3-302a-46ce-aa1b-f0627aedae8a","message":"ProducerConfig values: \r\n\tacks = -1\r\n\tauto.include.jmx.reporter = true\r\n\tbatch.size = 16384\r\n\tbootstrap.servers = [PLAINTEXT://localhost:52830]\r\n\tbuffer.memory = 33554432\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = orders-service-producer-1\r\n\tcompression.type = snappy\r\n\tconnections.max.idle.ms = 540000\r\n\tdelivery.timeout.ms = 120000\r\n\tenable.idempotence = true\r\n\tinterceptor.classes = []\r\n\tkey.serializer = class org.apache.kafka.common.serialization.StringSerializer\r\n\tlinger.ms = 10\r\n\tmax.block.ms = 60000\r\n\tmax.in.flight.requests.per.connection = 5\r\n\tmax.request.size = 1048576\r\n\tmetadata.max.age.ms = 300000\r\n\tmetadata.max.idle.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartitioner.adaptive.partitioning.enable = true\r\n\tpartitioner.availability.timeout.ms = 0\r\n\tpartitioner.class = null\r\n\tpartitioner.ignore.keys = false\r\n\treceive.buffer.bytes = 32768\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretries = 3\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\ttransaction.timeout.ms = 60000\r\n\ttransactional.id = null\r\n\tvalue.serializer = class org.springframework.kafka.support.serializer.JsonSerializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:30.74109-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"http-nio-auto-1-exec-3","correlationId":"3ac0c9c3-302a-46ce-aa1b-f0627aedae8a","message":"[Producer clientId=orders-service-producer-1] Instantiated an idempotent producer.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:30.7636498-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-3","correlationId":"3ac0c9c3-302a-46ce-aa1b-f0627aedae8a","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:30.7636498-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-3","correlationId":"3ac0c9c3-302a-46ce-aa1b-f0627aedae8a","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:30.7636498-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-3","correlationId":"3ac0c9c3-302a-46ce-aa1b-f0627aedae8a","message":"Kafka startTimeMs: 1758647130763","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:30.7712187-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cluster ID: W6vCOYt8Se2HbWmhbF84Ew","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:30.7850219-03:00","level":"INFO","logger":"o.a.k.c.p.i.TransactionManager","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] ProducerId set to 0 with epoch 0","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:30.9524436-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"3ac0c9c3-302a-46ce-aa1b-f0627aedae8a","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRK62C7D6QAP03Y9W8MA8S","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.0366048-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRK62C7D6QAP03Y9W8MA8S","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.3849275-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.h.HttpDistributionCenterService","thread":"http-nio-auto-1-exec-3","correlationId":"3ac0c9c3-302a-46ce-aa1b-f0627aedae8a","message":"Failed to fetch all distribution centers","exception":"org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.3849275-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.h.HttpDistributionCenterService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to fetch all distribution centers","exception":"org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.3922073-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.failed - Event: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.3922073-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.3922073-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"3ac0c9c3-302a-46ce-aa1b-f0627aedae8a","message":"Publishing event to topic: order.failed - Event: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.3922073-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"3ac0c9c3-302a-46ce-aa1b-f0627aedae8a","message":"Event published successfully: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.3934243-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRK62C7D6QAP03Y9W8MA8S","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.3934243-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"3ac0c9c3-302a-46ce-aa1b-f0627aedae8a","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRK62C7D6QAP03Y9W8MA8S","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.3987054-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRK62C7D6QAP03Y9W8MA8S from event: Failed to process order [01K5VRK62C7D6QAP03Y9W8MA8S]: Distribution center service unavailable","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRK62C7D6QAP03Y9W8MA8S]: Distribution center service unavailable\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:165)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: br.com.ml.mktplace.orders.domain.model.ExternalServiceException: External service error [DistributionCenterService]: Failed to fetch all distribution centers\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:125)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\t... 38 common frames omitted\r\nCaused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\t... 40 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.3987054-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-3","correlationId":"3ac0c9c3-302a-46ce-aa1b-f0627aedae8a","message":"Failed to process order - Correlation ID: 36984ca3-a188-4aec-9bf2-4601b663064b","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRK62C7D6QAP03Y9W8MA8S]: Distribution center service unavailable\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:165)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: br.com.ml.mktplace.orders.domain.model.ExternalServiceException: External service error [DistributionCenterService]: Failed to fetch all distribution centers\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:125)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\t... 72 common frames omitted\r\nCaused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\t... 74 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.4025399-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.r.h.GlobalExceptionHandler","thread":"http-nio-auto-1-exec-3","correlationId":"3ac0c9c3-302a-46ce-aa1b-f0627aedae8a","message":"Order processing error - Correlation ID: ff8d4a0f-ceec-4494-918a-9f1289354dcb, Order ID: 01K5VRK62C7D6QAP03Y9W8MA8S, Message: Failed to process order [01K5VRK62C7D6QAP03Y9W8MA8S]: Distribution center service unavailable","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRK62C7D6QAP03Y9W8MA8S]: Distribution center service unavailable\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:165)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: br.com.ml.mktplace.orders.domain.model.ExternalServiceException: External service error [DistributionCenterService]: Failed to fetch all distribution centers\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:125)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\t... 72 common frames omitted\r\nCaused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\t... 74 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.5003345-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT]: OrderEndToEndProcessingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.5023339-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.5518495-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-10","correlationId":"4023bca5-c845-4ed4-8d23-634d9a4da685","message":"Processing new order request - Correlation ID: 4023bca5-c845-4ed4-8d23-634d9a4da685, Customer: customer-async-proc, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.559849-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-10","correlationId":"4023bca5-c845-4ed4-8d23-634d9a4da685","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.559849-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-10","correlationId":"4023bca5-c845-4ed4-8d23-634d9a4da685","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.5604525-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-10","correlationId":"4023bca5-c845-4ed4-8d23-634d9a4da685","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRK7CZ6AERTMDBWA62WQBQ","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.5781804-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRK7CZ6AERTMDBWA62WQBQ","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.5870334-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-10","correlationId":"4023bca5-c845-4ed4-8d23-634d9a4da685","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.5876516-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-10","correlationId":"4023bca5-c845-4ed4-8d23-634d9a4da685","message":"CD selecionado para item ASYNC-PROC-1 pedido 01K5VRK7CZ6AERTMDBWA62WQBQ -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.5907321-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-10","correlationId":"4023bca5-c845-4ed4-8d23-634d9a4da685","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.5912878-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-10","correlationId":"4023bca5-c845-4ed4-8d23-634d9a4da685","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.5918517-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-10","correlationId":"4023bca5-c845-4ed4-8d23-634d9a4da685","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRK7CZ6AERTMDBWA62WQBQ","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.5929699-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.serializer.SerializationException: Could not read JSON:Unexpected token (START_OBJECT), expected VALUE_STRING: need String, Number of Boolean value that contains type id (for subtype of java.lang.Object)\n at [Source: (byte[])\"[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coor\"[truncated 96 bytes]; line: 1, column: 2] \r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:292)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:261)\r\n\tat org.springframework.data.redis.core.AbstractOperations.deserializeValue(AbstractOperations.java:360)\r\n\tat org.springframework.data.redis.core.AbstractOperations$ValueDeserializingRedisCallback.doInRedis(AbstractOperations.java:62)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:406)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:174)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: com.fasterxml.jackson.databind.exc.MismatchedInputException: Unexpected token (START_OBJECT), expected VALUE_STRING: need String, Number of Boolean value that contains type id (for subtype of java.lang.Object)\n at [Source: (byte[])\"[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coor\"[truncated 96 bytes]; line: 1, column: 2]\r\n\tat com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:59)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.wrongTokenException(DeserializationContext.java:1950)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.reportWrongTokenException(DeserializationContext.java:1684)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._locateTypeId(AsArrayTypeDeserializer.java:166)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._deserialize(AsArrayTypeDeserializer.java:96)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer.deserializeTypedFromArray(AsArrayTypeDeserializer.java:53)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromAny(AsPropertyTypeDeserializer.java:238)\r\n\tat com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR.deserializeWithType(UntypedObjectDeserializerNR.java:115)\r\n\tat com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:74)\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4825)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3874)\r\n\tat org.springframework.data.redis.serializer.JacksonObjectReader.lambda$create$0(JacksonObjectReader.java:54)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:289)\r\n\t... 48 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.5986554-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.5991858-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item ASYNC-PROC-1 pedido 01K5VRK7CZ6AERTMDBWA62WQBQ -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.6019387-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.6019387-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.602503-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRK7CZ6AERTMDBWA62WQBQ","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.6042633-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-10","correlationId":"4023bca5-c845-4ed4-8d23-634d9a4da685","message":"Order processed successfully - ID: 01K5VRK7CZ6AERTMDBWA62WQBQ, Status: PROCESSED, Correlation ID: 4023bca5-c845-4ed4-8d23-634d9a4da685","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.6075204-03:00","level":"INFO","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100503: On release of batch it still contained JDBC statements","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.6075204-03:00","level":"ERROR","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100501: Exception executing batch [org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?], SQL: delete from order_items where id=?","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.6130169-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRK7CZ6AERTMDBWA62WQBQ from event: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?","exception":"org.springframework.orm.ObjectOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:328)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:565)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:669)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:419)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:67)\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:54)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.checkRowCounts(BatchImpl.java:314)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:278)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.PreparedStatementGroupSingleTable.forEachStatement(PreparedStatementGroupSingleTable.java:59)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.performExecution(BatchImpl.java:260)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.execute(BatchImpl.java:239)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.executeBatch(JdbcCoordinatorImpl.java:188)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:659)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1415)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:496)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2325)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1988)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:561)\r\n\t... 31 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.6169074-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"d01bbf05-4064-43bc-ac6f-5c151ba3b3d7","message":"Fetching order by ID: 01K5VRK7CZ6AERTMDBWA62WQBQ - Correlation ID: 222b85e7-91fe-475b-b279-15086518885f","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.6241038-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"d01bbf05-4064-43bc-ac6f-5c151ba3b3d7","message":"Order retrieved successfully - ID: 01K5VRK7CZ6AERTMDBWA62WQBQ, Status: PROCESSED, Correlation ID: 222b85e7-91fe-475b-b279-15086518885f","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.6304117-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT]: OrderEventConsumptionIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.6314994-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.6679902-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-4","correlationId":"9ae37ad4-9eae-4d44-8ec7-99ba914f0639","message":"Processing new order request - Correlation ID: 2632808d-c460-49fd-99db-e4960e3f9bb0, Customer: customer-event-consumer, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.6763288-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"9ae37ad4-9eae-4d44-8ec7-99ba914f0639","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.6763288-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"9ae37ad4-9eae-4d44-8ec7-99ba914f0639","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.6769263-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"9ae37ad4-9eae-4d44-8ec7-99ba914f0639","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRK7GMZ9GMVYVD3V9Z56VW","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.6852477-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-4","correlationId":"9ae37ad4-9eae-4d44-8ec7-99ba914f0639","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.serializer.SerializationException: Could not read JSON:Unexpected token (START_OBJECT), expected VALUE_STRING: need String, Number of Boolean value that contains type id (for subtype of java.lang.Object)\n at [Source: (byte[])\"[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coor\"[truncated 96 bytes]; line: 1, column: 2] \r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:292)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:261)\r\n\tat org.springframework.data.redis.core.AbstractOperations.deserializeValue(AbstractOperations.java:360)\r\n\tat org.springframework.data.redis.core.AbstractOperations$ValueDeserializingRedisCallback.doInRedis(AbstractOperations.java:62)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:406)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:174)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: com.fasterxml.jackson.databind.exc.MismatchedInputException: Unexpected token (START_OBJECT), expected VALUE_STRING: need String, Number of Boolean value that contains type id (for subtype of java.lang.Object)\n at [Source: (byte[])\"[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coor\"[truncated 96 bytes]; line: 1, column: 2]\r\n\tat com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:59)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.wrongTokenException(DeserializationContext.java:1950)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.reportWrongTokenException(DeserializationContext.java:1684)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._locateTypeId(AsArrayTypeDeserializer.java:166)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._deserialize(AsArrayTypeDeserializer.java:96)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer.deserializeTypedFromArray(AsArrayTypeDeserializer.java:53)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromAny(AsPropertyTypeDeserializer.java:238)\r\n\tat com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR.deserializeWithType(UntypedObjectDeserializerNR.java:115)\r\n\tat com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:74)\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4825)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3874)\r\n\tat org.springframework.data.redis.serializer.JacksonObjectReader.lambda$create$0(JacksonObjectReader.java:54)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:289)\r\n\t... 82 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.6918541-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-4","correlationId":"9ae37ad4-9eae-4d44-8ec7-99ba914f0639","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.6918541-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-4","correlationId":"9ae37ad4-9eae-4d44-8ec7-99ba914f0639","message":"CD selecionado para item EVT-CONSUME-1 pedido 01K5VRK7GMZ9GMVYVD3V9Z56VW -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.6946552-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"9ae37ad4-9eae-4d44-8ec7-99ba914f0639","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.6946552-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"9ae37ad4-9eae-4d44-8ec7-99ba914f0639","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.695174-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"9ae37ad4-9eae-4d44-8ec7-99ba914f0639","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRK7GMZ9GMVYVD3V9Z56VW","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.6994841-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-4","correlationId":"9ae37ad4-9eae-4d44-8ec7-99ba914f0639","message":"Order processed successfully - ID: 01K5VRK7GMZ9GMVYVD3V9Z56VW, Status: PROCESSED, Correlation ID: 2632808d-c460-49fd-99db-e4960e3f9bb0","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.7005755-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRK7GMZ9GMVYVD3V9Z56VW","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.7021347-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:52830]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9-2\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.7047517-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRK7GMZ9GMVYVD3V9Z56VW from event: Failed to process order [01K5VRK7GMZ9GMVYVD3V9Z56VW]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRK7GMZ9GMVYVD3V9Z56VW]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.7057774-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.7057774-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.7057774-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758647131705","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.7067922-03:00","level":"INFO","logger":"o.a.k.clients.consumer.KafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9-2, groupId=order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.7103218-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9-2, groupId=order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9] Cluster ID: W6vCOYt8Se2HbWmhbF84Ew","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.7103218-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9-2, groupId=order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9] Discovered group coordinator localhost:52830 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.7113225-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9-2, groupId=order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.7144726-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9-2, groupId=order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9] Request joining group due to: need to re-join with the given member-id: consumer-order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9-2-84a95a77-2972-4158-b0bf-752d11b8ec98","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.7150394-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9-2, groupId=order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.7150394-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9-2, groupId=order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.7183704-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9-2, groupId=order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9] Successfully joined group with generation Generation{generationId=1, memberId='consumer-order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9-2-84a95a77-2972-4158-b0bf-752d11b8ec98', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.7189254-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9-2, groupId=order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9] Finished assignment for group at generation 1: {consumer-order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9-2-84a95a77-2972-4158-b0bf-752d11b8ec98=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.7221498-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9-2, groupId=order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9] Successfully synced group in generation Generation{generationId=1, memberId='consumer-order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9-2-84a95a77-2972-4158-b0bf-752d11b8ec98', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.7227106-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9-2, groupId=order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.7227106-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9-2, groupId=order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.7238131-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9-2, groupId=order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.7277605-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9-2, groupId=order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:52830 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.7403034-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9-2, groupId=order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.7408243-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9-2, groupId=order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9] Member consumer-order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9-2-84a95a77-2972-4158-b0bf-752d11b8ec98 sending LeaveGroup request to coordinator localhost:52830 (id: 2147483646 rack: null) due to the consumer is being closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.7428507-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9-2, groupId=order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:31.7432554-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9-2, groupId=order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.1964034-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.1969642-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.1969642-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.1998332-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"App info kafka.consumer for consumer-order-events-test-group-5a94b2fb-c496-4068-823f-3d7b3f7dd8d9-2 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.2100077-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventPublishingIT]: OrderEventPublishingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.210606-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventPublishingIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.249129-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"3a11c3f4-72b7-42ef-a487-1b3a57f2cafc","message":"Processing new order request - Correlation ID: 3af40623-edc5-4b26-bf05-2d38931c9076, Customer: customer-events, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.2577982-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"3a11c3f4-72b7-42ef-a487-1b3a57f2cafc","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.2583214-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"3a11c3f4-72b7-42ef-a487-1b3a57f2cafc","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.2583214-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"3a11c3f4-72b7-42ef-a487-1b3a57f2cafc","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRK82SQY2R9B2CGGM41V1K","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.2691847-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-8","correlationId":"3a11c3f4-72b7-42ef-a487-1b3a57f2cafc","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.serializer.SerializationException: Could not read JSON:Unexpected token (START_OBJECT), expected VALUE_STRING: need String, Number of Boolean value that contains type id (for subtype of java.lang.Object)\n at [Source: (byte[])\"[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coor\"[truncated 96 bytes]; line: 1, column: 2] \r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:292)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:261)\r\n\tat org.springframework.data.redis.core.AbstractOperations.deserializeValue(AbstractOperations.java:360)\r\n\tat org.springframework.data.redis.core.AbstractOperations$ValueDeserializingRedisCallback.doInRedis(AbstractOperations.java:62)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:406)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:174)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: com.fasterxml.jackson.databind.exc.MismatchedInputException: Unexpected token (START_OBJECT), expected VALUE_STRING: need String, Number of Boolean value that contains type id (for subtype of java.lang.Object)\n at [Source: (byte[])\"[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coor\"[truncated 96 bytes]; line: 1, column: 2]\r\n\tat com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:59)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.wrongTokenException(DeserializationContext.java:1950)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.reportWrongTokenException(DeserializationContext.java:1684)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._locateTypeId(AsArrayTypeDeserializer.java:166)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._deserialize(AsArrayTypeDeserializer.java:96)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer.deserializeTypedFromArray(AsArrayTypeDeserializer.java:53)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromAny(AsPropertyTypeDeserializer.java:238)\r\n\tat com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR.deserializeWithType(UntypedObjectDeserializerNR.java:115)\r\n\tat com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:74)\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4825)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3874)\r\n\tat org.springframework.data.redis.serializer.JacksonObjectReader.lambda$create$0(JacksonObjectReader.java:54)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:289)\r\n\t... 82 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.2745206-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-8","correlationId":"3a11c3f4-72b7-42ef-a487-1b3a57f2cafc","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.2750878-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-8","correlationId":"3a11c3f4-72b7-42ef-a487-1b3a57f2cafc","message":"CD selecionado para item EVT123 pedido 01K5VRK82SQY2R9B2CGGM41V1K -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.2777807-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"3a11c3f4-72b7-42ef-a487-1b3a57f2cafc","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.2777807-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"3a11c3f4-72b7-42ef-a487-1b3a57f2cafc","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.2784216-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"3a11c3f4-72b7-42ef-a487-1b3a57f2cafc","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRK82SQY2R9B2CGGM41V1K","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.2816605-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"3a11c3f4-72b7-42ef-a487-1b3a57f2cafc","message":"Order processed successfully - ID: 01K5VRK82SQY2R9B2CGGM41V1K, Status: PROCESSED, Correlation ID: 3af40623-edc5-4b26-bf05-2d38931c9076","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.2821817-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRK82SQY2R9B2CGGM41V1K","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.2876605-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRK82SQY2R9B2CGGM41V1K from event: Failed to process order [01K5VRK82SQY2R9B2CGGM41V1K]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRK82SQY2R9B2CGGM41V1K]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.2889016-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderFlowIT]: OrderFlowIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.2904795-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderFlowIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.3265547-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"dd45edc1-62d6-4322-bc08-b5500251a2e8","message":"Processing new order request - Correlation ID: dd45edc1-62d6-4322-bc08-b5500251a2e8, Customer: customer-1, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.3335084-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"dd45edc1-62d6-4322-bc08-b5500251a2e8","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.3335084-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"dd45edc1-62d6-4322-bc08-b5500251a2e8","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.3340358-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"dd45edc1-62d6-4322-bc08-b5500251a2e8","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRK856DB1TWZTC551KTS1Z","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.3420385-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-5","correlationId":"dd45edc1-62d6-4322-bc08-b5500251a2e8","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.serializer.SerializationException: Could not read JSON:Unexpected token (START_OBJECT), expected VALUE_STRING: need String, Number of Boolean value that contains type id (for subtype of java.lang.Object)\n at [Source: (byte[])\"[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coor\"[truncated 96 bytes]; line: 1, column: 2] \r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:292)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:261)\r\n\tat org.springframework.data.redis.core.AbstractOperations.deserializeValue(AbstractOperations.java:360)\r\n\tat org.springframework.data.redis.core.AbstractOperations$ValueDeserializingRedisCallback.doInRedis(AbstractOperations.java:62)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:406)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:174)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: com.fasterxml.jackson.databind.exc.MismatchedInputException: Unexpected token (START_OBJECT), expected VALUE_STRING: need String, Number of Boolean value that contains type id (for subtype of java.lang.Object)\n at [Source: (byte[])\"[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coor\"[truncated 96 bytes]; line: 1, column: 2]\r\n\tat com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:59)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.wrongTokenException(DeserializationContext.java:1950)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.reportWrongTokenException(DeserializationContext.java:1684)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._locateTypeId(AsArrayTypeDeserializer.java:166)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._deserialize(AsArrayTypeDeserializer.java:96)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer.deserializeTypedFromArray(AsArrayTypeDeserializer.java:53)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromAny(AsPropertyTypeDeserializer.java:238)\r\n\tat com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR.deserializeWithType(UntypedObjectDeserializerNR.java:115)\r\n\tat com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:74)\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4825)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3874)\r\n\tat org.springframework.data.redis.serializer.JacksonObjectReader.lambda$create$0(JacksonObjectReader.java:54)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:289)\r\n\t... 82 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.3474747-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-5","correlationId":"dd45edc1-62d6-4322-bc08-b5500251a2e8","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.3474747-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-5","correlationId":"dd45edc1-62d6-4322-bc08-b5500251a2e8","message":"CD selecionado para item ABC123 pedido 01K5VRK856DB1TWZTC551KTS1Z -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.350474-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"dd45edc1-62d6-4322-bc08-b5500251a2e8","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.350474-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"dd45edc1-62d6-4322-bc08-b5500251a2e8","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.3510343-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"dd45edc1-62d6-4322-bc08-b5500251a2e8","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRK856DB1TWZTC551KTS1Z","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.3548324-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"dd45edc1-62d6-4322-bc08-b5500251a2e8","message":"Order processed successfully - ID: 01K5VRK856DB1TWZTC551KTS1Z, Status: PROCESSED, Correlation ID: dd45edc1-62d6-4322-bc08-b5500251a2e8","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.3587468-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRK856DB1TWZTC551KTS1Z","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.3592818-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"7d78864e-acc8-4f1e-9865-1a7cfd9feb89","message":"Fetching order by ID: 01K5VRK856DB1TWZTC551KTS1Z - Correlation ID: b52310dd-26c0-484e-88b5-f6029925612a","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.3631901-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"7d78864e-acc8-4f1e-9865-1a7cfd9feb89","message":"Order retrieved successfully - ID: 01K5VRK856DB1TWZTC551KTS1Z, Status: PROCESSED, Correlation ID: b52310dd-26c0-484e-88b5-f6029925612a","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.3631901-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRK856DB1TWZTC551KTS1Z from event: Failed to process order [01K5VRK856DB1TWZTC551KTS1Z]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRK856DB1TWZTC551KTS1Z]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.5770042-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.577601-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions revoked: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.5782278-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Member consumer-orders-service-it-consumer-1-e24a2ae2-d0d7-42b9-8d86-f8e3b96c2d3b sending LeaveGroup request to coordinator localhost:52830 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.5782278-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.5782278-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.5782278-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Unsubscribed all topics or patterns and assigned partitions","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.5788853-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.5788853-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.6181202-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 2147483646 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.6181202-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.6193535-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.6193535-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.6199573-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight FETCH request with correlation id 26 due to node 1 being disconnected (elapsed time since creation: 261ms, elapsed time since send: 261ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.6199573-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight FETCH request with correlation id 28 due to node 1 being disconnected (elapsed time since creation: 37ms, elapsed time since send: 38ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.6199573-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight METADATA request with correlation id 29 due to node 1 being disconnected (elapsed time since creation: 1ms, elapsed time since send: 1ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.6199573-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.6199573-03:00","level":"INFO","logger":"o.a.k.clients.FetchSessionHandler","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error sending fetch request (sessionId=997159519, epoch=FINAL) to node 1:","exception":"org.apache.kafka.common.errors.DisconnectException: null\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.6215396-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.6215396-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.6215396-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.624513-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"App info kafka.consumer for consumer-orders-service-it-consumer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.6255369-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: Consumer stopped","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.7233221-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.7238581-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cancelled in-flight API_VERSIONS request with correlation id 13 due to node 1 being disconnected (elapsed time since creation: 1ms, elapsed time since send: 1ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.7558479-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"SpringApplicationShutdownHook","message":"[Producer clientId=orders-service-producer-1] Closing the Kafka producer with timeoutMillis = 30000 ms.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.7579845-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.7579845-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.7585041-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.7590535-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"SpringApplicationShutdownHook","message":"App info kafka.producer for orders-service-producer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.7681309-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"SpringApplicationShutdownHook","message":"Closing JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.7692845-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown initiated...","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:32.7716896-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown completed.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:42.4196287-03:00","level":"INFO","logger":"o.h.validator.internal.util.Version","thread":"background-preinit","message":"HV000001: Hibernate Validator 8.0.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:42.4835851-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Starting DistributionCenterCachingIT using Java 21.0.8 with PID 716 (started by ciror in Z:\\projects\\meli-test-mktplace)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:42.4845724-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"The following 1 profile is active: \"integration-test\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:43.365962-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:43.366962-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:43.5175999-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 146 ms. Found 1 JPA repository interface.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:44.1181606-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:44.1191606-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data Redis repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:44.1593827-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationExtensionSupport","thread":"main","message":"Spring Data Redis - Could not safely identify store assignment for repository candidate interface br.com.ml.mktplace.orders.adapter.outbound.persistence.repository.JpaOrderEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:44.1603837-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 24 ms. Found 0 Redis repository interfaces.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:45.5247129-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat initialized with port 0 (http)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:45.5368236-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Initializing ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:45.5383409-03:00","level":"INFO","logger":"o.a.catalina.core.StandardService","thread":"main","message":"Starting service [Tomcat]","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:45.5403491-03:00","level":"INFO","logger":"o.a.catalina.core.StandardEngine","thread":"main","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:45.6336665-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"main","message":"Initializing Spring embedded WebApplicationContext","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:45.6336665-03:00","level":"INFO","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","thread":"main","message":"Root WebApplicationContext: initialization completed in 3120 ms","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:46.1055104-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Starting...","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:46.3894574-03:00","level":"INFO","logger":"com.zaxxer.hikari.pool.HikariPool","thread":"main","message":"OrdersHikariPool - Added connection org.postgresql.jdbc.PgConnection@4cf20dd","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:46.3941899-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Start completed.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:46.5982405-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"Flyway Community Edition 9.22.3 by Redgate","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:46.5987901-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"See release notes here: https://rd.gt/416ObMi","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:46.5987901-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:46.635017-03:00","level":"INFO","logger":"org.flywaydb.core.FlywayExecutor","thread":"main","message":"Database: jdbc:postgresql://localhost:52873/mktplace_orders (PostgreSQL 16.4)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:46.6470348-03:00","level":"WARN","logger":"o.f.c.i.database.base.Database","thread":"main","message":"Flyway upgrade recommended: PostgreSQL 16.4 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:46.6955175-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Schema history table \"public\".\"flyway_schema_history\" does not exist yet","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:46.7015519-03:00","level":"INFO","logger":"o.f.core.internal.command.DbValidate","thread":"main","message":"Successfully validated 2 migrations (execution time 00:00.036s)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:46.7222708-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Creating Schema History table \"public\".\"flyway_schema_history\" ...","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:46.7668441-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Current version of schema \"public\": << Empty Schema >>","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:46.7822618-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"1 - initial schema\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:46.7918874-03:00","level":"WARN","logger":"o.f.c.i.s.DefaultSqlScriptExecutor","thread":"main","message":"DB: extension \"postgis\" already exists, skipping (SQL State: 42710 - Error Code: 0)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:46.8367584-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"2 - sample distribution centers\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:46.8564647-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Successfully applied 2 migrations to schema \"public\", now at version v2 (execution time 00:00.039s)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:46.9315529-03:00","level":"INFO","logger":"o.h.jpa.internal.util.LogHelper","thread":"main","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:46.9935738-03:00","level":"INFO","logger":"org.hibernate.Version","thread":"main","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:47.0044336-03:00","level":"INFO","logger":"o.h.s.integration.SpatialService","thread":"main","message":"HHH80000001: hibernate-spatial integration enabled : true","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:47.0368937-03:00","level":"INFO","logger":"o.h.c.i.RegionFactoryInitiator","thread":"main","message":"HHH000026: Second-level cache disabled","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:47.1758131-03:00","level":"WARN","logger":"org.hibernate.orm.deprecation","thread":"main","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:47.2031675-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:47.4558899-03:00","level":"INFO","logger":"o.s.o.j.p.SpringPersistenceUnitInfo","thread":"main","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:47.4881078-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:47.9429292-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000004: hibernate-spatial adding function contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:48.5622699-03:00","level":"INFO","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator","thread":"main","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:48.5788476-03:00","level":"INFO","logger":"o.hibernate.orm.connections.access","thread":"main","message":"HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@7cdf9984] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:48.6074807-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"main","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:49.191216-03:00","level":"INFO","logger":"o.s.d.j.r.query.QueryEnhancerFactory","thread":"main","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:50.7401028-03:00","level":"WARN","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration","thread":"main","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:52.0718685-03:00","level":"INFO","logger":"o.s.b.a.e.web.EndpointLinksResolver","thread":"main","message":"Exposing 5 endpoint(s) beneath base path '/actuator'","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:52.1967645-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Starting ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:52.2122681-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat started on port 52887 (http) with context path '/api'","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:52.2481049-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:52878]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-orders-service-it-consumer-1\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = orders-service-it-consumer\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:52.4092966-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:52.4092966-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:52.4092966-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758647152407","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:52.4157008-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:52.4313005-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Started DistributionCenterCachingIT in 10.679 seconds (process running for 18.959)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:52.9128331-03:00","level":"WARN","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error while fetching metadata with correlation id 2 : {orders.events=LEADER_NOT_AVAILABLE}","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:52.9158994-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cluster ID: -RnQAW78R8SQe6HiNbrxpg","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:53.0207076-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Discovered group coordinator localhost:52878 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:53.0255458-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:53.0483356-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: need to re-join with the given member-id: consumer-orders-service-it-consumer-1-fa6ab444-acc4-4540-98e5-68ee22b95541","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:53.0489442-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:53.0489442-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:53.0619178-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully joined group with generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-fa6ab444-acc4-4540-98e5-68ee22b95541', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:53.0664503-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Finished assignment for group at generation 1: {consumer-orders-service-it-consumer-1-fa6ab444-acc4-4540-98e5-68ee22b95541=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:53.0989991-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully synced group in generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-fa6ab444-acc4-4540-98e5-68ee22b95541', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:53.100134-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:53.1018501-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:53.1147519-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:53.1265522-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:52878 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:53.1265522-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions assigned: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:54.0298439-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"http-nio-auto-1-exec-1","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:54.0308441-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-1","message":"Initializing Servlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:54.0308441-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-1","message":"Completed initialization in 0 ms","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:54.1950288-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"2f5acd38-c363-4517-9bad-a93a684095ae","message":"Processing new order request - Correlation ID: 79b18191-3944-43b8-82da-551c6512f848, Customer: customer-cache, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:54.686628-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"2f5acd38-c363-4517-9bad-a93a684095ae","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:54.686628-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"2f5acd38-c363-4517-9bad-a93a684095ae","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:54.7133945-03:00","level":"INFO","logger":"o.a.k.c.producer.ProducerConfig","thread":"http-nio-auto-1-exec-1","correlationId":"2f5acd38-c363-4517-9bad-a93a684095ae","message":"ProducerConfig values: \r\n\tacks = -1\r\n\tauto.include.jmx.reporter = true\r\n\tbatch.size = 16384\r\n\tbootstrap.servers = [PLAINTEXT://localhost:52878]\r\n\tbuffer.memory = 33554432\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = orders-service-producer-1\r\n\tcompression.type = snappy\r\n\tconnections.max.idle.ms = 540000\r\n\tdelivery.timeout.ms = 120000\r\n\tenable.idempotence = true\r\n\tinterceptor.classes = []\r\n\tkey.serializer = class org.apache.kafka.common.serialization.StringSerializer\r\n\tlinger.ms = 10\r\n\tmax.block.ms = 60000\r\n\tmax.in.flight.requests.per.connection = 5\r\n\tmax.request.size = 1048576\r\n\tmetadata.max.age.ms = 300000\r\n\tmetadata.max.idle.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartitioner.adaptive.partitioning.enable = true\r\n\tpartitioner.availability.timeout.ms = 0\r\n\tpartitioner.class = null\r\n\tpartitioner.ignore.keys = false\r\n\treceive.buffer.bytes = 32768\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretries = 3\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\ttransaction.timeout.ms = 60000\r\n\ttransactional.id = null\r\n\tvalue.serializer = class org.springframework.kafka.support.serializer.JsonSerializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:54.7369213-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"http-nio-auto-1-exec-1","correlationId":"2f5acd38-c363-4517-9bad-a93a684095ae","message":"[Producer clientId=orders-service-producer-1] Instantiated an idempotent producer.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:54.7613413-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"2f5acd38-c363-4517-9bad-a93a684095ae","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:54.7623406-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"2f5acd38-c363-4517-9bad-a93a684095ae","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:54.7623406-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"2f5acd38-c363-4517-9bad-a93a684095ae","message":"Kafka startTimeMs: 1758647154761","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:54.7720705-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cluster ID: -RnQAW78R8SQe6HiNbrxpg","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:54.7848164-03:00","level":"INFO","logger":"o.a.k.c.p.i.TransactionManager","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] ProducerId set to 0 with epoch 0","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:54.9374538-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"2f5acd38-c363-4517-9bad-a93a684095ae","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRKXH7VP7RY7FTEN3MHG5W","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.0053479-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRKXH7VP7RY7FTEN3MHG5W","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.426243-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.h.HttpDistributionCenterService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to fetch all distribution centers","exception":"org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.426243-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.h.HttpDistributionCenterService","thread":"http-nio-auto-1-exec-1","correlationId":"2f5acd38-c363-4517-9bad-a93a684095ae","message":"Failed to fetch all distribution centers","exception":"org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.4329113-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.failed - Event: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.4329113-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"2f5acd38-c363-4517-9bad-a93a684095ae","message":"Publishing event to topic: order.failed - Event: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.4329113-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.4329113-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"2f5acd38-c363-4517-9bad-a93a684095ae","message":"Event published successfully: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.4339189-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRKXH7VP7RY7FTEN3MHG5W","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.4344215-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"2f5acd38-c363-4517-9bad-a93a684095ae","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRKXH7VP7RY7FTEN3MHG5W","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.4387825-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRKXH7VP7RY7FTEN3MHG5W from event: Failed to process order [01K5VRKXH7VP7RY7FTEN3MHG5W]: Distribution center service unavailable","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRKXH7VP7RY7FTEN3MHG5W]: Distribution center service unavailable\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:165)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: br.com.ml.mktplace.orders.domain.model.ExternalServiceException: External service error [DistributionCenterService]: Failed to fetch all distribution centers\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:125)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\t... 38 common frames omitted\r\nCaused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\t... 40 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.4387825-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"2f5acd38-c363-4517-9bad-a93a684095ae","message":"Failed to process order - Correlation ID: 79b18191-3944-43b8-82da-551c6512f848","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRKXH7VP7RY7FTEN3MHG5W]: Distribution center service unavailable\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:165)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: br.com.ml.mktplace.orders.domain.model.ExternalServiceException: External service error [DistributionCenterService]: Failed to fetch all distribution centers\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:125)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\t... 72 common frames omitted\r\nCaused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\t... 74 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.4432252-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.r.h.GlobalExceptionHandler","thread":"http-nio-auto-1-exec-1","correlationId":"2f5acd38-c363-4517-9bad-a93a684095ae","message":"Order processing error - Correlation ID: 8818cc46-8668-459e-b5bf-86cf7f5d62ed, Order ID: 01K5VRKXH7VP7RY7FTEN3MHG5W, Message: Failed to process order [01K5VRKXH7VP7RY7FTEN3MHG5W]: Distribution center service unavailable","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRKXH7VP7RY7FTEN3MHG5W]: Distribution center service unavailable\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:165)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: br.com.ml.mktplace.orders.domain.model.ExternalServiceException: External service error [DistributionCenterService]: Failed to fetch all distribution centers\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:125)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\t... 72 common frames omitted\r\nCaused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\t... 74 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.5584182-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT]: OrderEndToEndProcessingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.561926-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.6538135-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"518b57ad-00fb-4c39-83e0-eb2bb6627c07","message":"Processing new order request - Correlation ID: 518b57ad-00fb-4c39-83e0-eb2bb6627c07, Customer: customer-async-proc, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.661049-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"518b57ad-00fb-4c39-83e0-eb2bb6627c07","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.661049-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"518b57ad-00fb-4c39-83e0-eb2bb6627c07","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.6615818-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"518b57ad-00fb-4c39-83e0-eb2bb6627c07","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRKYY62WCNAN129J7XTQEB","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.6791844-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRKYY62WCNAN129J7XTQEB","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.6877308-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-2","correlationId":"518b57ad-00fb-4c39-83e0-eb2bb6627c07","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.688259-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-2","correlationId":"518b57ad-00fb-4c39-83e0-eb2bb6627c07","message":"CD selecionado para item ASYNC-PROC-1 pedido 01K5VRKYY62WCNAN129J7XTQEB -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.6909797-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"518b57ad-00fb-4c39-83e0-eb2bb6627c07","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.6909797-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"518b57ad-00fb-4c39-83e0-eb2bb6627c07","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.6915487-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"518b57ad-00fb-4c39-83e0-eb2bb6627c07","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRKYY62WCNAN129J7XTQEB","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.6920761-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.serializer.SerializationException: Could not read JSON:Unexpected token (START_OBJECT), expected VALUE_STRING: need String, Number of Boolean value that contains type id (for subtype of java.lang.Object)\n at [Source: (byte[])\"[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coor\"[truncated 96 bytes]; line: 1, column: 2] \r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:292)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:261)\r\n\tat org.springframework.data.redis.core.AbstractOperations.deserializeValue(AbstractOperations.java:360)\r\n\tat org.springframework.data.redis.core.AbstractOperations$ValueDeserializingRedisCallback.doInRedis(AbstractOperations.java:62)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:406)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:174)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: com.fasterxml.jackson.databind.exc.MismatchedInputException: Unexpected token (START_OBJECT), expected VALUE_STRING: need String, Number of Boolean value that contains type id (for subtype of java.lang.Object)\n at [Source: (byte[])\"[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coor\"[truncated 96 bytes]; line: 1, column: 2]\r\n\tat com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:59)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.wrongTokenException(DeserializationContext.java:1950)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.reportWrongTokenException(DeserializationContext.java:1684)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._locateTypeId(AsArrayTypeDeserializer.java:166)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._deserialize(AsArrayTypeDeserializer.java:96)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer.deserializeTypedFromArray(AsArrayTypeDeserializer.java:53)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromAny(AsPropertyTypeDeserializer.java:238)\r\n\tat com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR.deserializeWithType(UntypedObjectDeserializerNR.java:115)\r\n\tat com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:74)\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4825)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3874)\r\n\tat org.springframework.data.redis.serializer.JacksonObjectReader.lambda$create$0(JacksonObjectReader.java:54)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:289)\r\n\t... 48 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.6981417-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.6986629-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item ASYNC-PROC-1 pedido 01K5VRKYY62WCNAN129J7XTQEB -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.7007688-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.7013237-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.7018501-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRKYY62WCNAN129J7XTQEB","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.7034822-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"518b57ad-00fb-4c39-83e0-eb2bb6627c07","message":"Order processed successfully - ID: 01K5VRKYY62WCNAN129J7XTQEB, Status: PROCESSED, Correlation ID: 518b57ad-00fb-4c39-83e0-eb2bb6627c07","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.7074028-03:00","level":"INFO","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100503: On release of batch it still contained JDBC statements","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.7079844-03:00","level":"ERROR","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100501: Exception executing batch [org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?], SQL: delete from order_items where id=?","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.7129575-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRKYY62WCNAN129J7XTQEB from event: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?","exception":"org.springframework.orm.ObjectOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:328)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:565)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:669)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:419)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:67)\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:54)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.checkRowCounts(BatchImpl.java:314)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:278)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.PreparedStatementGroupSingleTable.forEachStatement(PreparedStatementGroupSingleTable.java:59)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.performExecution(BatchImpl.java:260)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.execute(BatchImpl.java:239)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.executeBatch(JdbcCoordinatorImpl.java:188)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:659)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1415)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:496)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2325)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1988)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:561)\r\n\t... 31 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.715685-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"f6b7e055-5dad-4d72-af69-981bd7df544d","message":"Fetching order by ID: 01K5VRKYY62WCNAN129J7XTQEB - Correlation ID: 7b703798-ab31-4741-89c9-2f60ae512107","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.7226922-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"f6b7e055-5dad-4d72-af69-981bd7df544d","message":"Order retrieved successfully - ID: 01K5VRKYY62WCNAN129J7XTQEB, Status: PROCESSED, Correlation ID: 7b703798-ab31-4741-89c9-2f60ae512107","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.7303876-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT]: OrderEventConsumptionIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.7319725-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.7680741-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-4","correlationId":"23ee841a-11a3-4ee7-8597-9f9138de3060","message":"Processing new order request - Correlation ID: be666339-1348-4e02-86c7-0054397a6507, Customer: customer-event-consumer, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.7743472-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"23ee841a-11a3-4ee7-8597-9f9138de3060","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.7743472-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"23ee841a-11a3-4ee7-8597-9f9138de3060","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.775005-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"23ee841a-11a3-4ee7-8597-9f9138de3060","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRKZ1R44R1K7EWR9EK7ZGW","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.782571-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-4","correlationId":"23ee841a-11a3-4ee7-8597-9f9138de3060","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.serializer.SerializationException: Could not read JSON:Unexpected token (START_OBJECT), expected VALUE_STRING: need String, Number of Boolean value that contains type id (for subtype of java.lang.Object)\n at [Source: (byte[])\"[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coor\"[truncated 96 bytes]; line: 1, column: 2] \r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:292)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:261)\r\n\tat org.springframework.data.redis.core.AbstractOperations.deserializeValue(AbstractOperations.java:360)\r\n\tat org.springframework.data.redis.core.AbstractOperations$ValueDeserializingRedisCallback.doInRedis(AbstractOperations.java:62)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:406)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:174)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: com.fasterxml.jackson.databind.exc.MismatchedInputException: Unexpected token (START_OBJECT), expected VALUE_STRING: need String, Number of Boolean value that contains type id (for subtype of java.lang.Object)\n at [Source: (byte[])\"[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coor\"[truncated 96 bytes]; line: 1, column: 2]\r\n\tat com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:59)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.wrongTokenException(DeserializationContext.java:1950)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.reportWrongTokenException(DeserializationContext.java:1684)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._locateTypeId(AsArrayTypeDeserializer.java:166)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._deserialize(AsArrayTypeDeserializer.java:96)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer.deserializeTypedFromArray(AsArrayTypeDeserializer.java:53)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromAny(AsPropertyTypeDeserializer.java:238)\r\n\tat com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR.deserializeWithType(UntypedObjectDeserializerNR.java:115)\r\n\tat com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:74)\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4825)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3874)\r\n\tat org.springframework.data.redis.serializer.JacksonObjectReader.lambda$create$0(JacksonObjectReader.java:54)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:289)\r\n\t... 82 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.7888598-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-4","correlationId":"23ee841a-11a3-4ee7-8597-9f9138de3060","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.7893865-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-4","correlationId":"23ee841a-11a3-4ee7-8597-9f9138de3060","message":"CD selecionado para item EVT-CONSUME-1 pedido 01K5VRKZ1R44R1K7EWR9EK7ZGW -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.7923466-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"23ee841a-11a3-4ee7-8597-9f9138de3060","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.7928649-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"23ee841a-11a3-4ee7-8597-9f9138de3060","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.7928649-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"23ee841a-11a3-4ee7-8597-9f9138de3060","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRKZ1R44R1K7EWR9EK7ZGW","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.796638-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-4","correlationId":"23ee841a-11a3-4ee7-8597-9f9138de3060","message":"Order processed successfully - ID: 01K5VRKZ1R44R1K7EWR9EK7ZGW, Status: PROCESSED, Correlation ID: be666339-1348-4e02-86c7-0054397a6507","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.7992904-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:52878]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8-2\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.8008794-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRKZ1R44R1K7EWR9EK7ZGW","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.8040404-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.8045627-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.8045627-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758647155804","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.8051328-03:00","level":"INFO","logger":"o.a.k.clients.consumer.KafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8-2, groupId=order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.8072533-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRKZ1R44R1K7EWR9EK7ZGW from event: Failed to process order [01K5VRKZ1R44R1K7EWR9EK7ZGW]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRKZ1R44R1K7EWR9EK7ZGW]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.8099305-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8-2, groupId=order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8] Cluster ID: -RnQAW78R8SQe6HiNbrxpg","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.8099305-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8-2, groupId=order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8] Discovered group coordinator localhost:52878 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.8115699-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8-2, groupId=order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.8148333-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8-2, groupId=order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8] Request joining group due to: need to re-join with the given member-id: consumer-order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8-2-0df0370e-e8c9-4437-acec-4697bb5a9a08","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.8148333-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8-2, groupId=order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.8148333-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8-2, groupId=order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.8191668-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8-2, groupId=order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8] Successfully joined group with generation Generation{generationId=1, memberId='consumer-order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8-2-0df0370e-e8c9-4437-acec-4697bb5a9a08', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.8197031-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8-2, groupId=order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8] Finished assignment for group at generation 1: {consumer-order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8-2-0df0370e-e8c9-4437-acec-4697bb5a9a08=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.8230368-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8-2, groupId=order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8] Successfully synced group in generation Generation{generationId=1, memberId='consumer-order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8-2-0df0370e-e8c9-4437-acec-4697bb5a9a08', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.8235618-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8-2, groupId=order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.8235618-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8-2, groupId=order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.8251526-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8-2, groupId=order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.830504-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8-2, groupId=order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:52878 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.8441302-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8-2, groupId=order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.8446506-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8-2, groupId=order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8] Member consumer-order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8-2-0df0370e-e8c9-4437-acec-4697bb5a9a08 sending LeaveGroup request to coordinator localhost:52878 (id: 2147483646 rack: null) due to the consumer is being closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.8453903-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8-2, groupId=order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:55.8453903-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8-2, groupId=order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.3007733-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.3007733-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.3007733-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.3031453-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"App info kafka.consumer for consumer-order-events-test-group-a814cb6f-965b-4e69-a05b-95a9cde551f8-2 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.3126045-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventPublishingIT]: OrderEventPublishingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.3142394-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventPublishingIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.3405593-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"bf9b0ab5-e3b9-41a2-a8e0-563cc41fd6c9","message":"Processing new order request - Correlation ID: 41966aaf-edf1-4c89-9b9c-8e41c7d770ee, Customer: customer-events, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.3495986-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"bf9b0ab5-e3b9-41a2-a8e0-563cc41fd6c9","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.3495986-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"bf9b0ab5-e3b9-41a2-a8e0-563cc41fd6c9","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.3501938-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"bf9b0ab5-e3b9-41a2-a8e0-563cc41fd6c9","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRKZKPB5596Z3B34W7HMT0","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.3579822-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-5","correlationId":"bf9b0ab5-e3b9-41a2-a8e0-563cc41fd6c9","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.serializer.SerializationException: Could not read JSON:Unexpected token (START_OBJECT), expected VALUE_STRING: need String, Number of Boolean value that contains type id (for subtype of java.lang.Object)\n at [Source: (byte[])\"[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coor\"[truncated 96 bytes]; line: 1, column: 2] \r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:292)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:261)\r\n\tat org.springframework.data.redis.core.AbstractOperations.deserializeValue(AbstractOperations.java:360)\r\n\tat org.springframework.data.redis.core.AbstractOperations$ValueDeserializingRedisCallback.doInRedis(AbstractOperations.java:62)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:406)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:174)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: com.fasterxml.jackson.databind.exc.MismatchedInputException: Unexpected token (START_OBJECT), expected VALUE_STRING: need String, Number of Boolean value that contains type id (for subtype of java.lang.Object)\n at [Source: (byte[])\"[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coor\"[truncated 96 bytes]; line: 1, column: 2]\r\n\tat com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:59)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.wrongTokenException(DeserializationContext.java:1950)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.reportWrongTokenException(DeserializationContext.java:1684)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._locateTypeId(AsArrayTypeDeserializer.java:166)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._deserialize(AsArrayTypeDeserializer.java:96)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer.deserializeTypedFromArray(AsArrayTypeDeserializer.java:53)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromAny(AsPropertyTypeDeserializer.java:238)\r\n\tat com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR.deserializeWithType(UntypedObjectDeserializerNR.java:115)\r\n\tat com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:74)\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4825)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3874)\r\n\tat org.springframework.data.redis.serializer.JacksonObjectReader.lambda$create$0(JacksonObjectReader.java:54)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:289)\r\n\t... 82 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.3639561-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-5","correlationId":"bf9b0ab5-e3b9-41a2-a8e0-563cc41fd6c9","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.3644699-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-5","correlationId":"bf9b0ab5-e3b9-41a2-a8e0-563cc41fd6c9","message":"CD selecionado para item EVT123 pedido 01K5VRKZKPB5596Z3B34W7HMT0 -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.3668725-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"bf9b0ab5-e3b9-41a2-a8e0-563cc41fd6c9","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.3668725-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"bf9b0ab5-e3b9-41a2-a8e0-563cc41fd6c9","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.367432-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"bf9b0ab5-e3b9-41a2-a8e0-563cc41fd6c9","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRKZKPB5596Z3B34W7HMT0","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.3713082-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"bf9b0ab5-e3b9-41a2-a8e0-563cc41fd6c9","message":"Order processed successfully - ID: 01K5VRKZKPB5596Z3B34W7HMT0, Status: PROCESSED, Correlation ID: 41966aaf-edf1-4c89-9b9c-8e41c7d770ee","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.3734628-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRKZKPB5596Z3B34W7HMT0","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.3782603-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderFlowIT]: OrderFlowIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.3787795-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRKZKPB5596Z3B34W7HMT0 from event: Failed to process order [01K5VRKZKPB5596Z3B34W7HMT0]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRKZKPB5596Z3B34W7HMT0]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.3798254-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderFlowIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.4093731-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"f80acc2f-6659-4946-aa0c-a035fe5827bf","message":"Processing new order request - Correlation ID: f80acc2f-6659-4946-aa0c-a035fe5827bf, Customer: customer-1, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.4168621-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"f80acc2f-6659-4946-aa0c-a035fe5827bf","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.4168621-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"f80acc2f-6659-4946-aa0c-a035fe5827bf","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.417404-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"f80acc2f-6659-4946-aa0c-a035fe5827bf","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRKZNS03NRWDX95X8V3S5C","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.4259932-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-6","correlationId":"f80acc2f-6659-4946-aa0c-a035fe5827bf","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.serializer.SerializationException: Could not read JSON:Unexpected token (START_OBJECT), expected VALUE_STRING: need String, Number of Boolean value that contains type id (for subtype of java.lang.Object)\n at [Source: (byte[])\"[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coor\"[truncated 96 bytes]; line: 1, column: 2] \r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:292)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:261)\r\n\tat org.springframework.data.redis.core.AbstractOperations.deserializeValue(AbstractOperations.java:360)\r\n\tat org.springframework.data.redis.core.AbstractOperations$ValueDeserializingRedisCallback.doInRedis(AbstractOperations.java:62)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:406)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:174)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: com.fasterxml.jackson.databind.exc.MismatchedInputException: Unexpected token (START_OBJECT), expected VALUE_STRING: need String, Number of Boolean value that contains type id (for subtype of java.lang.Object)\n at [Source: (byte[])\"[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coor\"[truncated 96 bytes]; line: 1, column: 2]\r\n\tat com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:59)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.wrongTokenException(DeserializationContext.java:1950)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.reportWrongTokenException(DeserializationContext.java:1684)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._locateTypeId(AsArrayTypeDeserializer.java:166)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._deserialize(AsArrayTypeDeserializer.java:96)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer.deserializeTypedFromArray(AsArrayTypeDeserializer.java:53)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromAny(AsPropertyTypeDeserializer.java:238)\r\n\tat com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR.deserializeWithType(UntypedObjectDeserializerNR.java:115)\r\n\tat com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:74)\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4825)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3874)\r\n\tat org.springframework.data.redis.serializer.JacksonObjectReader.lambda$create$0(JacksonObjectReader.java:54)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:289)\r\n\t... 82 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.4314744-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-6","correlationId":"f80acc2f-6659-4946-aa0c-a035fe5827bf","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.431978-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-6","correlationId":"f80acc2f-6659-4946-aa0c-a035fe5827bf","message":"CD selecionado para item ABC123 pedido 01K5VRKZNS03NRWDX95X8V3S5C -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.4335374-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRKZNS03NRWDX95X8V3S5C","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.434565-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"f80acc2f-6659-4946-aa0c-a035fe5827bf","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.434565-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"f80acc2f-6659-4946-aa0c-a035fe5827bf","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.4350731-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"f80acc2f-6659-4946-aa0c-a035fe5827bf","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRKZNS03NRWDX95X8V3S5C","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.4388236-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"f80acc2f-6659-4946-aa0c-a035fe5827bf","message":"Order processed successfully - ID: 01K5VRKZNS03NRWDX95X8V3S5C, Status: PROCESSED, Correlation ID: f80acc2f-6659-4946-aa0c-a035fe5827bf","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.4420308-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.serializer.SerializationException: Could not read JSON:Unexpected token (START_OBJECT), expected VALUE_STRING: need String, Number of Boolean value that contains type id (for subtype of java.lang.Object)\n at [Source: (byte[])\"[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coor\"[truncated 96 bytes]; line: 1, column: 2] \r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:292)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:261)\r\n\tat org.springframework.data.redis.core.AbstractOperations.deserializeValue(AbstractOperations.java:360)\r\n\tat org.springframework.data.redis.core.AbstractOperations$ValueDeserializingRedisCallback.doInRedis(AbstractOperations.java:62)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:406)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:174)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$processOrder$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: com.fasterxml.jackson.databind.exc.MismatchedInputException: Unexpected token (START_OBJECT), expected VALUE_STRING: need String, Number of Boolean value that contains type id (for subtype of java.lang.Object)\n at [Source: (byte[])\"[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coor\"[truncated 96 bytes]; line: 1, column: 2]\r\n\tat com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:59)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.wrongTokenException(DeserializationContext.java:1950)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.reportWrongTokenException(DeserializationContext.java:1684)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._locateTypeId(AsArrayTypeDeserializer.java:166)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._deserialize(AsArrayTypeDeserializer.java:96)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer.deserializeTypedFromArray(AsArrayTypeDeserializer.java:53)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromAny(AsPropertyTypeDeserializer.java:238)\r\n\tat com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR.deserializeWithType(UntypedObjectDeserializerNR.java:115)\r\n\tat com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:74)\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4825)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3874)\r\n\tat org.springframework.data.redis.serializer.JacksonObjectReader.lambda$create$0(JacksonObjectReader.java:54)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:289)\r\n\t... 48 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.4430708-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-7","correlationId":"3b2839a7-1e3c-4ade-91d3-01d31a367b46","message":"Fetching order by ID: 01K5VRKZNS03NRWDX95X8V3S5C - Correlation ID: 56ad41f0-75c8-4738-aa9f-1511258d6fc8","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.4483524-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.4483524-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-7","correlationId":"3b2839a7-1e3c-4ade-91d3-01d31a367b46","message":"Order retrieved successfully - ID: 01K5VRKZNS03NRWDX95X8V3S5C, Status: PROCESSED, Correlation ID: 56ad41f0-75c8-4738-aa9f-1511258d6fc8","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.4488795-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item ABC123 pedido 01K5VRKZNS03NRWDX95X8V3S5C -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.4522664-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.4522664-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.4528155-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRKZNS03NRWDX95X8V3S5C","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.4570645-03:00","level":"INFO","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100503: On release of batch it still contained JDBC statements","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.4570645-03:00","level":"ERROR","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100501: Exception executing batch [org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?], SQL: delete from order_items where id=?","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.4581069-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRKZNS03NRWDX95X8V3S5C from event: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?","exception":"org.springframework.orm.ObjectOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:328)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:565)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:669)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:419)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:67)\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:54)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.checkRowCounts(BatchImpl.java:314)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:278)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.PreparedStatementGroupSingleTable.forEachStatement(PreparedStatementGroupSingleTable.java:59)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.performExecution(BatchImpl.java:260)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.execute(BatchImpl.java:239)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.executeBatch(JdbcCoordinatorImpl.java:188)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:659)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1415)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:496)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2325)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1988)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:561)\r\n\t... 31 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.6704249-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.671424-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions revoked: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.671424-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Member consumer-orders-service-it-consumer-1-fa6ab444-acc4-4540-98e5-68ee22b95541 sending LeaveGroup request to coordinator localhost:52878 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.671424-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.671424-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.671424-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Unsubscribed all topics or patterns and assigned partitions","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.6724222-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.6724222-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.9317452-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.9325571-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.9325571-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.9344527-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"App info kafka.consumer for consumer-orders-service-it-consumer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:56.9349833-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: Consumer stopped","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:57.0081445-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:57.0091906-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:57.0610791-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"SpringApplicationShutdownHook","message":"[Producer clientId=orders-service-producer-1] Closing the Kafka producer with timeoutMillis = 30000 ms.","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:57.0631835-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:57.0631835-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:57.0637035-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:57.0637035-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"SpringApplicationShutdownHook","message":"App info kafka.producer for orders-service-producer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:57.0705-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"SpringApplicationShutdownHook","message":"Closing JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:57.0720256-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown initiated...","service":"orders-service"}
{"timestamp":"2025-09-23T14:05:57.0750671-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown completed.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:04.8539096-03:00","level":"INFO","logger":"o.h.validator.internal.util.Version","thread":"background-preinit","message":"HV000001: Hibernate Validator 8.0.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:04.9080669-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Starting DistributionCenterCachingIT using Java 21.0.8 with PID 7008 (started by ciror in Z:\\projects\\meli-test-mktplace)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:04.9100759-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"The following 1 profile is active: \"integration-test\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:05.7694586-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:05.7700438-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:05.9055539-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 125 ms. Found 1 JPA repository interface.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:06.4840941-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:06.4861333-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data Redis repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:06.5282096-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationExtensionSupport","thread":"main","message":"Spring Data Redis - Could not safely identify store assignment for repository candidate interface br.com.ml.mktplace.orders.adapter.outbound.persistence.repository.JpaOrderEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:06.5292968-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 32 ms. Found 0 Redis repository interfaces.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:07.8545276-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat initialized with port 0 (http)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:07.8691978-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Initializing ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:07.8718922-03:00","level":"INFO","logger":"o.a.catalina.core.StandardService","thread":"main","message":"Starting service [Tomcat]","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:07.8718922-03:00","level":"INFO","logger":"o.a.catalina.core.StandardEngine","thread":"main","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:07.9548849-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"main","message":"Initializing Spring embedded WebApplicationContext","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:07.9558853-03:00","level":"INFO","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","thread":"main","message":"Root WebApplicationContext: initialization completed in 3009 ms","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:08.4288044-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Starting...","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:08.7474488-03:00","level":"INFO","logger":"com.zaxxer.hikari.pool.HikariPool","thread":"main","message":"OrdersHikariPool - Added connection org.postgresql.jdbc.PgConnection@56bf0270","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:08.7512408-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Start completed.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:08.9575718-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"Flyway Community Edition 9.22.3 by Redgate","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:08.9581359-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"See release notes here: https://rd.gt/416ObMi","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:08.9581359-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:08.9875001-03:00","level":"INFO","logger":"org.flywaydb.core.FlywayExecutor","thread":"main","message":"Database: jdbc:postgresql://localhost:53015/mktplace_orders (PostgreSQL 16.4)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:09.0001257-03:00","level":"WARN","logger":"o.f.c.i.database.base.Database","thread":"main","message":"Flyway upgrade recommended: PostgreSQL 16.4 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:09.0538668-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Schema history table \"public\".\"flyway_schema_history\" does not exist yet","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:09.0599461-03:00","level":"INFO","logger":"o.f.core.internal.command.DbValidate","thread":"main","message":"Successfully validated 2 migrations (execution time 00:00.040s)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:09.0817684-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Creating Schema History table \"public\".\"flyway_schema_history\" ...","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:09.1302566-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Current version of schema \"public\": << Empty Schema >>","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:09.142579-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"1 - initial schema\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:09.1521196-03:00","level":"WARN","logger":"o.f.c.i.s.DefaultSqlScriptExecutor","thread":"main","message":"DB: extension \"postgis\" already exists, skipping (SQL State: 42710 - Error Code: 0)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:09.200435-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"2 - sample distribution centers\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:09.2182922-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Successfully applied 2 migrations to schema \"public\", now at version v2 (execution time 00:00.040s)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:09.2928025-03:00","level":"INFO","logger":"o.h.jpa.internal.util.LogHelper","thread":"main","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:09.3637612-03:00","level":"INFO","logger":"org.hibernate.Version","thread":"main","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:09.3788035-03:00","level":"INFO","logger":"o.h.s.integration.SpatialService","thread":"main","message":"HHH80000001: hibernate-spatial integration enabled : true","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:09.4188771-03:00","level":"INFO","logger":"o.h.c.i.RegionFactoryInitiator","thread":"main","message":"HHH000026: Second-level cache disabled","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:09.5387092-03:00","level":"WARN","logger":"org.hibernate.orm.deprecation","thread":"main","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:09.5671684-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:09.8162717-03:00","level":"INFO","logger":"o.s.o.j.p.SpringPersistenceUnitInfo","thread":"main","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:09.8449907-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:10.322188-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000004: hibernate-spatial adding function contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:11.0731308-03:00","level":"INFO","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator","thread":"main","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:11.0890687-03:00","level":"INFO","logger":"o.hibernate.orm.connections.access","thread":"main","message":"HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@6cad16f8] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:11.1243381-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"main","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:11.8173853-03:00","level":"INFO","logger":"o.s.d.j.r.query.QueryEnhancerFactory","thread":"main","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:13.3235114-03:00","level":"WARN","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration","thread":"main","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:14.5586011-03:00","level":"INFO","logger":"o.s.b.a.e.web.EndpointLinksResolver","thread":"main","message":"Exposing 5 endpoint(s) beneath base path '/actuator'","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:14.661611-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Starting ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:14.673346-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat started on port 53028 (http) with context path '/api'","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:14.7080097-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:53019]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-orders-service-it-consumer-1\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = orders-service-it-consumer\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:14.8595326-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:14.8595326-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:14.8605413-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758647354857","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:14.8682532-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:14.884805-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Started DistributionCenterCachingIT in 10.688 seconds (process running for 19.077)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:15.3389619-03:00","level":"WARN","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error while fetching metadata with correlation id 2 : {orders.events=LEADER_NOT_AVAILABLE}","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:15.3440603-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cluster ID: xl-iBw_VS_S2ZcQfCwGVYg","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:15.448177-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Discovered group coordinator localhost:53019 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:15.4540727-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:15.4770134-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: need to re-join with the given member-id: consumer-orders-service-it-consumer-1-2033d503-487a-4815-936b-766c3975e9e9","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:15.4775364-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:15.4780541-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:15.4914111-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully joined group with generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-2033d503-487a-4815-936b-766c3975e9e9', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:15.4956579-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Finished assignment for group at generation 1: {consumer-orders-service-it-consumer-1-2033d503-487a-4815-936b-766c3975e9e9=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:15.5340276-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully synced group in generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-2033d503-487a-4815-936b-766c3975e9e9', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:15.5346378-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:15.539089-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:15.5525188-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:15.5665084-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:53019 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:15.5681236-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions assigned: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:16.5294247-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"http-nio-auto-1-exec-1","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:16.5294247-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-1","message":"Initializing Servlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:16.5309312-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-1","message":"Completed initialization in 1 ms","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:16.7087113-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"08b58a7f-825e-4c3b-a7d9-f3bc02778a18","message":"Processing new order request - Correlation ID: 1d224245-8535-49b1-8375-10e2c2e94b84, Customer: customer-cache, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:17.198729-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"08b58a7f-825e-4c3b-a7d9-f3bc02778a18","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:17.1997289-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"08b58a7f-825e-4c3b-a7d9-f3bc02778a18","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:17.2233005-03:00","level":"INFO","logger":"o.a.k.c.producer.ProducerConfig","thread":"http-nio-auto-1-exec-1","correlationId":"08b58a7f-825e-4c3b-a7d9-f3bc02778a18","message":"ProducerConfig values: \r\n\tacks = -1\r\n\tauto.include.jmx.reporter = true\r\n\tbatch.size = 16384\r\n\tbootstrap.servers = [PLAINTEXT://localhost:53019]\r\n\tbuffer.memory = 33554432\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = orders-service-producer-1\r\n\tcompression.type = snappy\r\n\tconnections.max.idle.ms = 540000\r\n\tdelivery.timeout.ms = 120000\r\n\tenable.idempotence = true\r\n\tinterceptor.classes = []\r\n\tkey.serializer = class org.apache.kafka.common.serialization.StringSerializer\r\n\tlinger.ms = 10\r\n\tmax.block.ms = 60000\r\n\tmax.in.flight.requests.per.connection = 5\r\n\tmax.request.size = 1048576\r\n\tmetadata.max.age.ms = 300000\r\n\tmetadata.max.idle.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartitioner.adaptive.partitioning.enable = true\r\n\tpartitioner.availability.timeout.ms = 0\r\n\tpartitioner.class = null\r\n\tpartitioner.ignore.keys = false\r\n\treceive.buffer.bytes = 32768\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretries = 3\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\ttransaction.timeout.ms = 60000\r\n\ttransactional.id = null\r\n\tvalue.serializer = class org.springframework.kafka.support.serializer.JsonSerializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:17.2381547-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"http-nio-auto-1-exec-1","correlationId":"08b58a7f-825e-4c3b-a7d9-f3bc02778a18","message":"[Producer clientId=orders-service-producer-1] Instantiated an idempotent producer.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:17.2624011-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"08b58a7f-825e-4c3b-a7d9-f3bc02778a18","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:17.2634092-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"08b58a7f-825e-4c3b-a7d9-f3bc02778a18","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:17.2634092-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"08b58a7f-825e-4c3b-a7d9-f3bc02778a18","message":"Kafka startTimeMs: 1758647357262","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:17.2709218-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cluster ID: xl-iBw_VS_S2ZcQfCwGVYg","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:17.2860549-03:00","level":"INFO","logger":"o.a.k.c.p.i.TransactionManager","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] ProducerId set to 0 with epoch 0","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:17.4602874-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"08b58a7f-825e-4c3b-a7d9-f3bc02778a18","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRT39VEYDPMMP98ZVFYNXS","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:17.5226504-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRT39VEYDPMMP98ZVFYNXS","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:17.9061881-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.h.HttpDistributionCenterService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to fetch all distribution centers","exception":"org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:182)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:17.9065205-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.h.HttpDistributionCenterService","thread":"http-nio-auto-1-exec-1","correlationId":"08b58a7f-825e-4c3b-a7d9-f3bc02778a18","message":"Failed to fetch all distribution centers","exception":"org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:182)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:17.9143111-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.failed - Event: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:17.9143111-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"08b58a7f-825e-4c3b-a7d9-f3bc02778a18","message":"Publishing event to topic: order.failed - Event: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:17.9143111-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:17.9143111-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"08b58a7f-825e-4c3b-a7d9-f3bc02778a18","message":"Event published successfully: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:17.9153143-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRT39VEYDPMMP98ZVFYNXS","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:17.9163156-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"08b58a7f-825e-4c3b-a7d9-f3bc02778a18","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRT39VEYDPMMP98ZVFYNXS","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:17.9201639-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRT39VEYDPMMP98ZVFYNXS from event: Failed to process order [01K5VRT39VEYDPMMP98ZVFYNXS]: Distribution center service unavailable","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRT39VEYDPMMP98ZVFYNXS]: Distribution center service unavailable\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:165)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: br.com.ml.mktplace.orders.domain.model.ExternalServiceException: External service error [DistributionCenterService]: Failed to fetch all distribution centers\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:125)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:182)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\t... 38 common frames omitted\r\nCaused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\t... 40 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:17.919639-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"08b58a7f-825e-4c3b-a7d9-f3bc02778a18","message":"Failed to process order - Correlation ID: 1d224245-8535-49b1-8375-10e2c2e94b84","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRT39VEYDPMMP98ZVFYNXS]: Distribution center service unavailable\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:165)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: br.com.ml.mktplace.orders.domain.model.ExternalServiceException: External service error [DistributionCenterService]: Failed to fetch all distribution centers\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:125)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:182)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\t... 72 common frames omitted\r\nCaused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\t... 74 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:17.9253852-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.r.h.GlobalExceptionHandler","thread":"http-nio-auto-1-exec-1","correlationId":"08b58a7f-825e-4c3b-a7d9-f3bc02778a18","message":"Order processing error - Correlation ID: 83ee9107-a8d7-4db2-8839-7491a9d643c4, Order ID: 01K5VRT39VEYDPMMP98ZVFYNXS, Message: Failed to process order [01K5VRT39VEYDPMMP98ZVFYNXS]: Distribution center service unavailable","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRT39VEYDPMMP98ZVFYNXS]: Distribution center service unavailable\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:165)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: br.com.ml.mktplace.orders.domain.model.ExternalServiceException: External service error [DistributionCenterService]: Failed to fetch all distribution centers\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:125)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:182)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\t... 72 common frames omitted\r\nCaused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\t... 74 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.0334746-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT]: OrderEndToEndProcessingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.0354744-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.0873099-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"d825e179-08c4-4430-9c6f-341c209d08d6","message":"Processing new order request - Correlation ID: d825e179-08c4-4430-9c6f-341c209d08d6, Customer: customer-async-proc, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.0946013-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"d825e179-08c4-4430-9c6f-341c209d08d6","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.0951878-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"d825e179-08c4-4430-9c6f-341c209d08d6","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.0957138-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"d825e179-08c4-4430-9c6f-341c209d08d6","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRT4M80DFBJTV9P7SNQGYQ","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.1104788-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRT4M80DFBJTV9P7SNQGYQ","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.1286536-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.1286536-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-6","correlationId":"d825e179-08c4-4430-9c6f-341c209d08d6","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.1297446-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item ASYNC-PROC-1 pedido 01K5VRT4M80DFBJTV9P7SNQGYQ -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.1297446-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-6","correlationId":"d825e179-08c4-4430-9c6f-341c209d08d6","message":"CD selecionado para item ASYNC-PROC-1 pedido 01K5VRT4M80DFBJTV9P7SNQGYQ -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.1322037-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.1322037-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.1327255-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"d825e179-08c4-4430-9c6f-341c209d08d6","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.1327255-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRT4M80DFBJTV9P7SNQGYQ","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.133233-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"d825e179-08c4-4430-9c6f-341c209d08d6","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.133233-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"d825e179-08c4-4430-9c6f-341c209d08d6","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRT4M80DFBJTV9P7SNQGYQ","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.1434548-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"d825e179-08c4-4430-9c6f-341c209d08d6","message":"Order processed successfully - ID: 01K5VRT4M80DFBJTV9P7SNQGYQ, Status: PROCESSED, Correlation ID: d825e179-08c4-4430-9c6f-341c209d08d6","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.149201-03:00","level":"INFO","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100503: On release of batch it still contained JDBC statements","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.1497493-03:00","level":"ERROR","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100501: Exception executing batch [org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?], SQL: delete from order_items where id=?","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.155632-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRT4M80DFBJTV9P7SNQGYQ from event: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?","exception":"org.springframework.orm.ObjectOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:328)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:565)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:669)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:419)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:67)\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:54)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.checkRowCounts(BatchImpl.java:314)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:278)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.PreparedStatementGroupSingleTable.forEachStatement(PreparedStatementGroupSingleTable.java:59)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.performExecution(BatchImpl.java:260)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.execute(BatchImpl.java:239)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.executeBatch(JdbcCoordinatorImpl.java:188)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:659)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1415)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:496)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2325)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1988)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:561)\r\n\t... 31 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.1602902-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-7","correlationId":"3b3a6119-ee1c-4ec0-a6ba-d5c2bd5d3b9b","message":"Fetching order by ID: 01K5VRT4M80DFBJTV9P7SNQGYQ - Correlation ID: 46691606-4ffb-4a45-90b5-695091c48a68","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.1679715-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-7","correlationId":"3b3a6119-ee1c-4ec0-a6ba-d5c2bd5d3b9b","message":"Order retrieved successfully - ID: 01K5VRT4M80DFBJTV9P7SNQGYQ, Status: PROCESSED, Correlation ID: 46691606-4ffb-4a45-90b5-695091c48a68","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.1741295-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT]: OrderEventConsumptionIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.175161-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2162942-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"f1de96cc-b3aa-4df3-8e1e-64cb04d016cd","message":"Processing new order request - Correlation ID: 235a950d-3557-4f70-a2d3-a63df2163397, Customer: customer-event-consumer, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2253842-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"f1de96cc-b3aa-4df3-8e1e-64cb04d016cd","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2253842-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"f1de96cc-b3aa-4df3-8e1e-64cb04d016cd","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2259731-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"f1de96cc-b3aa-4df3-8e1e-64cb04d016cd","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRT4R9AHTDYBP4HTTF4QT5","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2449706-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-5","correlationId":"f1de96cc-b3aa-4df3-8e1e-64cb04d016cd","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.serializer.SerializationException: Could not read JSON:Unrecognized field \"coordinates\" (class br.com.ml.mktplace.orders.domain.model.DistributionCenter), not marked as ignorable (3 known properties: \"name\", \"address\", \"code\"])\n at [Source: (byte[])\"[\"[Lbr.com.ml.mktplace.orders.domain.model.DistributionCenter;\",[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\"[truncated 161 bytes]; line: 1, column: 504] (through reference chain: java.lang.Object[][0]->br.com.ml.mktplace.orders.domain.model.DistributionCenter[\"coordinates\"]) \r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:292)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:261)\r\n\tat org.springframework.data.redis.core.AbstractOperations.deserializeValue(AbstractOperations.java:360)\r\n\tat org.springframework.data.redis.core.AbstractOperations$ValueDeserializingRedisCallback.doInRedis(AbstractOperations.java:62)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:406)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:173)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field \"coordinates\" (class br.com.ml.mktplace.orders.domain.model.DistributionCenter), not marked as ignorable (3 known properties: \"name\", \"address\", \"code\"])\n at [Source: (byte[])\"[\"[Lbr.com.ml.mktplace.orders.domain.model.DistributionCenter;\",[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\"[truncated 161 bytes]; line: 1, column: 504] (through reference chain: java.lang.Object[][0]->br.com.ml.mktplace.orders.domain.model.DistributionCenter[\"coordinates\"])\r\n\tat com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException.from(UnrecognizedPropertyException.java:61)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.handleUnknownProperty(DeserializationContext.java:1138)\r\n\tat com.fasterxml.jackson.databind.deser.std.StdDeserializer.handleUnknownProperty(StdDeserializer.java:2224)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownProperty(BeanDeserializerBase.java:1709)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownVanilla(BeanDeserializerBase.java:1687)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:284)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeUsingPropertyBased(BeanDeserializer.java:463)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1409)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:352)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeOther(BeanDeserializer.java:220)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:187)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer._deserializeTypedForId(AsPropertyTypeDeserializer.java:170)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromObject(AsPropertyTypeDeserializer.java:136)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeWithType(BeanDeserializerBase.java:1296)\r\n\tat com.fasterxml.jackson.databind.deser.std.ObjectArrayDeserializer.deserialize(ObjectArrayDeserializer.java:219)\r\n\tat com.fasterxml.jackson.databind.deser.std.ObjectArrayDeserializer.deserialize(ObjectArrayDeserializer.java:27)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._deserialize(AsArrayTypeDeserializer.java:120)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer.deserializeTypedFromArray(AsArrayTypeDeserializer.java:53)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromAny(AsPropertyTypeDeserializer.java:238)\r\n\tat com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR.deserializeWithType(UntypedObjectDeserializerNR.java:115)\r\n\tat com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:74)\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4825)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3874)\r\n\tat org.springframework.data.redis.serializer.JacksonObjectReader.lambda$create$0(JacksonObjectReader.java:54)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:289)\r\n\t... 82 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2487502-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRT4R9AHTDYBP4HTTF4QT5","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2513997-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-5","correlationId":"f1de96cc-b3aa-4df3-8e1e-64cb04d016cd","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2519597-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-5","correlationId":"f1de96cc-b3aa-4df3-8e1e-64cb04d016cd","message":"CD selecionado para item EVT-CONSUME-1 pedido 01K5VRT4R9AHTDYBP4HTTF4QT5 -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.254604-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"f1de96cc-b3aa-4df3-8e1e-64cb04d016cd","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.254604-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"f1de96cc-b3aa-4df3-8e1e-64cb04d016cd","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.254604-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"f1de96cc-b3aa-4df3-8e1e-64cb04d016cd","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRT4R9AHTDYBP4HTTF4QT5","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.258276-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"f1de96cc-b3aa-4df3-8e1e-64cb04d016cd","message":"Order processed successfully - ID: 01K5VRT4R9AHTDYBP4HTTF4QT5, Status: PROCESSED, Correlation ID: 235a950d-3557-4f70-a2d3-a63df2163397","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.258276-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.serializer.SerializationException: Could not read JSON:Unrecognized field \"coordinates\" (class br.com.ml.mktplace.orders.domain.model.DistributionCenter), not marked as ignorable (3 known properties: \"name\", \"address\", \"code\"])\n at [Source: (byte[])\"[\"[Lbr.com.ml.mktplace.orders.domain.model.DistributionCenter;\",[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\"[truncated 161 bytes]; line: 1, column: 504] (through reference chain: java.lang.Object[][0]->br.com.ml.mktplace.orders.domain.model.DistributionCenter[\"coordinates\"]) \r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:292)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:261)\r\n\tat org.springframework.data.redis.core.AbstractOperations.deserializeValue(AbstractOperations.java:360)\r\n\tat org.springframework.data.redis.core.AbstractOperations$ValueDeserializingRedisCallback.doInRedis(AbstractOperations.java:62)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:406)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:173)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field \"coordinates\" (class br.com.ml.mktplace.orders.domain.model.DistributionCenter), not marked as ignorable (3 known properties: \"name\", \"address\", \"code\"])\n at [Source: (byte[])\"[\"[Lbr.com.ml.mktplace.orders.domain.model.DistributionCenter;\",[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\"[truncated 161 bytes]; line: 1, column: 504] (through reference chain: java.lang.Object[][0]->br.com.ml.mktplace.orders.domain.model.DistributionCenter[\"coordinates\"])\r\n\tat com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException.from(UnrecognizedPropertyException.java:61)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.handleUnknownProperty(DeserializationContext.java:1138)\r\n\tat com.fasterxml.jackson.databind.deser.std.StdDeserializer.handleUnknownProperty(StdDeserializer.java:2224)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownProperty(BeanDeserializerBase.java:1709)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownVanilla(BeanDeserializerBase.java:1687)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:284)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeUsingPropertyBased(BeanDeserializer.java:463)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1409)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:352)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeOther(BeanDeserializer.java:220)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:187)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer._deserializeTypedForId(AsPropertyTypeDeserializer.java:170)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromObject(AsPropertyTypeDeserializer.java:136)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeWithType(BeanDeserializerBase.java:1296)\r\n\tat com.fasterxml.jackson.databind.deser.std.ObjectArrayDeserializer.deserialize(ObjectArrayDeserializer.java:219)\r\n\tat com.fasterxml.jackson.databind.deser.std.ObjectArrayDeserializer.deserialize(ObjectArrayDeserializer.java:27)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._deserialize(AsArrayTypeDeserializer.java:120)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer.deserializeTypedFromArray(AsArrayTypeDeserializer.java:53)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromAny(AsPropertyTypeDeserializer.java:238)\r\n\tat com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR.deserializeWithType(UntypedObjectDeserializerNR.java:115)\r\n\tat com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:74)\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4825)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3874)\r\n\tat org.springframework.data.redis.serializer.JacksonObjectReader.lambda$create$0(JacksonObjectReader.java:54)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:289)\r\n\t... 48 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2606273-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:53019]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95-2\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2643287-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2643287-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2643287-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2643287-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758647358264","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2643287-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item EVT-CONSUME-1 pedido 01K5VRT4R9AHTDYBP4HTTF4QT5 -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2654017-03:00","level":"INFO","logger":"o.a.k.clients.consumer.KafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95-2, groupId=order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2670024-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2670024-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2675145-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRT4R9AHTDYBP4HTTF4QT5","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2701825-03:00","level":"INFO","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100503: On release of batch it still contained JDBC statements","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2701825-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95-2, groupId=order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95] Cluster ID: xl-iBw_VS_S2ZcQfCwGVYg","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2707185-03:00","level":"ERROR","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100501: Exception executing batch [org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?], SQL: delete from order_items where id=?","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2707185-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95-2, groupId=order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95] Discovered group coordinator localhost:53019 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2718042-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95-2, groupId=order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2712643-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRT4R9AHTDYBP4HTTF4QT5 from event: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?","exception":"org.springframework.orm.ObjectOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:328)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:565)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:669)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:419)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:67)\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:54)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.checkRowCounts(BatchImpl.java:314)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:278)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.PreparedStatementGroupSingleTable.forEachStatement(PreparedStatementGroupSingleTable.java:59)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.performExecution(BatchImpl.java:260)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.execute(BatchImpl.java:239)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.executeBatch(JdbcCoordinatorImpl.java:188)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:659)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1415)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:496)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2325)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1988)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:561)\r\n\t... 31 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2744889-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95-2, groupId=order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95] Request joining group due to: need to re-join with the given member-id: consumer-order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95-2-38b515b1-e00f-4fc3-963f-f5381c5ee614","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2750566-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95-2, groupId=order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2750566-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95-2, groupId=order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2798213-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95-2, groupId=order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95] Successfully joined group with generation Generation{generationId=1, memberId='consumer-order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95-2-38b515b1-e00f-4fc3-963f-f5381c5ee614', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2798213-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95-2, groupId=order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95] Finished assignment for group at generation 1: {consumer-order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95-2-38b515b1-e00f-4fc3-963f-f5381c5ee614=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2829996-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95-2, groupId=order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95] Successfully synced group in generation Generation{generationId=1, memberId='consumer-order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95-2-38b515b1-e00f-4fc3-963f-f5381c5ee614', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2835607-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95-2, groupId=order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.284103-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95-2, groupId=order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2851994-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95-2, groupId=order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.2899867-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95-2, groupId=order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:53019 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.3037054-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95-2, groupId=order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.3037054-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95-2, groupId=order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95] Member consumer-order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95-2-38b515b1-e00f-4fc3-963f-f5381c5ee614 sending LeaveGroup request to coordinator localhost:53019 (id: 2147483646 rack: null) due to the consumer is being closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.3047096-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95-2, groupId=order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.3047096-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95-2, groupId=order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.7542046-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.7549999-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.7549999-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.7635799-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"App info kafka.consumer for consumer-order-events-test-group-f161876f-5831-4bcf-a08e-a403fc132b95-2 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.7755943-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventPublishingIT]: OrderEventPublishingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.7765941-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventPublishingIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.8200531-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-4","correlationId":"ecb6b7cf-48d6-4060-a816-002cdbb235b5","message":"Processing new order request - Correlation ID: e44be637-43c3-4a39-bf36-61698535bb32, Customer: customer-events, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.8301812-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"ecb6b7cf-48d6-4060-a816-002cdbb235b5","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.8301812-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"ecb6b7cf-48d6-4060-a816-002cdbb235b5","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.8307567-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"ecb6b7cf-48d6-4060-a816-002cdbb235b5","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRT5B53EJ1E10G0K5A3ZQH","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.8398814-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-4","correlationId":"ecb6b7cf-48d6-4060-a816-002cdbb235b5","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.serializer.SerializationException: Could not read JSON:Unrecognized field \"coordinates\" (class br.com.ml.mktplace.orders.domain.model.DistributionCenter), not marked as ignorable (3 known properties: \"name\", \"address\", \"code\"])\n at [Source: (byte[])\"[\"[Lbr.com.ml.mktplace.orders.domain.model.DistributionCenter;\",[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\"[truncated 161 bytes]; line: 1, column: 504] (through reference chain: java.lang.Object[][0]->br.com.ml.mktplace.orders.domain.model.DistributionCenter[\"coordinates\"]) \r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:292)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:261)\r\n\tat org.springframework.data.redis.core.AbstractOperations.deserializeValue(AbstractOperations.java:360)\r\n\tat org.springframework.data.redis.core.AbstractOperations$ValueDeserializingRedisCallback.doInRedis(AbstractOperations.java:62)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:406)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:173)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field \"coordinates\" (class br.com.ml.mktplace.orders.domain.model.DistributionCenter), not marked as ignorable (3 known properties: \"name\", \"address\", \"code\"])\n at [Source: (byte[])\"[\"[Lbr.com.ml.mktplace.orders.domain.model.DistributionCenter;\",[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\"[truncated 161 bytes]; line: 1, column: 504] (through reference chain: java.lang.Object[][0]->br.com.ml.mktplace.orders.domain.model.DistributionCenter[\"coordinates\"])\r\n\tat com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException.from(UnrecognizedPropertyException.java:61)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.handleUnknownProperty(DeserializationContext.java:1138)\r\n\tat com.fasterxml.jackson.databind.deser.std.StdDeserializer.handleUnknownProperty(StdDeserializer.java:2224)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownProperty(BeanDeserializerBase.java:1709)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownVanilla(BeanDeserializerBase.java:1687)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:284)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeUsingPropertyBased(BeanDeserializer.java:463)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1409)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:352)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeOther(BeanDeserializer.java:220)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:187)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer._deserializeTypedForId(AsPropertyTypeDeserializer.java:170)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromObject(AsPropertyTypeDeserializer.java:136)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeWithType(BeanDeserializerBase.java:1296)\r\n\tat com.fasterxml.jackson.databind.deser.std.ObjectArrayDeserializer.deserialize(ObjectArrayDeserializer.java:219)\r\n\tat com.fasterxml.jackson.databind.deser.std.ObjectArrayDeserializer.deserialize(ObjectArrayDeserializer.java:27)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._deserialize(AsArrayTypeDeserializer.java:120)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer.deserializeTypedFromArray(AsArrayTypeDeserializer.java:53)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromAny(AsPropertyTypeDeserializer.java:238)\r\n\tat com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR.deserializeWithType(UntypedObjectDeserializerNR.java:115)\r\n\tat com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:74)\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4825)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3874)\r\n\tat org.springframework.data.redis.serializer.JacksonObjectReader.lambda$create$0(JacksonObjectReader.java:54)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:289)\r\n\t... 82 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.8456524-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-4","correlationId":"ecb6b7cf-48d6-4060-a816-002cdbb235b5","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.8461888-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-4","correlationId":"ecb6b7cf-48d6-4060-a816-002cdbb235b5","message":"CD selecionado para item EVT123 pedido 01K5VRT5B53EJ1E10G0K5A3ZQH -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.849246-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"ecb6b7cf-48d6-4060-a816-002cdbb235b5","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.8498054-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"ecb6b7cf-48d6-4060-a816-002cdbb235b5","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.850325-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"ecb6b7cf-48d6-4060-a816-002cdbb235b5","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRT5B53EJ1E10G0K5A3ZQH","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.8518949-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRT5B53EJ1E10G0K5A3ZQH","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.8534353-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-4","correlationId":"ecb6b7cf-48d6-4060-a816-002cdbb235b5","message":"Order processed successfully - ID: 01K5VRT5B53EJ1E10G0K5A3ZQH, Status: PROCESSED, Correlation ID: e44be637-43c3-4a39-bf36-61698535bb32","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.8569601-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRT5B53EJ1E10G0K5A3ZQH from event: Failed to process order [01K5VRT5B53EJ1E10G0K5A3ZQH]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRT5B53EJ1E10G0K5A3ZQH]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.8594678-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderFlowIT]: OrderFlowIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.8614674-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderFlowIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.8964731-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"ffb014eb-01bc-44ff-b369-f4951682dd75","message":"Processing new order request - Correlation ID: ffb014eb-01bc-44ff-b369-f4951682dd75, Customer: customer-1, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.9050065-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"ffb014eb-01bc-44ff-b369-f4951682dd75","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.9050065-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"ffb014eb-01bc-44ff-b369-f4951682dd75","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.9055269-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"ffb014eb-01bc-44ff-b369-f4951682dd75","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRT5DHR4YX6WYFAZPVK24E","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.9149711-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-2","correlationId":"ffb014eb-01bc-44ff-b369-f4951682dd75","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.serializer.SerializationException: Could not read JSON:Unrecognized field \"coordinates\" (class br.com.ml.mktplace.orders.domain.model.DistributionCenter), not marked as ignorable (3 known properties: \"name\", \"address\", \"code\"])\n at [Source: (byte[])\"[\"[Lbr.com.ml.mktplace.orders.domain.model.DistributionCenter;\",[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\"[truncated 161 bytes]; line: 1, column: 504] (through reference chain: java.lang.Object[][0]->br.com.ml.mktplace.orders.domain.model.DistributionCenter[\"coordinates\"]) \r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:292)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:261)\r\n\tat org.springframework.data.redis.core.AbstractOperations.deserializeValue(AbstractOperations.java:360)\r\n\tat org.springframework.data.redis.core.AbstractOperations$ValueDeserializingRedisCallback.doInRedis(AbstractOperations.java:62)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:406)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:173)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field \"coordinates\" (class br.com.ml.mktplace.orders.domain.model.DistributionCenter), not marked as ignorable (3 known properties: \"name\", \"address\", \"code\"])\n at [Source: (byte[])\"[\"[Lbr.com.ml.mktplace.orders.domain.model.DistributionCenter;\",[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\"[truncated 161 bytes]; line: 1, column: 504] (through reference chain: java.lang.Object[][0]->br.com.ml.mktplace.orders.domain.model.DistributionCenter[\"coordinates\"])\r\n\tat com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException.from(UnrecognizedPropertyException.java:61)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.handleUnknownProperty(DeserializationContext.java:1138)\r\n\tat com.fasterxml.jackson.databind.deser.std.StdDeserializer.handleUnknownProperty(StdDeserializer.java:2224)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownProperty(BeanDeserializerBase.java:1709)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownVanilla(BeanDeserializerBase.java:1687)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:284)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeUsingPropertyBased(BeanDeserializer.java:463)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1409)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:352)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeOther(BeanDeserializer.java:220)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:187)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer._deserializeTypedForId(AsPropertyTypeDeserializer.java:170)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromObject(AsPropertyTypeDeserializer.java:136)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeWithType(BeanDeserializerBase.java:1296)\r\n\tat com.fasterxml.jackson.databind.deser.std.ObjectArrayDeserializer.deserialize(ObjectArrayDeserializer.java:219)\r\n\tat com.fasterxml.jackson.databind.deser.std.ObjectArrayDeserializer.deserialize(ObjectArrayDeserializer.java:27)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._deserialize(AsArrayTypeDeserializer.java:120)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer.deserializeTypedFromArray(AsArrayTypeDeserializer.java:53)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromAny(AsPropertyTypeDeserializer.java:238)\r\n\tat com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR.deserializeWithType(UntypedObjectDeserializerNR.java:115)\r\n\tat com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:74)\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4825)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3874)\r\n\tat org.springframework.data.redis.serializer.JacksonObjectReader.lambda$create$0(JacksonObjectReader.java:54)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:289)\r\n\t... 82 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.92173-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-2","correlationId":"ffb014eb-01bc-44ff-b369-f4951682dd75","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.9222554-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-2","correlationId":"ffb014eb-01bc-44ff-b369-f4951682dd75","message":"CD selecionado para item ABC123 pedido 01K5VRT5DHR4YX6WYFAZPVK24E -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.9254814-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"ffb014eb-01bc-44ff-b369-f4951682dd75","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.9259906-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"ffb014eb-01bc-44ff-b369-f4951682dd75","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.9265112-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"ffb014eb-01bc-44ff-b369-f4951682dd75","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRT5DHR4YX6WYFAZPVK24E","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.9286023-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRT5DHR4YX6WYFAZPVK24E","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.9307123-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"ffb014eb-01bc-44ff-b369-f4951682dd75","message":"Order processed successfully - ID: 01K5VRT5DHR4YX6WYFAZPVK24E, Status: PROCESSED, Correlation ID: ffb014eb-01bc-44ff-b369-f4951682dd75","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.9354042-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"c262abac-f95d-42dc-96df-86e81e5e659a","message":"Fetching order by ID: 01K5VRT5DHR4YX6WYFAZPVK24E - Correlation ID: cab25aa2-f17b-4172-8105-c9b281f74908","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.9390274-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.serializer.SerializationException: Could not read JSON:Unrecognized field \"coordinates\" (class br.com.ml.mktplace.orders.domain.model.DistributionCenter), not marked as ignorable (3 known properties: \"name\", \"address\", \"code\"])\n at [Source: (byte[])\"[\"[Lbr.com.ml.mktplace.orders.domain.model.DistributionCenter;\",[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\"[truncated 161 bytes]; line: 1, column: 504] (through reference chain: java.lang.Object[][0]->br.com.ml.mktplace.orders.domain.model.DistributionCenter[\"coordinates\"]) \r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:292)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:261)\r\n\tat org.springframework.data.redis.core.AbstractOperations.deserializeValue(AbstractOperations.java:360)\r\n\tat org.springframework.data.redis.core.AbstractOperations$ValueDeserializingRedisCallback.doInRedis(AbstractOperations.java:62)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:406)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:173)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field \"coordinates\" (class br.com.ml.mktplace.orders.domain.model.DistributionCenter), not marked as ignorable (3 known properties: \"name\", \"address\", \"code\"])\n at [Source: (byte[])\"[\"[Lbr.com.ml.mktplace.orders.domain.model.DistributionCenter;\",[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\"[truncated 161 bytes]; line: 1, column: 504] (through reference chain: java.lang.Object[][0]->br.com.ml.mktplace.orders.domain.model.DistributionCenter[\"coordinates\"])\r\n\tat com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException.from(UnrecognizedPropertyException.java:61)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.handleUnknownProperty(DeserializationContext.java:1138)\r\n\tat com.fasterxml.jackson.databind.deser.std.StdDeserializer.handleUnknownProperty(StdDeserializer.java:2224)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownProperty(BeanDeserializerBase.java:1709)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownVanilla(BeanDeserializerBase.java:1687)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:284)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeUsingPropertyBased(BeanDeserializer.java:463)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1409)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:352)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeOther(BeanDeserializer.java:220)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:187)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer._deserializeTypedForId(AsPropertyTypeDeserializer.java:170)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromObject(AsPropertyTypeDeserializer.java:136)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeWithType(BeanDeserializerBase.java:1296)\r\n\tat com.fasterxml.jackson.databind.deser.std.ObjectArrayDeserializer.deserialize(ObjectArrayDeserializer.java:219)\r\n\tat com.fasterxml.jackson.databind.deser.std.ObjectArrayDeserializer.deserialize(ObjectArrayDeserializer.java:27)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._deserialize(AsArrayTypeDeserializer.java:120)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer.deserializeTypedFromArray(AsArrayTypeDeserializer.java:53)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromAny(AsPropertyTypeDeserializer.java:238)\r\n\tat com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR.deserializeWithType(UntypedObjectDeserializerNR.java:115)\r\n\tat com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:74)\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4825)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3874)\r\n\tat org.springframework.data.redis.serializer.JacksonObjectReader.lambda$create$0(JacksonObjectReader.java:54)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:289)\r\n\t... 48 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.9400955-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"c262abac-f95d-42dc-96df-86e81e5e659a","message":"Order retrieved successfully - ID: 01K5VRT5DHR4YX6WYFAZPVK24E, Status: PROCESSED, Correlation ID: cab25aa2-f17b-4172-8105-c9b281f74908","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.9437475-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.9442664-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item ABC123 pedido 01K5VRT5DHR4YX6WYFAZPVK24E -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.9442664-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.9442664-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item ABC123 pedido 01K5VRT5DHR4YX6WYFAZPVK24E -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.9506031-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.9506031-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:18.9511245-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRT5DHR4YX6WYFAZPVK24E","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.0070007-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 2147483646 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.0070007-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.1711694-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.1718785-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.1718785-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight FETCH request with correlation id 29 due to node 1 being disconnected (elapsed time since creation: 196ms, elapsed time since send: 196ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.1723811-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight METADATA request with correlation id 30 due to node 1 being disconnected (elapsed time since creation: 111ms, elapsed time since send: 111ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.1723811-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.1723811-03:00","level":"INFO","logger":"o.a.k.clients.FetchSessionHandler","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error sending fetch request (sessionId=709612343, epoch=16) to node 1:","exception":"org.apache.kafka.common.errors.DisconnectException: null\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.1734688-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.1744735-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cancelled in-flight API_VERSIONS request with correlation id 15 due to node 1 being disconnected (elapsed time since creation: 1ms, elapsed time since send: 1ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.1744735-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.1744735-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions revoked: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.1749767-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Member consumer-orders-service-it-consumer-1-2033d503-487a-4815-936b-766c3975e9e9 sending LeaveGroup request to coordinator localhost:53019 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.1754843-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.1754843-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.1754843-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Unsubscribed all topics or patterns and assigned partitions","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.1754843-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.1761053-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.1761053-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 2147483646 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.1767424-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight API_VERSIONS request with correlation id 32 due to node 2147483646 being disconnected (elapsed time since creation: 1ms, elapsed time since send: 1ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.1767424-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Group coordinator localhost:53019 (id: 2147483646 rack: null) is unavailable or invalid due to cause: null. isDisconnected: true. Rediscovery will be attempted.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.1767424-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.1767424-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.1767424-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.1779238-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"App info kafka.consumer for consumer-orders-service-it-consumer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.1796532-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: Consumer stopped","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.2792246-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.2798568-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cancelled in-flight API_VERSIONS request with correlation id 16 due to node 1 being disconnected (elapsed time since creation: 2ms, elapsed time since send: 2ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.3149345-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"SpringApplicationShutdownHook","message":"[Producer clientId=orders-service-producer-1] Closing the Kafka producer with timeoutMillis = 30000 ms.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.3159355-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.3159355-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.3159355-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.3159355-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"SpringApplicationShutdownHook","message":"App info kafka.producer for orders-service-producer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.3311771-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"SpringApplicationShutdownHook","message":"Closing JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.3321825-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown initiated...","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:19.3340149-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown completed.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:28.9368752-03:00","level":"INFO","logger":"o.h.validator.internal.util.Version","thread":"background-preinit","message":"HV000001: Hibernate Validator 8.0.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:28.9953875-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Starting DistributionCenterCachingIT using Java 21.0.8 with PID 16808 (started by ciror in Z:\\projects\\meli-test-mktplace)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:28.9968261-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"The following 1 profile is active: \"integration-test\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:29.863196-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:29.863196-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:30.0026508-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 134 ms. Found 1 JPA repository interface.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:30.6348729-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:30.6373757-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data Redis repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:30.6828201-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationExtensionSupport","thread":"main","message":"Spring Data Redis - Could not safely identify store assignment for repository candidate interface br.com.ml.mktplace.orders.adapter.outbound.persistence.repository.JpaOrderEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:30.6828201-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 24 ms. Found 0 Redis repository interfaces.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:32.0739342-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat initialized with port 0 (http)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:32.0870015-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Initializing ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:32.0900004-03:00","level":"INFO","logger":"o.a.catalina.core.StandardService","thread":"main","message":"Starting service [Tomcat]","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:32.0910001-03:00","level":"INFO","logger":"o.a.catalina.core.StandardEngine","thread":"main","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:32.180513-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"main","message":"Initializing Spring embedded WebApplicationContext","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:32.1815127-03:00","level":"INFO","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","thread":"main","message":"Root WebApplicationContext: initialization completed in 3150 ms","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:32.6389419-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Starting...","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:32.9105702-03:00","level":"INFO","logger":"com.zaxxer.hikari.pool.HikariPool","thread":"main","message":"OrdersHikariPool - Added connection org.postgresql.jdbc.PgConnection@1dbe76aa","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:32.9129378-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Start completed.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:33.0909826-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"Flyway Community Edition 9.22.3 by Redgate","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:33.0915167-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"See release notes here: https://rd.gt/416ObMi","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:33.0915167-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:33.1261194-03:00","level":"INFO","logger":"org.flywaydb.core.FlywayExecutor","thread":"main","message":"Database: jdbc:postgresql://localhost:53063/mktplace_orders (PostgreSQL 16.4)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:33.1377808-03:00","level":"WARN","logger":"o.f.c.i.database.base.Database","thread":"main","message":"Flyway upgrade recommended: PostgreSQL 16.4 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:33.1850726-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Schema history table \"public\".\"flyway_schema_history\" does not exist yet","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:33.1915178-03:00","level":"INFO","logger":"o.f.core.internal.command.DbValidate","thread":"main","message":"Successfully validated 2 migrations (execution time 00:00.034s)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:33.2194218-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Creating Schema History table \"public\".\"flyway_schema_history\" ...","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:33.2686323-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Current version of schema \"public\": << Empty Schema >>","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:33.2811918-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"1 - initial schema\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:33.2898173-03:00","level":"WARN","logger":"o.f.c.i.s.DefaultSqlScriptExecutor","thread":"main","message":"DB: extension \"postgis\" already exists, skipping (SQL State: 42710 - Error Code: 0)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:33.3408382-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"2 - sample distribution centers\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:33.3619578-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Successfully applied 2 migrations to schema \"public\", now at version v2 (execution time 00:00.042s)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:33.4314432-03:00","level":"INFO","logger":"o.h.jpa.internal.util.LogHelper","thread":"main","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:33.5018896-03:00","level":"INFO","logger":"org.hibernate.Version","thread":"main","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:33.5097017-03:00","level":"INFO","logger":"o.h.s.integration.SpatialService","thread":"main","message":"HHH80000001: hibernate-spatial integration enabled : true","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:33.5350553-03:00","level":"INFO","logger":"o.h.c.i.RegionFactoryInitiator","thread":"main","message":"HHH000026: Second-level cache disabled","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:33.6720028-03:00","level":"WARN","logger":"org.hibernate.orm.deprecation","thread":"main","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:33.6955431-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:33.9498863-03:00","level":"INFO","logger":"o.s.o.j.p.SpringPersistenceUnitInfo","thread":"main","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:33.9845312-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:34.4921213-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000004: hibernate-spatial adding function contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:35.1946069-03:00","level":"INFO","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator","thread":"main","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:35.2180881-03:00","level":"INFO","logger":"o.hibernate.orm.connections.access","thread":"main","message":"HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@66ba0395] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:35.2469214-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"main","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:35.858778-03:00","level":"INFO","logger":"o.s.d.j.r.query.QueryEnhancerFactory","thread":"main","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:37.4677592-03:00","level":"WARN","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration","thread":"main","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:38.7895991-03:00","level":"INFO","logger":"o.s.b.a.e.web.EndpointLinksResolver","thread":"main","message":"Exposing 5 endpoint(s) beneath base path '/actuator'","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:38.8949603-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Starting ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:38.9101499-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat started on port 53076 (http) with context path '/api'","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:38.9438522-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:53067]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-orders-service-it-consumer-1\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = orders-service-it-consumer\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:39.1016974-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:39.1027047-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:39.1027047-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758647379101","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:39.1112722-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:39.1273169-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Started DistributionCenterCachingIT in 10.878 seconds (process running for 19.105)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:39.5821861-03:00","level":"WARN","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error while fetching metadata with correlation id 2 : {orders.events=LEADER_NOT_AVAILABLE}","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:39.5837024-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cluster ID: lu5VHctiSQm5Ys_dGXajEQ","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:39.6990816-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Discovered group coordinator localhost:53067 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:39.7050243-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:39.7292054-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: need to re-join with the given member-id: consumer-orders-service-it-consumer-1-4032ece2-be25-449d-b934-e5e0cd8b233f","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:39.729731-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:39.729731-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:39.7421541-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully joined group with generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-4032ece2-be25-449d-b934-e5e0cd8b233f', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:39.7497756-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Finished assignment for group at generation 1: {consumer-orders-service-it-consumer-1-4032ece2-be25-449d-b934-e5e0cd8b233f=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:39.7863296-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully synced group in generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-4032ece2-be25-449d-b934-e5e0cd8b233f', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:39.7874695-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:39.7898691-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:39.8028165-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:39.8153925-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:53067 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:39.816558-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions assigned: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:40.802659-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"http-nio-auto-1-exec-1","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:40.802659-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-1","message":"Initializing Servlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:40.8041834-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-1","message":"Completed initialization in 2 ms","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:40.9678767-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"4243fa53-ed34-4044-89b0-f660c9355a9b","message":"Processing new order request - Correlation ID: ac4222a1-e012-49a0-b364-02a41c18fab5, Customer: customer-cache, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:41.4863666-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"4243fa53-ed34-4044-89b0-f660c9355a9b","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:41.4863666-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"4243fa53-ed34-4044-89b0-f660c9355a9b","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:41.5089577-03:00","level":"INFO","logger":"o.a.k.c.producer.ProducerConfig","thread":"http-nio-auto-1-exec-1","correlationId":"4243fa53-ed34-4044-89b0-f660c9355a9b","message":"ProducerConfig values: \r\n\tacks = -1\r\n\tauto.include.jmx.reporter = true\r\n\tbatch.size = 16384\r\n\tbootstrap.servers = [PLAINTEXT://localhost:53067]\r\n\tbuffer.memory = 33554432\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = orders-service-producer-1\r\n\tcompression.type = snappy\r\n\tconnections.max.idle.ms = 540000\r\n\tdelivery.timeout.ms = 120000\r\n\tenable.idempotence = true\r\n\tinterceptor.classes = []\r\n\tkey.serializer = class org.apache.kafka.common.serialization.StringSerializer\r\n\tlinger.ms = 10\r\n\tmax.block.ms = 60000\r\n\tmax.in.flight.requests.per.connection = 5\r\n\tmax.request.size = 1048576\r\n\tmetadata.max.age.ms = 300000\r\n\tmetadata.max.idle.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartitioner.adaptive.partitioning.enable = true\r\n\tpartitioner.availability.timeout.ms = 0\r\n\tpartitioner.class = null\r\n\tpartitioner.ignore.keys = false\r\n\treceive.buffer.bytes = 32768\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretries = 3\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\ttransaction.timeout.ms = 60000\r\n\ttransactional.id = null\r\n\tvalue.serializer = class org.springframework.kafka.support.serializer.JsonSerializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:41.5286822-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"http-nio-auto-1-exec-1","correlationId":"4243fa53-ed34-4044-89b0-f660c9355a9b","message":"[Producer clientId=orders-service-producer-1] Instantiated an idempotent producer.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:41.5501973-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"4243fa53-ed34-4044-89b0-f660c9355a9b","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:41.5501973-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"4243fa53-ed34-4044-89b0-f660c9355a9b","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:41.5501973-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"4243fa53-ed34-4044-89b0-f660c9355a9b","message":"Kafka startTimeMs: 1758647381550","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:41.5584036-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cluster ID: lu5VHctiSQm5Ys_dGXajEQ","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:41.5728256-03:00","level":"INFO","logger":"o.a.k.c.p.i.TransactionManager","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] ProducerId set to 0 with epoch 0","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:41.7157498-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"4243fa53-ed34-4044-89b0-f660c9355a9b","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRTTZVK9P917TA4FTH3NFZ","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:41.7789271-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRTTZVK9P917TA4FTH3NFZ","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.1436328-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.h.HttpDistributionCenterService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to fetch all distribution centers","exception":"org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:182)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.1436328-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.h.HttpDistributionCenterService","thread":"http-nio-auto-1-exec-1","correlationId":"4243fa53-ed34-4044-89b0-f660c9355a9b","message":"Failed to fetch all distribution centers","exception":"org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:182)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.1511191-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"4243fa53-ed34-4044-89b0-f660c9355a9b","message":"Publishing event to topic: order.failed - Event: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.1516323-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"4243fa53-ed34-4044-89b0-f660c9355a9b","message":"Event published successfully: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.1516323-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.failed - Event: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.1521686-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.1526906-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"4243fa53-ed34-4044-89b0-f660c9355a9b","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRTTZVK9P917TA4FTH3NFZ","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.1526906-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRTTZVK9P917TA4FTH3NFZ","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.15632-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"4243fa53-ed34-4044-89b0-f660c9355a9b","message":"Failed to process order - Correlation ID: ac4222a1-e012-49a0-b364-02a41c18fab5","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRTTZVK9P917TA4FTH3NFZ]: Distribution center service unavailable\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:165)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: br.com.ml.mktplace.orders.domain.model.ExternalServiceException: External service error [DistributionCenterService]: Failed to fetch all distribution centers\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:125)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:182)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\t... 72 common frames omitted\r\nCaused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\t... 74 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.15632-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRTTZVK9P917TA4FTH3NFZ from event: Failed to process order [01K5VRTTZVK9P917TA4FTH3NFZ]: Distribution center service unavailable","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRTTZVK9P917TA4FTH3NFZ]: Distribution center service unavailable\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:165)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: br.com.ml.mktplace.orders.domain.model.ExternalServiceException: External service error [DistributionCenterService]: Failed to fetch all distribution centers\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:125)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:182)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\t... 38 common frames omitted\r\nCaused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\t... 40 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.160027-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.r.h.GlobalExceptionHandler","thread":"http-nio-auto-1-exec-1","correlationId":"4243fa53-ed34-4044-89b0-f660c9355a9b","message":"Order processing error - Correlation ID: 29ed266f-a1af-477a-875b-30d622748f9b, Order ID: 01K5VRTTZVK9P917TA4FTH3NFZ, Message: Failed to process order [01K5VRTTZVK9P917TA4FTH3NFZ]: Distribution center service unavailable","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRTTZVK9P917TA4FTH3NFZ]: Distribution center service unavailable\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:165)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: br.com.ml.mktplace.orders.domain.model.ExternalServiceException: External service error [DistributionCenterService]: Failed to fetch all distribution centers\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:125)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:182)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\t... 72 common frames omitted\r\nCaused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\t... 74 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.2920191-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT]: OrderEndToEndProcessingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.2940226-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.3443177-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-7","correlationId":"51b81703-2e3b-46fb-829f-f7e799a14a31","message":"Processing new order request - Correlation ID: 51b81703-2e3b-46fb-829f-f7e799a14a31, Customer: customer-async-proc, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.3521884-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"51b81703-2e3b-46fb-829f-f7e799a14a31","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.3529689-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"51b81703-2e3b-46fb-829f-f7e799a14a31","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.3535313-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"51b81703-2e3b-46fb-829f-f7e799a14a31","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRTWA9EYF4WWBKZD8W5YBH","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.3731638-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRTWA9EYF4WWBKZD8W5YBH","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.3833754-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-7","correlationId":"51b81703-2e3b-46fb-829f-f7e799a14a31","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.383895-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-7","correlationId":"51b81703-2e3b-46fb-829f-f7e799a14a31","message":"CD selecionado para item ASYNC-PROC-1 pedido 01K5VRTWA9EYF4WWBKZD8W5YBH -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.3870495-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"51b81703-2e3b-46fb-829f-f7e799a14a31","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.3870495-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"51b81703-2e3b-46fb-829f-f7e799a14a31","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.3875803-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"51b81703-2e3b-46fb-829f-f7e799a14a31","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRTWA9EYF4WWBKZD8W5YBH","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.3971092-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.serializer.SerializationException: Could not read JSON:Unrecognized field \"coordinates\" (class br.com.ml.mktplace.orders.domain.model.DistributionCenter), not marked as ignorable (3 known properties: \"name\", \"address\", \"code\"])\n at [Source: (byte[])\"[\"[Lbr.com.ml.mktplace.orders.domain.model.DistributionCenter;\",[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\"[truncated 161 bytes]; line: 1, column: 504] (through reference chain: java.lang.Object[][0]->br.com.ml.mktplace.orders.domain.model.DistributionCenter[\"coordinates\"]) \r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:292)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:261)\r\n\tat org.springframework.data.redis.core.AbstractOperations.deserializeValue(AbstractOperations.java:360)\r\n\tat org.springframework.data.redis.core.AbstractOperations$ValueDeserializingRedisCallback.doInRedis(AbstractOperations.java:62)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:406)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:173)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field \"coordinates\" (class br.com.ml.mktplace.orders.domain.model.DistributionCenter), not marked as ignorable (3 known properties: \"name\", \"address\", \"code\"])\n at [Source: (byte[])\"[\"[Lbr.com.ml.mktplace.orders.domain.model.DistributionCenter;\",[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\"[truncated 161 bytes]; line: 1, column: 504] (through reference chain: java.lang.Object[][0]->br.com.ml.mktplace.orders.domain.model.DistributionCenter[\"coordinates\"])\r\n\tat com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException.from(UnrecognizedPropertyException.java:61)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.handleUnknownProperty(DeserializationContext.java:1138)\r\n\tat com.fasterxml.jackson.databind.deser.std.StdDeserializer.handleUnknownProperty(StdDeserializer.java:2224)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownProperty(BeanDeserializerBase.java:1709)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownVanilla(BeanDeserializerBase.java:1687)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:284)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeUsingPropertyBased(BeanDeserializer.java:463)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1409)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:352)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeOther(BeanDeserializer.java:220)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:187)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer._deserializeTypedForId(AsPropertyTypeDeserializer.java:170)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromObject(AsPropertyTypeDeserializer.java:136)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeWithType(BeanDeserializerBase.java:1296)\r\n\tat com.fasterxml.jackson.databind.deser.std.ObjectArrayDeserializer.deserialize(ObjectArrayDeserializer.java:219)\r\n\tat com.fasterxml.jackson.databind.deser.std.ObjectArrayDeserializer.deserialize(ObjectArrayDeserializer.java:27)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._deserialize(AsArrayTypeDeserializer.java:120)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer.deserializeTypedFromArray(AsArrayTypeDeserializer.java:53)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromAny(AsPropertyTypeDeserializer.java:238)\r\n\tat com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR.deserializeWithType(UntypedObjectDeserializerNR.java:115)\r\n\tat com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:74)\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4825)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3874)\r\n\tat org.springframework.data.redis.serializer.JacksonObjectReader.lambda$create$0(JacksonObjectReader.java:54)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:289)\r\n\t... 48 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.4034903-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-7","correlationId":"51b81703-2e3b-46fb-829f-f7e799a14a31","message":"Order processed successfully - ID: 01K5VRTWA9EYF4WWBKZD8W5YBH, Status: PROCESSED, Correlation ID: 51b81703-2e3b-46fb-829f-f7e799a14a31","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.4034903-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.4034903-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item ASYNC-PROC-1 pedido 01K5VRTWA9EYF4WWBKZD8W5YBH -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.406846-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.406846-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.406846-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRTWA9EYF4WWBKZD8W5YBH","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.4129696-03:00","level":"INFO","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100503: On release of batch it still contained JDBC statements","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.4129696-03:00","level":"ERROR","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100501: Exception executing batch [org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?], SQL: delete from order_items where id=?","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.4187753-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"588f0feb-3045-4a24-ac6c-18a64d0f0453","message":"Fetching order by ID: 01K5VRTWA9EYF4WWBKZD8W5YBH - Correlation ID: 1d0b4734-9e45-4287-a904-f855a227bc0b","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.4182412-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRTWA9EYF4WWBKZD8W5YBH from event: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?","exception":"org.springframework.orm.ObjectOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:328)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:565)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:669)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:419)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:67)\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:54)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.checkRowCounts(BatchImpl.java:314)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:278)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.PreparedStatementGroupSingleTable.forEachStatement(PreparedStatementGroupSingleTable.java:59)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.performExecution(BatchImpl.java:260)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.execute(BatchImpl.java:239)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.executeBatch(JdbcCoordinatorImpl.java:188)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:659)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1415)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:496)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2325)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1988)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:561)\r\n\t... 31 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.4266527-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"588f0feb-3045-4a24-ac6c-18a64d0f0453","message":"Order retrieved successfully - ID: 01K5VRTWA9EYF4WWBKZD8W5YBH, Status: PROCESSED, Correlation ID: 1d0b4734-9e45-4287-a904-f855a227bc0b","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.4336492-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT]: OrderEventConsumptionIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.4341846-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.4763213-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-3","correlationId":"6ccb5e46-f52f-481e-8142-efc249f7f388","message":"Processing new order request - Correlation ID: 8bc7768b-d88f-4c76-b5ef-ff63a8f6ae69, Customer: customer-event-consumer, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.4833273-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"6ccb5e46-f52f-481e-8142-efc249f7f388","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.4839436-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"6ccb5e46-f52f-481e-8142-efc249f7f388","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.4839436-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"6ccb5e46-f52f-481e-8142-efc249f7f388","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRTWEC4KR9Y0K6Z67PWARW","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.4943723-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-3","correlationId":"6ccb5e46-f52f-481e-8142-efc249f7f388","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.serializer.SerializationException: Could not read JSON:Unrecognized field \"coordinates\" (class br.com.ml.mktplace.orders.domain.model.DistributionCenter), not marked as ignorable (3 known properties: \"name\", \"address\", \"code\"])\n at [Source: (byte[])\"[\"[Lbr.com.ml.mktplace.orders.domain.model.DistributionCenter;\",[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\"[truncated 161 bytes]; line: 1, column: 504] (through reference chain: java.lang.Object[][0]->br.com.ml.mktplace.orders.domain.model.DistributionCenter[\"coordinates\"]) \r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:292)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:261)\r\n\tat org.springframework.data.redis.core.AbstractOperations.deserializeValue(AbstractOperations.java:360)\r\n\tat org.springframework.data.redis.core.AbstractOperations$ValueDeserializingRedisCallback.doInRedis(AbstractOperations.java:62)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:406)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:173)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field \"coordinates\" (class br.com.ml.mktplace.orders.domain.model.DistributionCenter), not marked as ignorable (3 known properties: \"name\", \"address\", \"code\"])\n at [Source: (byte[])\"[\"[Lbr.com.ml.mktplace.orders.domain.model.DistributionCenter;\",[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\"[truncated 161 bytes]; line: 1, column: 504] (through reference chain: java.lang.Object[][0]->br.com.ml.mktplace.orders.domain.model.DistributionCenter[\"coordinates\"])\r\n\tat com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException.from(UnrecognizedPropertyException.java:61)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.handleUnknownProperty(DeserializationContext.java:1138)\r\n\tat com.fasterxml.jackson.databind.deser.std.StdDeserializer.handleUnknownProperty(StdDeserializer.java:2224)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownProperty(BeanDeserializerBase.java:1709)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownVanilla(BeanDeserializerBase.java:1687)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:284)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeUsingPropertyBased(BeanDeserializer.java:463)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1409)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:352)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeOther(BeanDeserializer.java:220)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:187)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer._deserializeTypedForId(AsPropertyTypeDeserializer.java:170)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromObject(AsPropertyTypeDeserializer.java:136)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeWithType(BeanDeserializerBase.java:1296)\r\n\tat com.fasterxml.jackson.databind.deser.std.ObjectArrayDeserializer.deserialize(ObjectArrayDeserializer.java:219)\r\n\tat com.fasterxml.jackson.databind.deser.std.ObjectArrayDeserializer.deserialize(ObjectArrayDeserializer.java:27)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._deserialize(AsArrayTypeDeserializer.java:120)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer.deserializeTypedFromArray(AsArrayTypeDeserializer.java:53)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromAny(AsPropertyTypeDeserializer.java:238)\r\n\tat com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR.deserializeWithType(UntypedObjectDeserializerNR.java:115)\r\n\tat com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:74)\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4825)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3874)\r\n\tat org.springframework.data.redis.serializer.JacksonObjectReader.lambda$create$0(JacksonObjectReader.java:54)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:289)\r\n\t... 82 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5001794-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-3","correlationId":"6ccb5e46-f52f-481e-8142-efc249f7f388","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5001794-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-3","correlationId":"6ccb5e46-f52f-481e-8142-efc249f7f388","message":"CD selecionado para item EVT-CONSUME-1 pedido 01K5VRTWEC4KR9Y0K6Z67PWARW -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5027819-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"6ccb5e46-f52f-481e-8142-efc249f7f388","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5027819-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"6ccb5e46-f52f-481e-8142-efc249f7f388","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5033305-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"6ccb5e46-f52f-481e-8142-efc249f7f388","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRTWEC4KR9Y0K6Z67PWARW","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5076121-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-3","correlationId":"6ccb5e46-f52f-481e-8142-efc249f7f388","message":"Order processed successfully - ID: 01K5VRTWEC4KR9Y0K6Z67PWARW, Status: PROCESSED, Correlation ID: 8bc7768b-d88f-4c76-b5ef-ff63a8f6ae69","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5091715-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRTWEC4KR9Y0K6Z67PWARW","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5102033-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:53067]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93-2\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.513382-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.513382-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.513382-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758647382513","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5144171-03:00","level":"INFO","logger":"o.a.k.clients.consumer.KafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93-2, groupId=order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5149361-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRTWEC4KR9Y0K6Z67PWARW from event: Failed to process order [01K5VRTWEC4KR9Y0K6Z67PWARW]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRTWEC4KR9Y0K6Z67PWARW]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5191077-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93-2, groupId=order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93] Cluster ID: lu5VHctiSQm5Ys_dGXajEQ","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5196953-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93-2, groupId=order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93] Discovered group coordinator localhost:53067 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5217662-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93-2, groupId=order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5238962-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93-2, groupId=order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93] Request joining group due to: need to re-join with the given member-id: consumer-order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93-2-aee5019e-e34d-4195-9ee5-58030535bdd6","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5244176-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93-2, groupId=order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5244176-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93-2, groupId=order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5280625-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93-2, groupId=order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93] Successfully joined group with generation Generation{generationId=1, memberId='consumer-order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93-2-aee5019e-e34d-4195-9ee5-58030535bdd6', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5285806-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93-2, groupId=order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93] Finished assignment for group at generation 1: {consumer-order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93-2-aee5019e-e34d-4195-9ee5-58030535bdd6=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5322376-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93-2, groupId=order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93] Successfully synced group in generation Generation{generationId=1, memberId='consumer-order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93-2-aee5019e-e34d-4195-9ee5-58030535bdd6', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5327423-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93-2, groupId=order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5327423-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93-2, groupId=order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5343542-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93-2, groupId=order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5387011-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93-2, groupId=order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:53067 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5521129-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93-2, groupId=order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5521129-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93-2, groupId=order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93] Member consumer-order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93-2-aee5019e-e34d-4195-9ee5-58030535bdd6 sending LeaveGroup request to coordinator localhost:53067 (id: 2147483646 rack: null) due to the consumer is being closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5531193-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93-2, groupId=order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:42.5531193-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93-2, groupId=order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.002901-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.0040601-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.0040601-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.0094743-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"App info kafka.consumer for consumer-order-events-test-group-cca91939-2d65-4d06-b285-e6d8d482aa93-2 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.0262233-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventPublishingIT]: OrderEventPublishingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.0272226-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventPublishingIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.0657353-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"fc2e9dc8-d31f-46d3-ad1f-05299cf809f8","message":"Processing new order request - Correlation ID: b7765e04-68bb-47b8-b82f-13a4138d895e, Customer: customer-events, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.0743171-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"fc2e9dc8-d31f-46d3-ad1f-05299cf809f8","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.0748497-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"fc2e9dc8-d31f-46d3-ad1f-05299cf809f8","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.0754109-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"fc2e9dc8-d31f-46d3-ad1f-05299cf809f8","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRTX0TKDBYMZTZW685C66N","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.0857215-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-5","correlationId":"fc2e9dc8-d31f-46d3-ad1f-05299cf809f8","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.serializer.SerializationException: Could not read JSON:Unrecognized field \"coordinates\" (class br.com.ml.mktplace.orders.domain.model.DistributionCenter), not marked as ignorable (3 known properties: \"name\", \"address\", \"code\"])\n at [Source: (byte[])\"[\"[Lbr.com.ml.mktplace.orders.domain.model.DistributionCenter;\",[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\"[truncated 161 bytes]; line: 1, column: 504] (through reference chain: java.lang.Object[][0]->br.com.ml.mktplace.orders.domain.model.DistributionCenter[\"coordinates\"]) \r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:292)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:261)\r\n\tat org.springframework.data.redis.core.AbstractOperations.deserializeValue(AbstractOperations.java:360)\r\n\tat org.springframework.data.redis.core.AbstractOperations$ValueDeserializingRedisCallback.doInRedis(AbstractOperations.java:62)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:406)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:173)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field \"coordinates\" (class br.com.ml.mktplace.orders.domain.model.DistributionCenter), not marked as ignorable (3 known properties: \"name\", \"address\", \"code\"])\n at [Source: (byte[])\"[\"[Lbr.com.ml.mktplace.orders.domain.model.DistributionCenter;\",[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\"[truncated 161 bytes]; line: 1, column: 504] (through reference chain: java.lang.Object[][0]->br.com.ml.mktplace.orders.domain.model.DistributionCenter[\"coordinates\"])\r\n\tat com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException.from(UnrecognizedPropertyException.java:61)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.handleUnknownProperty(DeserializationContext.java:1138)\r\n\tat com.fasterxml.jackson.databind.deser.std.StdDeserializer.handleUnknownProperty(StdDeserializer.java:2224)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownProperty(BeanDeserializerBase.java:1709)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownVanilla(BeanDeserializerBase.java:1687)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:284)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeUsingPropertyBased(BeanDeserializer.java:463)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1409)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:352)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeOther(BeanDeserializer.java:220)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:187)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer._deserializeTypedForId(AsPropertyTypeDeserializer.java:170)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromObject(AsPropertyTypeDeserializer.java:136)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeWithType(BeanDeserializerBase.java:1296)\r\n\tat com.fasterxml.jackson.databind.deser.std.ObjectArrayDeserializer.deserialize(ObjectArrayDeserializer.java:219)\r\n\tat com.fasterxml.jackson.databind.deser.std.ObjectArrayDeserializer.deserialize(ObjectArrayDeserializer.java:27)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._deserialize(AsArrayTypeDeserializer.java:120)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer.deserializeTypedFromArray(AsArrayTypeDeserializer.java:53)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromAny(AsPropertyTypeDeserializer.java:238)\r\n\tat com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR.deserializeWithType(UntypedObjectDeserializerNR.java:115)\r\n\tat com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:74)\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4825)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3874)\r\n\tat org.springframework.data.redis.serializer.JacksonObjectReader.lambda$create$0(JacksonObjectReader.java:54)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:289)\r\n\t... 82 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.0927491-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-5","correlationId":"fc2e9dc8-d31f-46d3-ad1f-05299cf809f8","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.0927491-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-5","correlationId":"fc2e9dc8-d31f-46d3-ad1f-05299cf809f8","message":"CD selecionado para item EVT123 pedido 01K5VRTX0TKDBYMZTZW685C66N -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.0969156-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"fc2e9dc8-d31f-46d3-ad1f-05299cf809f8","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.0969156-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"fc2e9dc8-d31f-46d3-ad1f-05299cf809f8","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.0974931-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"fc2e9dc8-d31f-46d3-ad1f-05299cf809f8","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRTX0TKDBYMZTZW685C66N","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.0985359-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRTX0TKDBYMZTZW685C66N","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.1006317-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"fc2e9dc8-d31f-46d3-ad1f-05299cf809f8","message":"Order processed successfully - ID: 01K5VRTX0TKDBYMZTZW685C66N, Status: PROCESSED, Correlation ID: b7765e04-68bb-47b8-b82f-13a4138d895e","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.1043215-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRTX0TKDBYMZTZW685C66N from event: Failed to process order [01K5VRTX0TKDBYMZTZW685C66N]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRTX0TKDBYMZTZW685C66N]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.1085121-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderFlowIT]: OrderFlowIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.1102012-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderFlowIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.1434195-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"42099827-9b9d-4514-9db3-17b780d0518d","message":"Processing new order request - Correlation ID: 42099827-9b9d-4514-9db3-17b780d0518d, Customer: customer-1, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.1509601-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"42099827-9b9d-4514-9db3-17b780d0518d","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.1509601-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"42099827-9b9d-4514-9db3-17b780d0518d","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.1514824-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"42099827-9b9d-4514-9db3-17b780d0518d","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRTX389RVJ6N5TQ5ARN0CT","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.1607712-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.c.RedisCacheService","thread":"http-nio-auto-1-exec-8","correlationId":"42099827-9b9d-4514-9db3-17b780d0518d","message":"Failed to get value from cache for key: distribution-centers:SP","exception":"org.springframework.data.redis.serializer.SerializationException: Could not read JSON:Unrecognized field \"coordinates\" (class br.com.ml.mktplace.orders.domain.model.DistributionCenter), not marked as ignorable (3 known properties: \"name\", \"address\", \"code\"])\n at [Source: (byte[])\"[\"[Lbr.com.ml.mktplace.orders.domain.model.DistributionCenter;\",[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\"[truncated 161 bytes]; line: 1, column: 504] (through reference chain: java.lang.Object[][0]->br.com.ml.mktplace.orders.domain.model.DistributionCenter[\"coordinates\"]) \r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:292)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:261)\r\n\tat org.springframework.data.redis.core.AbstractOperations.deserializeValue(AbstractOperations.java:360)\r\n\tat org.springframework.data.redis.core.AbstractOperations$ValueDeserializingRedisCallback.doInRedis(AbstractOperations.java:62)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:406)\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:373)\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97)\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:50)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.cache.RedisCacheService.get(RedisCacheService.java:47)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:173)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field \"coordinates\" (class br.com.ml.mktplace.orders.domain.model.DistributionCenter), not marked as ignorable (3 known properties: \"name\", \"address\", \"code\"])\n at [Source: (byte[])\"[\"[Lbr.com.ml.mktplace.orders.domain.model.DistributionCenter;\",[{\"@class\":\"br.com.ml.mktplace.orders.domain.model.DistributionCenter\",\"code\":\"CDPROC\",\"name\":\"CD Proc\",\"address\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address\",\"street\":\"Rua P\",\"city\":\"SP\",\"state\":\"SP\",\"country\":\"BR\",\"zipCode\":\"01000-000\",\"coordinates\":{\"@class\":\"br.com.ml.mktplace.orders.domain.model.Address$Coordinates\",\"latitude\":[\"java.math.BigDecimal\",-23.5],\"longitude\":[\"java.math.BigDecimal\",-46.6]}},\"coordinates\"[truncated 161 bytes]; line: 1, column: 504] (through reference chain: java.lang.Object[][0]->br.com.ml.mktplace.orders.domain.model.DistributionCenter[\"coordinates\"])\r\n\tat com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException.from(UnrecognizedPropertyException.java:61)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.handleUnknownProperty(DeserializationContext.java:1138)\r\n\tat com.fasterxml.jackson.databind.deser.std.StdDeserializer.handleUnknownProperty(StdDeserializer.java:2224)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownProperty(BeanDeserializerBase.java:1709)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownVanilla(BeanDeserializerBase.java:1687)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:284)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeUsingPropertyBased(BeanDeserializer.java:463)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1409)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:352)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeOther(BeanDeserializer.java:220)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:187)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer._deserializeTypedForId(AsPropertyTypeDeserializer.java:170)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromObject(AsPropertyTypeDeserializer.java:136)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeWithType(BeanDeserializerBase.java:1296)\r\n\tat com.fasterxml.jackson.databind.deser.std.ObjectArrayDeserializer.deserialize(ObjectArrayDeserializer.java:219)\r\n\tat com.fasterxml.jackson.databind.deser.std.ObjectArrayDeserializer.deserialize(ObjectArrayDeserializer.java:27)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._deserialize(AsArrayTypeDeserializer.java:120)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer.deserializeTypedFromArray(AsArrayTypeDeserializer.java:53)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromAny(AsPropertyTypeDeserializer.java:238)\r\n\tat com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR.deserializeWithType(UntypedObjectDeserializerNR.java:115)\r\n\tat com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:74)\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4825)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3874)\r\n\tat org.springframework.data.redis.serializer.JacksonObjectReader.lambda$create$0(JacksonObjectReader.java:54)\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.deserialize(GenericJackson2JsonRedisSerializer.java:289)\r\n\t... 82 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.1672186-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-8","correlationId":"42099827-9b9d-4514-9db3-17b780d0518d","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.1677728-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-8","correlationId":"42099827-9b9d-4514-9db3-17b780d0518d","message":"CD selecionado para item ABC123 pedido 01K5VRTX389RVJ6N5TQ5ARN0CT -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.1710056-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"42099827-9b9d-4514-9db3-17b780d0518d","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.1715708-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"42099827-9b9d-4514-9db3-17b780d0518d","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.1720944-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"42099827-9b9d-4514-9db3-17b780d0518d","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRTX389RVJ6N5TQ5ARN0CT","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.1757846-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRTX389RVJ6N5TQ5ARN0CT","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.1768561-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"42099827-9b9d-4514-9db3-17b780d0518d","message":"Order processed successfully - ID: 01K5VRTX389RVJ6N5TQ5ARN0CT, Status: PROCESSED, Correlation ID: 42099827-9b9d-4514-9db3-17b780d0518d","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.18052-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRTX389RVJ6N5TQ5ARN0CT from event: Failed to process order [01K5VRTX389RVJ6N5TQ5ARN0CT]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRTX389RVJ6N5TQ5ARN0CT]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.1815777-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"0de0e5f7-6f88-44c3-8ce8-8a7e3a8d78b5","message":"Fetching order by ID: 01K5VRTX389RVJ6N5TQ5ARN0CT - Correlation ID: fb0a56b1-dea9-4a6e-814f-b94ae80afdf4","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.1864285-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"0de0e5f7-6f88-44c3-8ce8-8a7e3a8d78b5","message":"Order retrieved successfully - ID: 01K5VRTX389RVJ6N5TQ5ARN0CT, Status: PROCESSED, Correlation ID: fb0a56b1-dea9-4a6e-814f-b94ae80afdf4","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.2558185-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.2558185-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.4182978-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 2147483646 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.4188635-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.4195815-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.4195815-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight FETCH request with correlation id 27 due to node 1 being disconnected (elapsed time since creation: 229ms, elapsed time since send: 229ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.4195815-03:00","level":"INFO","logger":"o.a.k.clients.FetchSessionHandler","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error sending fetch request (sessionId=1484991271, epoch=14) to node 1:","exception":"org.apache.kafka.common.errors.DisconnectException: null\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.4203187-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.4203187-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.4209121-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cancelled in-flight API_VERSIONS request with correlation id 13 due to node 1 being disconnected (elapsed time since creation: 2ms, elapsed time since send: 2ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.4209121-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions revoked: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.4215347-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Member consumer-orders-service-it-consumer-1-4032ece2-be25-449d-b934-e5e0cd8b233f sending LeaveGroup request to coordinator localhost:53067 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.4220634-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.4220634-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.4220634-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Unsubscribed all topics or patterns and assigned partitions","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.4226111-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.4226111-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.4232297-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 2147483646 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.4232297-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight API_VERSIONS request with correlation id 29 due to node 2147483646 being disconnected (elapsed time since creation: 1ms, elapsed time since send: 1ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.4232297-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Group coordinator localhost:53067 (id: 2147483646 rack: null) is unavailable or invalid due to cause: null. isDisconnected: true. Rediscovery will be attempted.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.4243496-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.4243496-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.4243496-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.4253982-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"App info kafka.consumer for consumer-orders-service-it-consumer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.4259133-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: Consumer stopped","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.5308135-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.5308135-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cancelled in-flight API_VERSIONS request with correlation id 14 due to node 1 being disconnected (elapsed time since creation: 2ms, elapsed time since send: 2ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.5605207-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"SpringApplicationShutdownHook","message":"[Producer clientId=orders-service-producer-1] Closing the Kafka producer with timeoutMillis = 30000 ms.","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.5651266-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.5651266-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.5651266-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.5661264-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"SpringApplicationShutdownHook","message":"App info kafka.producer for orders-service-producer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.608994-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"SpringApplicationShutdownHook","message":"Closing JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.6104989-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown initiated...","service":"orders-service"}
{"timestamp":"2025-09-23T14:09:43.612477-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown completed.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:19.0393564-03:00","level":"INFO","logger":"o.h.validator.internal.util.Version","thread":"background-preinit","message":"HV000001: Hibernate Validator 8.0.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:19.1087374-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Starting DistributionCenterCachingIT using Java 21.0.8 with PID 30464 (started by ciror in Z:\\projects\\meli-test-mktplace)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:19.111756-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"The following 1 profile is active: \"integration-test\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:19.8930354-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:19.8935471-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:20.0154571-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 116 ms. Found 1 JPA repository interface.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:20.6251641-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:20.626669-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data Redis repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:20.6708808-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationExtensionSupport","thread":"main","message":"Spring Data Redis - Could not safely identify store assignment for repository candidate interface br.com.ml.mktplace.orders.adapter.outbound.persistence.repository.JpaOrderEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:20.6708808-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 26 ms. Found 0 Redis repository interfaces.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:22.0556818-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat initialized with port 0 (http)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:22.0683414-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Initializing ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:22.0709548-03:00","level":"INFO","logger":"o.a.catalina.core.StandardService","thread":"main","message":"Starting service [Tomcat]","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:22.0724646-03:00","level":"INFO","logger":"o.a.catalina.core.StandardEngine","thread":"main","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:22.1687709-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"main","message":"Initializing Spring embedded WebApplicationContext","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:22.169792-03:00","level":"INFO","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","thread":"main","message":"Root WebApplicationContext: initialization completed in 3035 ms","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:22.630463-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Starting...","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:22.901096-03:00","level":"INFO","logger":"com.zaxxer.hikari.pool.HikariPool","thread":"main","message":"OrdersHikariPool - Added connection org.postgresql.jdbc.PgConnection@56bf0270","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:22.9076386-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Start completed.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:23.1016259-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"Flyway Community Edition 9.22.3 by Redgate","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:23.1016259-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"See release notes here: https://rd.gt/416ObMi","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:23.1016259-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:23.1352791-03:00","level":"INFO","logger":"org.flywaydb.core.FlywayExecutor","thread":"main","message":"Database: jdbc:postgresql://localhost:53134/mktplace_orders (PostgreSQL 16.4)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:23.1466954-03:00","level":"WARN","logger":"o.f.c.i.database.base.Database","thread":"main","message":"Flyway upgrade recommended: PostgreSQL 16.4 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:23.1974822-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Schema history table \"public\".\"flyway_schema_history\" does not exist yet","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:23.2043788-03:00","level":"INFO","logger":"o.f.core.internal.command.DbValidate","thread":"main","message":"Successfully validated 2 migrations (execution time 00:00.039s)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:23.2250191-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Creating Schema History table \"public\".\"flyway_schema_history\" ...","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:23.2693315-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Current version of schema \"public\": << Empty Schema >>","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:23.2844999-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"1 - initial schema\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:23.2950216-03:00","level":"WARN","logger":"o.f.c.i.s.DefaultSqlScriptExecutor","thread":"main","message":"DB: extension \"postgis\" already exists, skipping (SQL State: 42710 - Error Code: 0)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:23.3437768-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"2 - sample distribution centers\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:23.3677299-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Successfully applied 2 migrations to schema \"public\", now at version v2 (execution time 00:00.044s)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:23.4666537-03:00","level":"INFO","logger":"o.h.jpa.internal.util.LogHelper","thread":"main","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:23.5411585-03:00","level":"INFO","logger":"org.hibernate.Version","thread":"main","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:23.5506928-03:00","level":"INFO","logger":"o.h.s.integration.SpatialService","thread":"main","message":"HHH80000001: hibernate-spatial integration enabled : true","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:23.5834798-03:00","level":"INFO","logger":"o.h.c.i.RegionFactoryInitiator","thread":"main","message":"HHH000026: Second-level cache disabled","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:23.7433933-03:00","level":"WARN","logger":"org.hibernate.orm.deprecation","thread":"main","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:23.7713037-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:24.0341587-03:00","level":"INFO","logger":"o.s.o.j.p.SpringPersistenceUnitInfo","thread":"main","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:24.060311-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:24.5258369-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000004: hibernate-spatial adding function contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:25.3265424-03:00","level":"INFO","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator","thread":"main","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:25.3464476-03:00","level":"INFO","logger":"o.hibernate.orm.connections.access","thread":"main","message":"HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@1d72edfd] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:25.3749894-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"main","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:25.9743183-03:00","level":"INFO","logger":"o.s.d.j.r.query.QueryEnhancerFactory","thread":"main","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:27.5329724-03:00","level":"WARN","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration","thread":"main","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:28.7059646-03:00","level":"INFO","logger":"o.s.b.a.e.web.EndpointLinksResolver","thread":"main","message":"Exposing 5 endpoint(s) beneath base path '/actuator'","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:28.8186154-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Starting ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:28.830116-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat started on port 53145 (http) with context path '/api'","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:28.8723915-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:53137]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-orders-service-it-consumer-1\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = orders-service-it-consumer\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:29.0198135-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:29.0198135-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:29.0198135-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758647489016","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:29.0268219-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:29.0408528-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Started DistributionCenterCachingIT in 10.659 seconds (process running for 18.9)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:29.4706268-03:00","level":"WARN","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error while fetching metadata with correlation id 2 : {orders.events=LEADER_NOT_AVAILABLE}","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:29.4721909-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cluster ID: CNprjvLGT2aIsL8X2HnCoQ","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:29.5816474-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Discovered group coordinator localhost:53137 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:29.5896221-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:29.6161948-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: need to re-join with the given member-id: consumer-orders-service-it-consumer-1-9c076ff8-f935-460d-a3e2-de7ad01929d7","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:29.6168201-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:29.6168201-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:29.631687-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully joined group with generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-9c076ff8-f935-460d-a3e2-de7ad01929d7', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:29.6391221-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Finished assignment for group at generation 1: {consumer-orders-service-it-consumer-1-9c076ff8-f935-460d-a3e2-de7ad01929d7=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:29.6714756-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully synced group in generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-9c076ff8-f935-460d-a3e2-de7ad01929d7', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:29.6725232-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:29.6762036-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:29.6894884-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:29.7027429-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:53137 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:29.7038207-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions assigned: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:30.7830456-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"http-nio-auto-1-exec-1","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:30.7830456-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-1","message":"Initializing Servlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:30.7850474-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-1","message":"Completed initialization in 2 ms","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:30.9503093-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"45c722b0-0cc6-4976-996c-2d78b54aa797","message":"Processing new order request - Correlation ID: b59ec902-5168-428d-95e2-84227b700119, Customer: customer-cache, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:31.4810622-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"45c722b0-0cc6-4976-996c-2d78b54aa797","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:31.4810622-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"45c722b0-0cc6-4976-996c-2d78b54aa797","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:31.5032053-03:00","level":"INFO","logger":"o.a.k.c.producer.ProducerConfig","thread":"http-nio-auto-1-exec-1","correlationId":"45c722b0-0cc6-4976-996c-2d78b54aa797","message":"ProducerConfig values: \r\n\tacks = -1\r\n\tauto.include.jmx.reporter = true\r\n\tbatch.size = 16384\r\n\tbootstrap.servers = [PLAINTEXT://localhost:53137]\r\n\tbuffer.memory = 33554432\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = orders-service-producer-1\r\n\tcompression.type = snappy\r\n\tconnections.max.idle.ms = 540000\r\n\tdelivery.timeout.ms = 120000\r\n\tenable.idempotence = true\r\n\tinterceptor.classes = []\r\n\tkey.serializer = class org.apache.kafka.common.serialization.StringSerializer\r\n\tlinger.ms = 10\r\n\tmax.block.ms = 60000\r\n\tmax.in.flight.requests.per.connection = 5\r\n\tmax.request.size = 1048576\r\n\tmetadata.max.age.ms = 300000\r\n\tmetadata.max.idle.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartitioner.adaptive.partitioning.enable = true\r\n\tpartitioner.availability.timeout.ms = 0\r\n\tpartitioner.class = null\r\n\tpartitioner.ignore.keys = false\r\n\treceive.buffer.bytes = 32768\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretries = 3\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\ttransaction.timeout.ms = 60000\r\n\ttransactional.id = null\r\n\tvalue.serializer = class org.springframework.kafka.support.serializer.JsonSerializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:31.5252984-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"http-nio-auto-1-exec-1","correlationId":"45c722b0-0cc6-4976-996c-2d78b54aa797","message":"[Producer clientId=orders-service-producer-1] Instantiated an idempotent producer.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:31.5477408-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"45c722b0-0cc6-4976-996c-2d78b54aa797","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:31.5487386-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"45c722b0-0cc6-4976-996c-2d78b54aa797","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:31.5487386-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"45c722b0-0cc6-4976-996c-2d78b54aa797","message":"Kafka startTimeMs: 1758647491547","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:31.5559704-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cluster ID: CNprjvLGT2aIsL8X2HnCoQ","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:31.5707235-03:00","level":"INFO","logger":"o.a.k.c.p.i.TransactionManager","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] ProducerId set to 0 with epoch 0","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:31.7513872-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"45c722b0-0cc6-4976-996c-2d78b54aa797","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRY6CSYT19XRQF6QEHSH4D","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:31.8160949-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRY6CSYT19XRQF6QEHSH4D","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.186948-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.h.HttpDistributionCenterService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to fetch all distribution centers","exception":"org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.1879495-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.h.HttpDistributionCenterService","thread":"http-nio-auto-1-exec-1","correlationId":"45c722b0-0cc6-4976-996c-2d78b54aa797","message":"Failed to fetch all distribution centers","exception":"org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.1933038-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"45c722b0-0cc6-4976-996c-2d78b54aa797","message":"Publishing event to topic: order.failed - Event: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.1933038-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.failed - Event: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.1933038-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"45c722b0-0cc6-4976-996c-2d78b54aa797","message":"Event published successfully: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.1933038-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.1938287-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"45c722b0-0cc6-4976-996c-2d78b54aa797","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRY6CSYT19XRQF6QEHSH4D","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.1943487-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRY6CSYT19XRQF6QEHSH4D","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.1974534-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRY6CSYT19XRQF6QEHSH4D from event: Failed to process order [01K5VRY6CSYT19XRQF6QEHSH4D]: Distribution center service unavailable","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRY6CSYT19XRQF6QEHSH4D]: Distribution center service unavailable\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:165)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: br.com.ml.mktplace.orders.domain.model.ExternalServiceException: External service error [DistributionCenterService]: Failed to fetch all distribution centers\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:125)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\t... 38 common frames omitted\r\nCaused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\t... 40 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.1974534-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"45c722b0-0cc6-4976-996c-2d78b54aa797","message":"Failed to process order - Correlation ID: b59ec902-5168-428d-95e2-84227b700119","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRY6CSYT19XRQF6QEHSH4D]: Distribution center service unavailable\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:165)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: br.com.ml.mktplace.orders.domain.model.ExternalServiceException: External service error [DistributionCenterService]: Failed to fetch all distribution centers\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:125)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\t... 72 common frames omitted\r\nCaused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\t... 74 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.2022995-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.r.h.GlobalExceptionHandler","thread":"http-nio-auto-1-exec-1","correlationId":"45c722b0-0cc6-4976-996c-2d78b54aa797","message":"Order processing error - Correlation ID: 7afa11b9-bc91-446e-9e26-c69e1108cb24, Order ID: 01K5VRY6CSYT19XRQF6QEHSH4D, Message: Failed to process order [01K5VRY6CSYT19XRQF6QEHSH4D]: Distribution center service unavailable","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRY6CSYT19XRQF6QEHSH4D]: Distribution center service unavailable\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:165)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: br.com.ml.mktplace.orders.domain.model.ExternalServiceException: External service error [DistributionCenterService]: Failed to fetch all distribution centers\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:125)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\t... 72 common frames omitted\r\nCaused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\t... 74 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.4012881-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT]: OrderEndToEndProcessingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.4053294-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.4546484-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-7","correlationId":"ef5eb908-a400-4a8d-ab8b-0e42850ec7a5","message":"Processing new order request - Correlation ID: ef5eb908-a400-4a8d-ab8b-0e42850ec7a5, Customer: customer-async-proc, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.4621747-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"ef5eb908-a400-4a8d-ab8b-0e42850ec7a5","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.4627152-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"ef5eb908-a400-4a8d-ab8b-0e42850ec7a5","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.4632507-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"ef5eb908-a400-4a8d-ab8b-0e42850ec7a5","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRY7V7R535NWSAHKPTJF0T","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.4780688-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRY7V7R535NWSAHKPTJF0T","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.4991864-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.4991864-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-7","correlationId":"ef5eb908-a400-4a8d-ab8b-0e42850ec7a5","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.4997268-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item ASYNC-PROC-1 pedido 01K5VRY7V7R535NWSAHKPTJF0T -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.4997268-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-7","correlationId":"ef5eb908-a400-4a8d-ab8b-0e42850ec7a5","message":"CD selecionado para item ASYNC-PROC-1 pedido 01K5VRY7V7R535NWSAHKPTJF0T -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.5024335-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.5024335-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.5029597-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRY7V7R535NWSAHKPTJF0T","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.5029597-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"ef5eb908-a400-4a8d-ab8b-0e42850ec7a5","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.5034853-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"ef5eb908-a400-4a8d-ab8b-0e42850ec7a5","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.5040107-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"ef5eb908-a400-4a8d-ab8b-0e42850ec7a5","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRY7V7R535NWSAHKPTJF0T","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.5141403-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-7","correlationId":"ef5eb908-a400-4a8d-ab8b-0e42850ec7a5","message":"Order processed successfully - ID: 01K5VRY7V7R535NWSAHKPTJF0T, Status: PROCESSED, Correlation ID: ef5eb908-a400-4a8d-ab8b-0e42850ec7a5","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.515656-03:00","level":"INFO","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100503: On release of batch it still contained JDBC statements","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.517195-03:00","level":"ERROR","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100501: Exception executing batch [org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?], SQL: delete from order_items where id=?","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.522023-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRY7V7R535NWSAHKPTJF0T from event: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?","exception":"org.springframework.orm.ObjectOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:328)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:565)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:669)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:419)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:67)\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:54)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.checkRowCounts(BatchImpl.java:314)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:278)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.PreparedStatementGroupSingleTable.forEachStatement(PreparedStatementGroupSingleTable.java:59)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.performExecution(BatchImpl.java:260)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.execute(BatchImpl.java:239)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.executeBatch(JdbcCoordinatorImpl.java:188)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:659)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1415)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:496)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2325)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1988)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:561)\r\n\t... 31 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.5269128-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"2a46a9f1-796e-48f4-857a-18603534d7a0","message":"Fetching order by ID: 01K5VRY7V7R535NWSAHKPTJF0T - Correlation ID: e474a43b-cef0-4284-a178-094c12aca4df","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.5339873-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"2a46a9f1-796e-48f4-857a-18603534d7a0","message":"Order retrieved successfully - ID: 01K5VRY7V7R535NWSAHKPTJF0T, Status: PROCESSED, Correlation ID: e474a43b-cef0-4284-a178-094c12aca4df","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.5409233-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT]: OrderEventConsumptionIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.5425102-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.5849563-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"17972c91-6f16-4a5d-a5d7-d2677816ebab","message":"Processing new order request - Correlation ID: c6f0b9dd-1c57-41e7-9849-38b20ec54c90, Customer: customer-event-consumer, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.5921229-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"17972c91-6f16-4a5d-a5d7-d2677816ebab","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.5921229-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"17972c91-6f16-4a5d-a5d7-d2677816ebab","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.5926859-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"17972c91-6f16-4a5d-a5d7-d2677816ebab","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRY7Z92X6BAPGAW09S2870","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.609363-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-6","correlationId":"17972c91-6f16-4a5d-a5d7-d2677816ebab","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.6099068-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-6","correlationId":"17972c91-6f16-4a5d-a5d7-d2677816ebab","message":"CD selecionado para item EVT-CONSUME-1 pedido 01K5VRY7Z92X6BAPGAW09S2870 -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.6127066-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"17972c91-6f16-4a5d-a5d7-d2677816ebab","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.613353-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"17972c91-6f16-4a5d-a5d7-d2677816ebab","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.6139182-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"17972c91-6f16-4a5d-a5d7-d2677816ebab","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRY7Z92X6BAPGAW09S2870","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.6170506-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRY7Z92X6BAPGAW09S2870","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.6181155-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"17972c91-6f16-4a5d-a5d7-d2677816ebab","message":"Order processed successfully - ID: 01K5VRY7Z92X6BAPGAW09S2870, Status: PROCESSED, Correlation ID: c6f0b9dd-1c57-41e7-9849-38b20ec54c90","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.6207299-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:53137]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75-2\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.6218328-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRY7Z92X6BAPGAW09S2870 from event: Failed to process order [01K5VRY7Z92X6BAPGAW09S2870]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRY7Z92X6BAPGAW09S2870]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.6234671-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.6234671-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.6234671-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758647492623","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.6246017-03:00","level":"INFO","logger":"o.a.k.clients.consumer.KafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75-2, groupId=order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.6295312-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75-2, groupId=order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75] Cluster ID: CNprjvLGT2aIsL8X2HnCoQ","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.6300681-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75-2, groupId=order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75] Discovered group coordinator localhost:53137 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.6317004-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75-2, groupId=order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.6340957-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75-2, groupId=order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75] Request joining group due to: need to re-join with the given member-id: consumer-order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75-2-45774d5c-b82f-4672-a171-522cd8e739b1","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.6340957-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75-2, groupId=order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.6346144-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75-2, groupId=order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.6388792-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75-2, groupId=order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75] Successfully joined group with generation Generation{generationId=1, memberId='consumer-order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75-2-45774d5c-b82f-4672-a171-522cd8e739b1', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.6388792-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75-2, groupId=order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75] Finished assignment for group at generation 1: {consumer-order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75-2-45774d5c-b82f-4672-a171-522cd8e739b1=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.6424698-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75-2, groupId=order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75] Successfully synced group in generation Generation{generationId=1, memberId='consumer-order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75-2-45774d5c-b82f-4672-a171-522cd8e739b1', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.6430197-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75-2, groupId=order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.6436228-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75-2, groupId=order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.6452661-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75-2, groupId=order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.6495529-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75-2, groupId=order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:53137 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.6623419-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75-2, groupId=order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.6628962-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75-2, groupId=order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75] Member consumer-order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75-2-45774d5c-b82f-4672-a171-522cd8e739b1 sending LeaveGroup request to coordinator localhost:53137 (id: 2147483646 rack: null) due to the consumer is being closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.663469-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75-2, groupId=order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:32.663469-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75-2, groupId=order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.1111471-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.1123198-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.1123198-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.1172401-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"App info kafka.consumer for consumer-order-events-test-group-0630dc5b-a4e6-4fd5-8681-146171b47d75-2 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.1296789-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventPublishingIT]: OrderEventPublishingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.1306794-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventPublishingIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.1733039-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"57d9306a-2e92-4d9f-9438-f5c2e5783bcc","message":"Processing new order request - Correlation ID: c6b7389c-8e21-46c9-9f64-2c5a1ad93d21, Customer: customer-events, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.1809752-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"57d9306a-2e92-4d9f-9438-f5c2e5783bcc","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.1809752-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"57d9306a-2e92-4d9f-9438-f5c2e5783bcc","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.181494-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"57d9306a-2e92-4d9f-9438-f5c2e5783bcc","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRY8HNNFVJG44PF4NC91K3","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.1917454-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-2","correlationId":"57d9306a-2e92-4d9f-9438-f5c2e5783bcc","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.1917454-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-2","correlationId":"57d9306a-2e92-4d9f-9438-f5c2e5783bcc","message":"CD selecionado para item EVT123 pedido 01K5VRY8HNNFVJG44PF4NC91K3 -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.1951748-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"57d9306a-2e92-4d9f-9438-f5c2e5783bcc","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.1951748-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"57d9306a-2e92-4d9f-9438-f5c2e5783bcc","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.1951748-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"57d9306a-2e92-4d9f-9438-f5c2e5783bcc","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRY8HNNFVJG44PF4NC91K3","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.1991714-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"57d9306a-2e92-4d9f-9438-f5c2e5783bcc","message":"Order processed successfully - ID: 01K5VRY8HNNFVJG44PF4NC91K3, Status: PROCESSED, Correlation ID: c6b7389c-8e21-46c9-9f64-2c5a1ad93d21","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.2060117-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRY8HNNFVJG44PF4NC91K3","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.2060117-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderFlowIT]: OrderFlowIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.2075731-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderFlowIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.2117377-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRY8HNNFVJG44PF4NC91K3 from event: Failed to process order [01K5VRY8HNNFVJG44PF4NC91K3]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRY8HNNFVJG44PF4NC91K3]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.2339518-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"dc100fb7-49ab-4107-a7d6-8fd0537afef1","message":"Processing new order request - Correlation ID: dc100fb7-49ab-4107-a7d6-8fd0537afef1, Customer: customer-1, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.2401065-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"dc100fb7-49ab-4107-a7d6-8fd0537afef1","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.2406565-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"dc100fb7-49ab-4107-a7d6-8fd0537afef1","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.2411766-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"dc100fb7-49ab-4107-a7d6-8fd0537afef1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRY8KHETXSF830PWGETRJE","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.2498302-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-8","correlationId":"dc100fb7-49ab-4107-a7d6-8fd0537afef1","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.2503808-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-8","correlationId":"dc100fb7-49ab-4107-a7d6-8fd0537afef1","message":"CD selecionado para item ABC123 pedido 01K5VRY8KHETXSF830PWGETRJE -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.2519849-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"dc100fb7-49ab-4107-a7d6-8fd0537afef1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.2525348-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"dc100fb7-49ab-4107-a7d6-8fd0537afef1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.2525348-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"dc100fb7-49ab-4107-a7d6-8fd0537afef1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRY8KHETXSF830PWGETRJE","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.2568223-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"dc100fb7-49ab-4107-a7d6-8fd0537afef1","message":"Order processed successfully - ID: 01K5VRY8KHETXSF830PWGETRJE, Status: PROCESSED, Correlation ID: dc100fb7-49ab-4107-a7d6-8fd0537afef1","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.2613395-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-9","correlationId":"788573d5-9b21-455b-ad63-d6c4e7997c76","message":"Fetching order by ID: 01K5VRY8KHETXSF830PWGETRJE - Correlation ID: 1bbf7e0b-facc-4224-8a3d-277f0e38feb8","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.2667052-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-9","correlationId":"788573d5-9b21-455b-ad63-d6c4e7997c76","message":"Order retrieved successfully - ID: 01K5VRY8KHETXSF830PWGETRJE, Status: PROCESSED, Correlation ID: 1bbf7e0b-facc-4224-8a3d-277f0e38feb8","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.2672132-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRY8KHETXSF830PWGETRJE","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.270895-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRY8KHETXSF830PWGETRJE from event: Failed to process order [01K5VRY8KHETXSF830PWGETRJE]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRY8KHETXSF830PWGETRJE]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.4941275-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.4947226-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions revoked: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.4959132-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Member consumer-orders-service-it-consumer-1-9c076ff8-f935-460d-a3e2-de7ad01929d7 sending LeaveGroup request to coordinator localhost:53137 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.4965442-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.4965442-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.4965442-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Unsubscribed all topics or patterns and assigned partitions","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.4970526-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.4970526-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.5378253-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 2147483646 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.5378253-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.5383354-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.5390189-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.5390189-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight FETCH request with correlation id 26 due to node 1 being disconnected (elapsed time since creation: 273ms, elapsed time since send: 273ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.5390189-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight FETCH request with correlation id 28 due to node 1 being disconnected (elapsed time since creation: 39ms, elapsed time since send: 39ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.5390189-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight METADATA request with correlation id 29 due to node 1 being disconnected (elapsed time since creation: 1ms, elapsed time since send: 1ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.539633-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.539633-03:00","level":"INFO","logger":"o.a.k.clients.FetchSessionHandler","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error sending fetch request (sessionId=1183156147, epoch=FINAL) to node 1:","exception":"org.apache.kafka.common.errors.DisconnectException: null\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.5401826-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.5401826-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.5401826-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.5424606-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"App info kafka.consumer for consumer-orders-service-it-consumer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.5430645-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: Consumer stopped","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.6540574-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.65461-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cancelled in-flight API_VERSIONS request with correlation id 12 due to node 1 being disconnected (elapsed time since creation: 4ms, elapsed time since send: 4ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.6711644-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"SpringApplicationShutdownHook","message":"[Producer clientId=orders-service-producer-1] Closing the Kafka producer with timeoutMillis = 30000 ms.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.6731735-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.6731735-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.6731735-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.6731735-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"SpringApplicationShutdownHook","message":"App info kafka.producer for orders-service-producer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.6889013-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"SpringApplicationShutdownHook","message":"Closing JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.6898761-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown initiated...","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:33.6918735-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown completed.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:43.4344949-03:00","level":"INFO","logger":"o.h.validator.internal.util.Version","thread":"background-preinit","message":"HV000001: Hibernate Validator 8.0.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:43.5146092-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Starting DistributionCenterCachingIT using Java 21.0.8 with PID 640 (started by ciror in Z:\\projects\\meli-test-mktplace)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:43.5176117-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"The following 1 profile is active: \"integration-test\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:44.3759808-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:44.3759808-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:44.532236-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 146 ms. Found 1 JPA repository interface.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:45.1320378-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:45.1340297-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data Redis repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:45.1795281-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationExtensionSupport","thread":"main","message":"Spring Data Redis - Could not safely identify store assignment for repository candidate interface br.com.ml.mktplace.orders.adapter.outbound.persistence.repository.JpaOrderEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:45.1795281-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 23 ms. Found 0 Redis repository interfaces.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:46.4761208-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat initialized with port 0 (http)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:46.4891499-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Initializing ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:46.4913484-03:00","level":"INFO","logger":"o.a.catalina.core.StandardService","thread":"main","message":"Starting service [Tomcat]","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:46.4923397-03:00","level":"INFO","logger":"o.a.catalina.core.StandardEngine","thread":"main","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:46.5933737-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"main","message":"Initializing Spring embedded WebApplicationContext","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:46.5943813-03:00","level":"INFO","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","thread":"main","message":"Root WebApplicationContext: initialization completed in 3043 ms","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:47.0662605-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Starting...","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:47.3556734-03:00","level":"INFO","logger":"com.zaxxer.hikari.pool.HikariPool","thread":"main","message":"OrdersHikariPool - Added connection org.postgresql.jdbc.PgConnection@70cbe9f9","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:47.3591985-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Start completed.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:47.5538447-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"Flyway Community Edition 9.22.3 by Redgate","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:47.5543627-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"See release notes here: https://rd.gt/416ObMi","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:47.5543627-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:47.5860148-03:00","level":"INFO","logger":"org.flywaydb.core.FlywayExecutor","thread":"main","message":"Database: jdbc:postgresql://localhost:53179/mktplace_orders (PostgreSQL 16.4)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:47.5986266-03:00","level":"WARN","logger":"o.f.c.i.database.base.Database","thread":"main","message":"Flyway upgrade recommended: PostgreSQL 16.4 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:47.6463842-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Schema history table \"public\".\"flyway_schema_history\" does not exist yet","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:47.6524057-03:00","level":"INFO","logger":"o.f.core.internal.command.DbValidate","thread":"main","message":"Successfully validated 2 migrations (execution time 00:00.034s)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:47.6735186-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Creating Schema History table \"public\".\"flyway_schema_history\" ...","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:47.7094791-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Current version of schema \"public\": << Empty Schema >>","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:47.7256007-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"1 - initial schema\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:47.733246-03:00","level":"WARN","logger":"o.f.c.i.s.DefaultSqlScriptExecutor","thread":"main","message":"DB: extension \"postgis\" already exists, skipping (SQL State: 42710 - Error Code: 0)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:47.7742998-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"2 - sample distribution centers\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:47.7880497-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Successfully applied 2 migrations to schema \"public\", now at version v2 (execution time 00:00.036s)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:47.8664818-03:00","level":"INFO","logger":"o.h.jpa.internal.util.LogHelper","thread":"main","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:47.9446916-03:00","level":"INFO","logger":"org.hibernate.Version","thread":"main","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:47.9522186-03:00","level":"INFO","logger":"o.h.s.integration.SpatialService","thread":"main","message":"HHH80000001: hibernate-spatial integration enabled : true","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:47.9882557-03:00","level":"INFO","logger":"o.h.c.i.RegionFactoryInitiator","thread":"main","message":"HHH000026: Second-level cache disabled","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:48.0877112-03:00","level":"WARN","logger":"org.hibernate.orm.deprecation","thread":"main","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:48.1138335-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:48.3659229-03:00","level":"INFO","logger":"o.s.o.j.p.SpringPersistenceUnitInfo","thread":"main","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:48.3997556-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:48.8717849-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000004: hibernate-spatial adding function contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:49.4228758-03:00","level":"INFO","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator","thread":"main","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:49.4392452-03:00","level":"INFO","logger":"o.hibernate.orm.connections.access","thread":"main","message":"HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@7b0ab323] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:49.4710589-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"main","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:50.0674812-03:00","level":"INFO","logger":"o.s.d.j.r.query.QueryEnhancerFactory","thread":"main","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:51.6744085-03:00","level":"WARN","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration","thread":"main","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:53.182627-03:00","level":"INFO","logger":"o.s.b.a.e.web.EndpointLinksResolver","thread":"main","message":"Exposing 5 endpoint(s) beneath base path '/actuator'","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:53.3281464-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Starting ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:53.3496276-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat started on port 53193 (http) with context path '/api'","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:53.3976797-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:53182]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-orders-service-it-consumer-1\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = orders-service-it-consumer\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:53.5721723-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:53.5726945-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:53.5732971-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758647513570","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:53.5770941-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:53.5956251-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Started DistributionCenterCachingIT in 10.812 seconds (process running for 19.205)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:54.0727231-03:00","level":"WARN","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error while fetching metadata with correlation id 2 : {orders.events=LEADER_NOT_AVAILABLE}","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:54.0748695-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cluster ID: RDdEIDD4Q2ON0lABM2jKKQ","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:54.1865685-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Discovered group coordinator localhost:53182 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:54.191322-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:54.2126784-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: need to re-join with the given member-id: consumer-orders-service-it-consumer-1-0960a0f1-d681-4a07-bf46-f533087b6923","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:54.2133578-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:54.2133578-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:54.2263682-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully joined group with generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-0960a0f1-d681-4a07-bf46-f533087b6923', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:54.2319887-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Finished assignment for group at generation 1: {consumer-orders-service-it-consumer-1-0960a0f1-d681-4a07-bf46-f533087b6923=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:54.2688838-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully synced group in generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-0960a0f1-d681-4a07-bf46-f533087b6923', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:54.2699427-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:54.2742246-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:54.2870779-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:54.3000236-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:53182 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:54.3005629-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions assigned: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:55.2503155-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"http-nio-auto-1-exec-2","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:55.2503155-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-2","message":"Initializing Servlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:55.2513183-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-2","message":"Completed initialization in 1 ms","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:55.4312052-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"4e2a4de9-4e90-4b1b-a3c1-d487244d1ab8","message":"Processing new order request - Correlation ID: 8700a14d-9b6f-4200-be24-5cc1f436950f, Customer: customer-cache, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:55.8844052-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"4e2a4de9-4e90-4b1b-a3c1-d487244d1ab8","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:55.885589-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"4e2a4de9-4e90-4b1b-a3c1-d487244d1ab8","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:55.9090528-03:00","level":"INFO","logger":"o.a.k.c.producer.ProducerConfig","thread":"http-nio-auto-1-exec-2","correlationId":"4e2a4de9-4e90-4b1b-a3c1-d487244d1ab8","message":"ProducerConfig values: \r\n\tacks = -1\r\n\tauto.include.jmx.reporter = true\r\n\tbatch.size = 16384\r\n\tbootstrap.servers = [PLAINTEXT://localhost:53182]\r\n\tbuffer.memory = 33554432\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = orders-service-producer-1\r\n\tcompression.type = snappy\r\n\tconnections.max.idle.ms = 540000\r\n\tdelivery.timeout.ms = 120000\r\n\tenable.idempotence = true\r\n\tinterceptor.classes = []\r\n\tkey.serializer = class org.apache.kafka.common.serialization.StringSerializer\r\n\tlinger.ms = 10\r\n\tmax.block.ms = 60000\r\n\tmax.in.flight.requests.per.connection = 5\r\n\tmax.request.size = 1048576\r\n\tmetadata.max.age.ms = 300000\r\n\tmetadata.max.idle.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartitioner.adaptive.partitioning.enable = true\r\n\tpartitioner.availability.timeout.ms = 0\r\n\tpartitioner.class = null\r\n\tpartitioner.ignore.keys = false\r\n\treceive.buffer.bytes = 32768\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretries = 3\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\ttransaction.timeout.ms = 60000\r\n\ttransactional.id = null\r\n\tvalue.serializer = class org.springframework.kafka.support.serializer.JsonSerializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:55.9324173-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"http-nio-auto-1-exec-2","correlationId":"4e2a4de9-4e90-4b1b-a3c1-d487244d1ab8","message":"[Producer clientId=orders-service-producer-1] Instantiated an idempotent producer.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:55.9553249-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-2","correlationId":"4e2a4de9-4e90-4b1b-a3c1-d487244d1ab8","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:55.9553249-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-2","correlationId":"4e2a4de9-4e90-4b1b-a3c1-d487244d1ab8","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:55.9553249-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-2","correlationId":"4e2a4de9-4e90-4b1b-a3c1-d487244d1ab8","message":"Kafka startTimeMs: 1758647515955","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:55.9630753-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cluster ID: RDdEIDD4Q2ON0lABM2jKKQ","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:55.9769378-03:00","level":"INFO","logger":"o.a.k.c.p.i.TransactionManager","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] ProducerId set to 0 with epoch 0","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.1233767-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"4e2a4de9-4e90-4b1b-a3c1-d487244d1ab8","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRYY9N6BD0ASVK37AQ2BD9","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.1793676-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRYY9N6BD0ASVK37AQ2BD9","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.5547822-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.h.HttpDistributionCenterService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to fetch all distribution centers","exception":"org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.5547822-03:00","level":"ERROR","logger":"b.c.m.m.o.a.o.h.HttpDistributionCenterService","thread":"http-nio-auto-1-exec-2","correlationId":"4e2a4de9-4e90-4b1b-a3c1-d487244d1ab8","message":"Failed to fetch all distribution centers","exception":"org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.5610604-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.failed - Event: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.5610604-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.5615823-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"4e2a4de9-4e90-4b1b-a3c1-d487244d1ab8","message":"Publishing event to topic: order.failed - Event: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.5615823-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"4e2a4de9-4e90-4b1b-a3c1-d487244d1ab8","message":"Event published successfully: ORDER_FAILED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.5615823-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRYY9N6BD0ASVK37AQ2BD9","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.562101-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"4e2a4de9-4e90-4b1b-a3c1-d487244d1ab8","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRYY9N6BD0ASVK37AQ2BD9","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.5653347-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRYY9N6BD0ASVK37AQ2BD9 from event: Failed to process order [01K5VRYY9N6BD0ASVK37AQ2BD9]: Distribution center service unavailable","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRYY9N6BD0ASVK37AQ2BD9]: Distribution center service unavailable\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:165)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: br.com.ml.mktplace.orders.domain.model.ExternalServiceException: External service error [DistributionCenterService]: Failed to fetch all distribution centers\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:125)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\t... 38 common frames omitted\r\nCaused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\t... 40 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.5653347-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"4e2a4de9-4e90-4b1b-a3c1-d487244d1ab8","message":"Failed to process order - Correlation ID: 8700a14d-9b6f-4200-be24-5cc1f436950f","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRYY9N6BD0ASVK37AQ2BD9]: Distribution center service unavailable\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:165)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: br.com.ml.mktplace.orders.domain.model.ExternalServiceException: External service error [DistributionCenterService]: Failed to fetch all distribution centers\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:125)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\t... 72 common frames omitted\r\nCaused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\t... 74 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.5692448-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.r.h.GlobalExceptionHandler","thread":"http-nio-auto-1-exec-2","correlationId":"4e2a4de9-4e90-4b1b-a3c1-d487244d1ab8","message":"Order processing error - Correlation ID: 3483adef-d3bd-4882-a445-a78945b10e87, Order ID: 01K5VRYY9N6BD0ASVK37AQ2BD9, Message: Failed to process order [01K5VRYY9N6BD0ASVK37AQ2BD9]: Distribution center service unavailable","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRYY9N6BD0ASVK37AQ2BD9]: Distribution center service unavailable\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:165)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.lambda$0(ProcessOrderUseCaseImpl.java:63)\r\n\tat br.com.ml.mktplace.orders.adapter.config.metrics.ObservabilityMetrics.recordProcessing(ObservabilityMetrics.java:39)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: br.com.ml.mktplace.orders.domain.model.ExternalServiceException: External service error [DistributionCenterService]: Failed to fetch all distribution centers\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:125)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.getAvailableDistributionCenters(ProcessOrderUseCaseImpl.java:183)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.performOrderProcessing(ProcessOrderUseCaseImpl.java:110)\r\n\t... 72 common frames omitted\r\nCaused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: \"<EOL><EOL>                                               Request was not matched<EOL><EOL>                                               =======================<EOL><EOL><EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>| Closest stub                                             | Request                                                  |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>                                                           |<EOL><EOL>GET                                                        | GET<EOL><EOL>[path regex] /distribution-centers/item/CACHE1             | /distribution-centers                               <<<<< URL does not match<EOL><EOL>                                                           |<EOL><EOL>                                                           |<EOL><EOL>-----------------------------------------------------------------------------------------------------------------------<EOL><EOL>\"\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:112)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:395)\r\n\tat br.com.ml.mktplace.orders.adapter.outbound.http.HttpDistributionCenterService.findAllDistributionCenters(HttpDistributionCenterService.java:109)\r\n\t... 74 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.6627612-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT]: OrderEndToEndProcessingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.6652983-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.7185399-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"bdba2768-4342-4b6b-9d02-0d9c46146877","message":"Processing new order request - Correlation ID: bdba2768-4342-4b6b-9d02-0d9c46146877, Customer: customer-async-proc, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.7257185-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"bdba2768-4342-4b6b-9d02-0d9c46146877","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.7257185-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"bdba2768-4342-4b6b-9d02-0d9c46146877","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.7263327-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"bdba2768-4342-4b6b-9d02-0d9c46146877","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRYZHEG6JY11X5JY283WV5","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.7438384-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRYZHEG6JY11X5JY283WV5","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.7622829-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.7632884-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-1","correlationId":"bdba2768-4342-4b6b-9d02-0d9c46146877","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.7632884-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-1","correlationId":"bdba2768-4342-4b6b-9d02-0d9c46146877","message":"CD selecionado para item ASYNC-PROC-1 pedido 01K5VRYZHEG6JY11X5JY283WV5 -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.7632884-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item ASYNC-PROC-1 pedido 01K5VRYZHEG6JY11X5JY283WV5 -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.7666093-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.7671402-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.7671402-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRYZHEG6JY11X5JY283WV5","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.7677063-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"bdba2768-4342-4b6b-9d02-0d9c46146877","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.7682375-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"bdba2768-4342-4b6b-9d02-0d9c46146877","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.7682375-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"bdba2768-4342-4b6b-9d02-0d9c46146877","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRYZHEG6JY11X5JY283WV5","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.7775934-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"bdba2768-4342-4b6b-9d02-0d9c46146877","message":"Order processed successfully - ID: 01K5VRYZHEG6JY11X5JY283WV5, Status: PROCESSED, Correlation ID: bdba2768-4342-4b6b-9d02-0d9c46146877","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.7820119-03:00","level":"INFO","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100503: On release of batch it still contained JDBC statements","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.7825372-03:00","level":"ERROR","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100501: Exception executing batch [org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?], SQL: delete from order_items where id=?","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.7878005-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRYZHEG6JY11X5JY283WV5 from event: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?","exception":"org.springframework.orm.ObjectOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:328)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:565)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:669)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:419)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:67)\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:54)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.checkRowCounts(BatchImpl.java:314)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:278)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.PreparedStatementGroupSingleTable.forEachStatement(PreparedStatementGroupSingleTable.java:59)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.performExecution(BatchImpl.java:260)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.execute(BatchImpl.java:239)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.executeBatch(JdbcCoordinatorImpl.java:188)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:659)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1415)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:496)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2325)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1988)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:561)\r\n\t... 31 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.7926356-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"ae6695e3-2aff-4168-a392-57fa476ede13","message":"Fetching order by ID: 01K5VRYZHEG6JY11X5JY283WV5 - Correlation ID: 4d606c2c-bda7-4a6c-8f07-98e93ac556a1","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.8013486-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"ae6695e3-2aff-4168-a392-57fa476ede13","message":"Order retrieved successfully - ID: 01K5VRYZHEG6JY11X5JY283WV5, Status: PROCESSED, Correlation ID: 4d606c2c-bda7-4a6c-8f07-98e93ac556a1","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.808949-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT]: OrderEventConsumptionIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.8104548-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.8487301-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"2069ef7a-5271-4bb5-ac4a-448059cd9c5a","message":"Processing new order request - Correlation ID: 956f4760-f8b6-48c0-ba9e-f3836123535a, Customer: customer-event-consumer, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.8557335-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"2069ef7a-5271-4bb5-ac4a-448059cd9c5a","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.8562788-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"2069ef7a-5271-4bb5-ac4a-448059cd9c5a","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.8568758-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"2069ef7a-5271-4bb5-ac4a-448059cd9c5a","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRYZNG3EZ1TNJP9KHZQJK7","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.8767128-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-5","correlationId":"2069ef7a-5271-4bb5-ac4a-448059cd9c5a","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.8772945-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-5","correlationId":"2069ef7a-5271-4bb5-ac4a-448059cd9c5a","message":"CD selecionado para item EVT-CONSUME-1 pedido 01K5VRYZNG3EZ1TNJP9KHZQJK7 -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.880726-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"2069ef7a-5271-4bb5-ac4a-448059cd9c5a","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.880726-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"2069ef7a-5271-4bb5-ac4a-448059cd9c5a","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.8812816-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"2069ef7a-5271-4bb5-ac4a-448059cd9c5a","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRYZNG3EZ1TNJP9KHZQJK7","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.8812816-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRYZNG3EZ1TNJP9KHZQJK7","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.8849579-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"2069ef7a-5271-4bb5-ac4a-448059cd9c5a","message":"Order processed successfully - ID: 01K5VRYZNG3EZ1TNJP9KHZQJK7, Status: PROCESSED, Correlation ID: 956f4760-f8b6-48c0-ba9e-f3836123535a","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.8876046-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:53182]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301-2\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.8891834-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.8897053-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item EVT-CONSUME-1 pedido 01K5VRYZNG3EZ1TNJP9KHZQJK7 -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.891802-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.8923308-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.8923308-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRYZNG3EZ1TNJP9KHZQJK7","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.893984-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.893984-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.893984-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758647516893","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.8950263-03:00","level":"INFO","logger":"o.a.k.clients.consumer.KafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301-2, groupId=order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.8955541-03:00","level":"INFO","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100503: On release of batch it still contained JDBC statements","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.8960796-03:00","level":"ERROR","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100501: Exception executing batch [org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?], SQL: delete from order_items where id=?","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.8967843-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRYZNG3EZ1TNJP9KHZQJK7 from event: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?","exception":"org.springframework.orm.ObjectOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:328)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:565)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:669)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:419)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:67)\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:54)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.checkRowCounts(BatchImpl.java:314)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:278)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.PreparedStatementGroupSingleTable.forEachStatement(PreparedStatementGroupSingleTable.java:59)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.performExecution(BatchImpl.java:260)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.execute(BatchImpl.java:239)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.executeBatch(JdbcCoordinatorImpl.java:188)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:659)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1415)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:496)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2325)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1988)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:561)\r\n\t... 31 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.8995084-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301-2, groupId=order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301] Cluster ID: RDdEIDD4Q2ON0lABM2jKKQ","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.8995084-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301-2, groupId=order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301] Discovered group coordinator localhost:53182 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.9010611-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301-2, groupId=order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.9037489-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301-2, groupId=order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301] Request joining group due to: need to re-join with the given member-id: consumer-order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301-2-e6d64fa3-4ff1-429f-8da2-6ae704c00c66","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.904299-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301-2, groupId=order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.904299-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301-2, groupId=order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.9076225-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301-2, groupId=order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301] Successfully joined group with generation Generation{generationId=1, memberId='consumer-order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301-2-e6d64fa3-4ff1-429f-8da2-6ae704c00c66', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.9076225-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301-2, groupId=order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301] Finished assignment for group at generation 1: {consumer-order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301-2-e6d64fa3-4ff1-429f-8da2-6ae704c00c66=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.9107875-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301-2, groupId=order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301] Successfully synced group in generation Generation{generationId=1, memberId='consumer-order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301-2-e6d64fa3-4ff1-429f-8da2-6ae704c00c66', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.9107875-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301-2, groupId=order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.9117977-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301-2, groupId=order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.9128014-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301-2, groupId=order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.9173398-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301-2, groupId=order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:53182 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.9293294-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301-2, groupId=order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.9299618-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301-2, groupId=order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301] Member consumer-order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301-2-e6d64fa3-4ff1-429f-8da2-6ae704c00c66 sending LeaveGroup request to coordinator localhost:53182 (id: 2147483646 rack: null) due to the consumer is being closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.9299618-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301-2, groupId=order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:56.9304913-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301-2, groupId=order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.3813661-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.3813661-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.3813661-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.3838014-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"App info kafka.consumer for consumer-order-events-test-group-4e7181aa-b434-410c-82f7-7c2bb3e1a301-2 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.3952562-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventPublishingIT]: OrderEventPublishingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.3972661-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventPublishingIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.4380838-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-4","correlationId":"76d8c45e-1fdc-4c89-8501-65579c62c254","message":"Processing new order request - Correlation ID: 7a000a1c-9060-48e0-ae02-f75d1149cf63, Customer: customer-events, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.4459672-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"76d8c45e-1fdc-4c89-8501-65579c62c254","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.4465071-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"76d8c45e-1fdc-4c89-8501-65579c62c254","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.4465071-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"76d8c45e-1fdc-4c89-8501-65579c62c254","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRZ07Y6F1ST1TCVSVZRF8D","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.4553893-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-4","correlationId":"76d8c45e-1fdc-4c89-8501-65579c62c254","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.4559097-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-4","correlationId":"76d8c45e-1fdc-4c89-8501-65579c62c254","message":"CD selecionado para item EVT123 pedido 01K5VRZ07Y6F1ST1TCVSVZRF8D -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.4575855-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"76d8c45e-1fdc-4c89-8501-65579c62c254","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.4581774-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"76d8c45e-1fdc-4c89-8501-65579c62c254","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.4581774-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"76d8c45e-1fdc-4c89-8501-65579c62c254","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRZ07Y6F1ST1TCVSVZRF8D","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.4614158-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-4","correlationId":"76d8c45e-1fdc-4c89-8501-65579c62c254","message":"Order processed successfully - ID: 01K5VRZ07Y6F1ST1TCVSVZRF8D, Status: PROCESSED, Correlation ID: 7a000a1c-9060-48e0-ae02-f75d1149cf63","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.465696-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderFlowIT]: OrderFlowIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.4662175-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderFlowIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.471531-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRZ07Y6F1ST1TCVSVZRF8D","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.4767631-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRZ07Y6F1ST1TCVSVZRF8D from event: Failed to process order [01K5VRZ07Y6F1ST1TCVSVZRF8D]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRZ07Y6F1ST1TCVSVZRF8D]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.4989742-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"460c0321-f4e5-4e46-baa8-00b3784fce83","message":"Processing new order request - Correlation ID: 460c0321-f4e5-4e46-baa8-00b3784fce83, Customer: customer-1, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.5075206-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"460c0321-f4e5-4e46-baa8-00b3784fce83","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.5075206-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"460c0321-f4e5-4e46-baa8-00b3784fce83","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.5080821-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"460c0321-f4e5-4e46-baa8-00b3784fce83","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRZ09WNA1EFSKX0V64KGPP","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.5164571-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-6","correlationId":"460c0321-f4e5-4e46-baa8-00b3784fce83","message":"CD mais próximo selecionado center=CDPROC distanceKm=0,000","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.5164571-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-6","correlationId":"460c0321-f4e5-4e46-baa8-00b3784fce83","message":"CD selecionado para item ABC123 pedido 01K5VRZ09WNA1EFSKX0V64KGPP -> CDPROC","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.518583-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"460c0321-f4e5-4e46-baa8-00b3784fce83","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.518583-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"460c0321-f4e5-4e46-baa8-00b3784fce83","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.5190991-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"460c0321-f4e5-4e46-baa8-00b3784fce83","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VRZ09WNA1EFSKX0V64KGPP","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.5233562-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"460c0321-f4e5-4e46-baa8-00b3784fce83","message":"Order processed successfully - ID: 01K5VRZ09WNA1EFSKX0V64KGPP, Status: PROCESSED, Correlation ID: 460c0321-f4e5-4e46-baa8-00b3784fce83","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.52765-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-7","correlationId":"27b230a8-b4f0-4ad6-95b7-6380dbb6b6b9","message":"Fetching order by ID: 01K5VRZ09WNA1EFSKX0V64KGPP - Correlation ID: a5d5a938-e1e3-4451-8d51-33bc75862dd2","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.5318548-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-7","correlationId":"27b230a8-b4f0-4ad6-95b7-6380dbb6b6b9","message":"Order retrieved successfully - ID: 01K5VRZ09WNA1EFSKX0V64KGPP, Status: PROCESSED, Correlation ID: a5d5a938-e1e3-4451-8d51-33bc75862dd2","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.5328578-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VRZ09WNA1EFSKX0V64KGPP","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.5375648-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VRZ09WNA1EFSKX0V64KGPP from event: Failed to process order [01K5VRZ09WNA1EFSKX0V64KGPP]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VRZ09WNA1EFSKX0V64KGPP]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.6031282-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 2147483646 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.6046326-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.7770358-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.7780355-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.7780355-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight FETCH request with correlation id 26 due to node 1 being disconnected (elapsed time since creation: 247ms, elapsed time since send: 247ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.7780355-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight METADATA request with correlation id 27 due to node 1 being disconnected (elapsed time since creation: 204ms, elapsed time since send: 204ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.7780355-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.7780355-03:00","level":"INFO","logger":"o.a.k.clients.FetchSessionHandler","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error sending fetch request (sessionId=1185465568, epoch=13) to node 1:","exception":"org.apache.kafka.common.errors.DisconnectException: null\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.7791495-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.7791495-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.7791495-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cancelled in-flight API_VERSIONS request with correlation id 13 due to node 1 being disconnected (elapsed time since creation: 1ms, elapsed time since send: 1ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.7791495-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions revoked: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.7796745-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Member consumer-orders-service-it-consumer-1-0960a0f1-d681-4a07-bf46-f533087b6923 sending LeaveGroup request to coordinator localhost:53182 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.7801815-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.7807073-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.7807073-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Unsubscribed all topics or patterns and assigned partitions","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.7812098-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.7812098-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.7812098-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 2147483646 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.7818114-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight API_VERSIONS request with correlation id 29 due to node 2147483646 being disconnected (elapsed time since creation: 1ms, elapsed time since send: 1ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.7818114-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Group coordinator localhost:53182 (id: 2147483646 rack: null) is unavailable or invalid due to cause: null. isDisconnected: true. Rediscovery will be attempted.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.7818114-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.7823287-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.7823287-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.7834116-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"App info kafka.consumer for consumer-orders-service-it-consumer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.7840122-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: Consumer stopped","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.9175988-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"SpringApplicationShutdownHook","message":"[Producer clientId=orders-service-producer-1] Closing the Kafka producer with timeoutMillis = 30000 ms.","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.9186075-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.9186075-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.9186075-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.9201183-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"SpringApplicationShutdownHook","message":"App info kafka.producer for orders-service-producer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.9304984-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"SpringApplicationShutdownHook","message":"Closing JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.933051-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown initiated...","service":"orders-service"}
{"timestamp":"2025-09-23T14:11:57.9345547-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown completed.","service":"orders-service"}
{"timestamp":"2025-09-23T14:12:55.9305303-03:00","level":"INFO","logger":"o.h.validator.internal.util.Version","thread":"background-preinit","message":"HV000001: Hibernate Validator 8.0.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T14:12:55.9894823-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Starting DistributionCenterCachingIT using Java 21.0.8 with PID 10872 (started by ciror in Z:\\projects\\meli-test-mktplace)","service":"orders-service"}
{"timestamp":"2025-09-23T14:12:55.990826-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"The following 1 profile is active: \"integration-test\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:12:56.8519797-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T14:12:56.8525178-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:12:56.9951264-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 131 ms. Found 1 JPA repository interface.","service":"orders-service"}
{"timestamp":"2025-09-23T14:12:57.6663723-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T14:12:57.6683715-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data Redis repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:12:57.7112757-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationExtensionSupport","thread":"main","message":"Spring Data Redis - Could not safely identify store assignment for repository candidate interface br.com.ml.mktplace.orders.adapter.outbound.persistence.repository.JpaOrderEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository","service":"orders-service"}
{"timestamp":"2025-09-23T14:12:57.712237-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 23 ms. Found 0 Redis repository interfaces.","service":"orders-service"}
{"timestamp":"2025-09-23T14:12:59.1631555-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat initialized with port 0 (http)","service":"orders-service"}
{"timestamp":"2025-09-23T14:12:59.175078-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Initializing ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T14:12:59.1770858-03:00","level":"INFO","logger":"o.a.catalina.core.StandardService","thread":"main","message":"Starting service [Tomcat]","service":"orders-service"}
{"timestamp":"2025-09-23T14:12:59.1790787-03:00","level":"INFO","logger":"o.a.catalina.core.StandardEngine","thread":"main","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"orders-service"}
{"timestamp":"2025-09-23T14:12:59.2693087-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"main","message":"Initializing Spring embedded WebApplicationContext","service":"orders-service"}
{"timestamp":"2025-09-23T14:12:59.2693087-03:00","level":"INFO","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","thread":"main","message":"Root WebApplicationContext: initialization completed in 3256 ms","service":"orders-service"}
{"timestamp":"2025-09-23T14:12:59.7498088-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Starting...","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:00.012014-03:00","level":"INFO","logger":"com.zaxxer.hikari.pool.HikariPool","thread":"main","message":"OrdersHikariPool - Added connection org.postgresql.jdbc.PgConnection@1dbe76aa","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:00.0145354-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Start completed.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:00.2208785-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"Flyway Community Edition 9.22.3 by Redgate","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:00.2208785-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"See release notes here: https://rd.gt/416ObMi","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:00.2208785-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:00.2507207-03:00","level":"INFO","logger":"org.flywaydb.core.FlywayExecutor","thread":"main","message":"Database: jdbc:postgresql://localhost:53245/mktplace_orders (PostgreSQL 16.4)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:00.2631127-03:00","level":"WARN","logger":"o.f.c.i.database.base.Database","thread":"main","message":"Flyway upgrade recommended: PostgreSQL 16.4 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:00.3137285-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Schema history table \"public\".\"flyway_schema_history\" does not exist yet","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:00.3205332-03:00","level":"INFO","logger":"o.f.core.internal.command.DbValidate","thread":"main","message":"Successfully validated 2 migrations (execution time 00:00.037s)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:00.3431439-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Creating Schema History table \"public\".\"flyway_schema_history\" ...","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:00.3940637-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Current version of schema \"public\": << Empty Schema >>","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:00.4094638-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"1 - initial schema\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:00.4195195-03:00","level":"WARN","logger":"o.f.c.i.s.DefaultSqlScriptExecutor","thread":"main","message":"DB: extension \"postgis\" already exists, skipping (SQL State: 42710 - Error Code: 0)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:00.4690014-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"2 - sample distribution centers\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:00.4920897-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Successfully applied 2 migrations to schema \"public\", now at version v2 (execution time 00:00.043s)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:00.5817351-03:00","level":"INFO","logger":"o.h.jpa.internal.util.LogHelper","thread":"main","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:00.6557813-03:00","level":"INFO","logger":"org.hibernate.Version","thread":"main","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:00.6670645-03:00","level":"INFO","logger":"o.h.s.integration.SpatialService","thread":"main","message":"HHH80000001: hibernate-spatial integration enabled : true","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:00.7052129-03:00","level":"INFO","logger":"o.h.c.i.RegionFactoryInitiator","thread":"main","message":"HHH000026: Second-level cache disabled","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:00.8687479-03:00","level":"WARN","logger":"org.hibernate.orm.deprecation","thread":"main","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:00.8940337-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:01.1180863-03:00","level":"INFO","logger":"o.s.o.j.p.SpringPersistenceUnitInfo","thread":"main","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:01.1423591-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:01.6162095-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000004: hibernate-spatial adding function contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:02.4090679-03:00","level":"INFO","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator","thread":"main","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:02.4234246-03:00","level":"INFO","logger":"o.hibernate.orm.connections.access","thread":"main","message":"HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@6822d7c9] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:02.4520092-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"main","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:03.0278883-03:00","level":"INFO","logger":"o.s.d.j.r.query.QueryEnhancerFactory","thread":"main","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:04.5979526-03:00","level":"WARN","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration","thread":"main","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:05.9743244-03:00","level":"INFO","logger":"o.s.b.a.e.web.EndpointLinksResolver","thread":"main","message":"Exposing 5 endpoint(s) beneath base path '/actuator'","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:06.0737614-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Starting ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:06.0869783-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat started on port 53256 (http) with context path '/api'","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:06.1371507-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:53248]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-orders-service-it-consumer-1\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = orders-service-it-consumer\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:06.2972388-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:06.2972388-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:06.2972388-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758647586295","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:06.3060634-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:06.3226637-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Started DistributionCenterCachingIT in 11.107 seconds (process running for 19.288)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:06.7641143-03:00","level":"WARN","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error while fetching metadata with correlation id 2 : {orders.events=LEADER_NOT_AVAILABLE}","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:06.7657131-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cluster ID: tGMpmJJfQPabpF7nhfTPeA","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:06.8749128-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Discovered group coordinator localhost:53248 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:06.880366-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:06.9024631-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: need to re-join with the given member-id: consumer-orders-service-it-consumer-1-d959e234-04c8-49bf-9c33-9d44527eabf3","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:06.9030382-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:06.9030382-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:06.9149676-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully joined group with generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-d959e234-04c8-49bf-9c33-9d44527eabf3', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:06.9271576-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Finished assignment for group at generation 1: {consumer-orders-service-it-consumer-1-d959e234-04c8-49bf-9c33-9d44527eabf3=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:06.962767-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully synced group in generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-d959e234-04c8-49bf-9c33-9d44527eabf3', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:06.963291-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:06.9660492-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:06.9797059-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:06.9943717-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:53248 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:06.9949085-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions assigned: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:07.9508473-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"http-nio-auto-1-exec-2","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:07.9508473-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-2","message":"Initializing Servlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:07.951795-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-2","message":"Completed initialization in 1 ms","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:08.1611533-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"7e2c3b0b-1ebe-4f19-a034-3bcb34fdbae3","message":"Processing new order request - Correlation ID: 63a9daca-d203-4ab3-9fb4-b2e007f7711b, Customer: customer-cache, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:08.6533649-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"7e2c3b0b-1ebe-4f19-a034-3bcb34fdbae3","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:08.6543738-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"7e2c3b0b-1ebe-4f19-a034-3bcb34fdbae3","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:08.6752372-03:00","level":"INFO","logger":"o.a.k.c.producer.ProducerConfig","thread":"http-nio-auto-1-exec-2","correlationId":"7e2c3b0b-1ebe-4f19-a034-3bcb34fdbae3","message":"ProducerConfig values: \r\n\tacks = -1\r\n\tauto.include.jmx.reporter = true\r\n\tbatch.size = 16384\r\n\tbootstrap.servers = [PLAINTEXT://localhost:53248]\r\n\tbuffer.memory = 33554432\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = orders-service-producer-1\r\n\tcompression.type = snappy\r\n\tconnections.max.idle.ms = 540000\r\n\tdelivery.timeout.ms = 120000\r\n\tenable.idempotence = true\r\n\tinterceptor.classes = []\r\n\tkey.serializer = class org.apache.kafka.common.serialization.StringSerializer\r\n\tlinger.ms = 10\r\n\tmax.block.ms = 60000\r\n\tmax.in.flight.requests.per.connection = 5\r\n\tmax.request.size = 1048576\r\n\tmetadata.max.age.ms = 300000\r\n\tmetadata.max.idle.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartitioner.adaptive.partitioning.enable = true\r\n\tpartitioner.availability.timeout.ms = 0\r\n\tpartitioner.class = null\r\n\tpartitioner.ignore.keys = false\r\n\treceive.buffer.bytes = 32768\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretries = 3\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\ttransaction.timeout.ms = 60000\r\n\ttransactional.id = null\r\n\tvalue.serializer = class org.springframework.kafka.support.serializer.JsonSerializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:08.6938173-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"http-nio-auto-1-exec-2","correlationId":"7e2c3b0b-1ebe-4f19-a034-3bcb34fdbae3","message":"[Producer clientId=orders-service-producer-1] Instantiated an idempotent producer.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:08.7173503-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-2","correlationId":"7e2c3b0b-1ebe-4f19-a034-3bcb34fdbae3","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:08.7173503-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-2","correlationId":"7e2c3b0b-1ebe-4f19-a034-3bcb34fdbae3","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:08.7173503-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-2","correlationId":"7e2c3b0b-1ebe-4f19-a034-3bcb34fdbae3","message":"Kafka startTimeMs: 1758647588717","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:08.7256301-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cluster ID: tGMpmJJfQPabpF7nhfTPeA","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:08.7408886-03:00","level":"INFO","logger":"o.a.k.c.p.i.TransactionManager","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] ProducerId set to 0 with epoch 0","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:08.9128217-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"7e2c3b0b-1ebe-4f19-a034-3bcb34fdbae3","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS15AEV3W0YBVRT3G2AG5T","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:08.9777136-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VS15AEV3W0YBVRT3G2AG5T","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.3514668-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.3514668-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-2","correlationId":"7e2c3b0b-1ebe-4f19-a034-3bcb34fdbae3","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.3519885-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item CACHE1 pedido 01K5VS15AEV3W0YBVRT3G2AG5T -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.3519885-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-2","correlationId":"7e2c3b0b-1ebe-4f19-a034-3bcb34fdbae3","message":"CD selecionado para item CACHE1 pedido 01K5VS15AEV3W0YBVRT3G2AG5T -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.3547561-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"7e2c3b0b-1ebe-4f19-a034-3bcb34fdbae3","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.3552765-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"7e2c3b0b-1ebe-4f19-a034-3bcb34fdbae3","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.3552765-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.3552765-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.3558056-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"7e2c3b0b-1ebe-4f19-a034-3bcb34fdbae3","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS15AEV3W0YBVRT3G2AG5T","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.3558056-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS15AEV3W0YBVRT3G2AG5T","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.3708232-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"7e2c3b0b-1ebe-4f19-a034-3bcb34fdbae3","message":"Order processed successfully - ID: 01K5VS15AEV3W0YBVRT3G2AG5T, Status: PROCESSED, Correlation ID: 63a9daca-d203-4ab3-9fb4-b2e007f7711b","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.3740521-03:00","level":"INFO","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100503: On release of batch it still contained JDBC statements","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.3745798-03:00","level":"ERROR","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100501: Exception executing batch [org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?], SQL: delete from order_items where id=?","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.3817467-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VS15AEV3W0YBVRT3G2AG5T from event: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?","exception":"org.springframework.orm.ObjectOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:328)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:565)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:669)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:419)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:67)\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:54)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.checkRowCounts(BatchImpl.java:314)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:278)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.PreparedStatementGroupSingleTable.forEachStatement(PreparedStatementGroupSingleTable.java:59)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.performExecution(BatchImpl.java:260)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.execute(BatchImpl.java:239)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.executeBatch(JdbcCoordinatorImpl.java:188)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:659)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1415)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:496)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2325)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1988)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:561)\r\n\t... 31 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.4560728-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"13204807-492d-4446-8915-b6b08303d44c","message":"Fetching order by ID: 01K5VS15AEV3W0YBVRT3G2AG5T - Correlation ID: 0ce65ba3-319e-427a-8035-cd2d6e6f4f29","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.4637963-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"13204807-492d-4446-8915-b6b08303d44c","message":"Order retrieved successfully - ID: 01K5VS15AEV3W0YBVRT3G2AG5T, Status: PROCESSED, Correlation ID: 0ce65ba3-319e-427a-8035-cd2d6e6f4f29","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.4712357-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-3","correlationId":"3f737af3-5633-435e-878a-729756854270","message":"Processing new order request - Correlation ID: 4ccae083-70fa-4053-9c6f-167fdf20110c, Customer: customer-cache, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.4766299-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"3f737af3-5633-435e-878a-729756854270","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.4766299-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"3f737af3-5633-435e-878a-729756854270","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.4766299-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"3f737af3-5633-435e-878a-729756854270","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS16JZ3GHQJCK0246QXYKC","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.4939783-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-3","correlationId":"3f737af3-5633-435e-878a-729756854270","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.4939783-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-3","correlationId":"3f737af3-5633-435e-878a-729756854270","message":"CD selecionado para item CACHE1 pedido 01K5VS16JZ3GHQJCK0246QXYKC -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.4967406-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"3f737af3-5633-435e-878a-729756854270","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.4967406-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"3f737af3-5633-435e-878a-729756854270","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.4972708-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"3f737af3-5633-435e-878a-729756854270","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS16JZ3GHQJCK0246QXYKC","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.5008751-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-3","correlationId":"3f737af3-5633-435e-878a-729756854270","message":"Order processed successfully - ID: 01K5VS16JZ3GHQJCK0246QXYKC, Status: PROCESSED, Correlation ID: 4ccae083-70fa-4053-9c6f-167fdf20110c","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.5035818-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VS16JZ3GHQJCK0246QXYKC","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.5099679-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VS16JZ3GHQJCK0246QXYKC from event: Failed to process order [01K5VS16JZ3GHQJCK0246QXYKC]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VS16JZ3GHQJCK0246QXYKC]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.5402082-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT]: OrderEndToEndProcessingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.5432085-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.5796478-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-4","correlationId":"01d2f72a-2350-4c63-812b-d6d9d6483447","message":"Processing new order request - Correlation ID: 01d2f72a-2350-4c63-812b-d6d9d6483447, Customer: customer-async-proc, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.5867191-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"01d2f72a-2350-4c63-812b-d6d9d6483447","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.5872431-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"01d2f72a-2350-4c63-812b-d6d9d6483447","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.5872431-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"01d2f72a-2350-4c63-812b-d6d9d6483447","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS16PB2XQRWNDRTYSDV7F8","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.5953706-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-4","correlationId":"01d2f72a-2350-4c63-812b-d6d9d6483447","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.5959051-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-4","correlationId":"01d2f72a-2350-4c63-812b-d6d9d6483447","message":"CD selecionado para item ASYNC-PROC-1 pedido 01K5VS16PB2XQRWNDRTYSDV7F8 -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.5992345-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"01d2f72a-2350-4c63-812b-d6d9d6483447","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.5992345-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"01d2f72a-2350-4c63-812b-d6d9d6483447","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.5992345-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"01d2f72a-2350-4c63-812b-d6d9d6483447","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS16PB2XQRWNDRTYSDV7F8","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6025036-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-4","correlationId":"01d2f72a-2350-4c63-812b-d6d9d6483447","message":"Order processed successfully - ID: 01K5VS16PB2XQRWNDRTYSDV7F8, Status: PROCESSED, Correlation ID: 01d2f72a-2350-4c63-812b-d6d9d6483447","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6072972-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"a1ba0ba1-70dd-4c91-b059-ec36e2ed95a8","message":"Fetching order by ID: 01K5VS16PB2XQRWNDRTYSDV7F8 - Correlation ID: 8c64a4f5-faa4-4afb-9f39-72c31c221570","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6104527-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VS16PB2XQRWNDRTYSDV7F8","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6114979-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"a1ba0ba1-70dd-4c91-b059-ec36e2ed95a8","message":"Order retrieved successfully - ID: 01K5VS16PB2XQRWNDRTYSDV7F8, Status: PROCESSED, Correlation ID: 8c64a4f5-faa4-4afb-9f39-72c31c221570","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6142764-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VS16PB2XQRWNDRTYSDV7F8 from event: Failed to process order [01K5VS16PB2XQRWNDRTYSDV7F8]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VS16PB2XQRWNDRTYSDV7F8]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6203552-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT]: OrderEventConsumptionIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6213689-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6545022-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"52fe9675-a12c-4717-acb0-c801c2b9c52f","message":"Processing new order request - Correlation ID: 0c12bed8-8b43-4202-b1ec-50b9d561f0b0, Customer: customer-event-consumer, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6610623-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"52fe9675-a12c-4717-acb0-c801c2b9c52f","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.661609-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"52fe9675-a12c-4717-acb0-c801c2b9c52f","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.661609-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"52fe9675-a12c-4717-acb0-c801c2b9c52f","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS16RQGVTB27BB30M716JD","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6692222-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-6","correlationId":"52fe9675-a12c-4717-acb0-c801c2b9c52f","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6697603-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-6","correlationId":"52fe9675-a12c-4717-acb0-c801c2b9c52f","message":"CD selecionado para item EVT-CONSUME-1 pedido 01K5VS16RQGVTB27BB30M716JD -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6724646-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"52fe9675-a12c-4717-acb0-c801c2b9c52f","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6729814-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"52fe9675-a12c-4717-acb0-c801c2b9c52f","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6729814-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"52fe9675-a12c-4717-acb0-c801c2b9c52f","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS16RQGVTB27BB30M716JD","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6762367-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"52fe9675-a12c-4717-acb0-c801c2b9c52f","message":"Order processed successfully - ID: 01K5VS16RQGVTB27BB30M716JD, Status: PROCESSED, Correlation ID: 0c12bed8-8b43-4202-b1ec-50b9d561f0b0","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6783365-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:53248]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974-2\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6818754-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6818754-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6818754-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758647589681","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6818754-03:00","level":"INFO","logger":"o.a.k.clients.consumer.KafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974-2, groupId=order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6875345-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974-2, groupId=order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974] Cluster ID: tGMpmJJfQPabpF7nhfTPeA","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6880597-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974-2, groupId=order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974] Discovered group coordinator localhost:53248 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6880597-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VS16RQGVTB27BB30M716JD","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6896311-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974-2, groupId=order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6922823-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974-2, groupId=order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974] Request joining group due to: need to re-join with the given member-id: consumer-order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974-2-b567ecf5-567e-4f92-9375-8f9a3ddd7e7f","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6922823-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974-2, groupId=order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6928033-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974-2, groupId=order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6933253-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VS16RQGVTB27BB30M716JD from event: Failed to process order [01K5VS16RQGVTB27BB30M716JD]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VS16RQGVTB27BB30M716JD]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6959472-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974-2, groupId=order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974] Successfully joined group with generation Generation{generationId=1, memberId='consumer-order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974-2-b567ecf5-567e-4f92-9375-8f9a3ddd7e7f', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.6964683-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974-2, groupId=order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974] Finished assignment for group at generation 1: {consumer-order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974-2-b567ecf5-567e-4f92-9375-8f9a3ddd7e7f=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.7007083-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974-2, groupId=order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974] Successfully synced group in generation Generation{generationId=1, memberId='consumer-order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974-2-b567ecf5-567e-4f92-9375-8f9a3ddd7e7f', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.7007083-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974-2, groupId=order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.7012725-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974-2, groupId=order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.7028552-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974-2, groupId=order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.7084328-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974-2, groupId=order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:53248 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.7233552-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974-2, groupId=order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.7239534-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974-2, groupId=order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974] Member consumer-order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974-2-b567ecf5-567e-4f92-9375-8f9a3ddd7e7f sending LeaveGroup request to coordinator localhost:53248 (id: 2147483646 rack: null) due to the consumer is being closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.7249988-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974-2, groupId=order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:09.7255196-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974-2, groupId=order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.1721729-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.1721729-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.1721729-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.1754887-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"App info kafka.consumer for consumer-order-events-test-group-e921d0ac-31bb-44d6-b895-f955b3af7974-2 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.1847064-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventPublishingIT]: OrderEventPublishingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.1853387-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventPublishingIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.2229874-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-7","correlationId":"7a90de74-2e69-45b7-9512-5c384e2ec99b","message":"Processing new order request - Correlation ID: a9d98733-1c57-4c16-8d3f-9ddfabb47c6e, Customer: customer-events, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.2311954-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"7a90de74-2e69-45b7-9512-5c384e2ec99b","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.2311954-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"7a90de74-2e69-45b7-9512-5c384e2ec99b","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.2317173-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"7a90de74-2e69-45b7-9512-5c384e2ec99b","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS17AF3EAFPGDEQRDCDCXB","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.2397538-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-7","correlationId":"7a90de74-2e69-45b7-9512-5c384e2ec99b","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.2397538-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-7","correlationId":"7a90de74-2e69-45b7-9512-5c384e2ec99b","message":"CD selecionado para item EVT123 pedido 01K5VS17AF3EAFPGDEQRDCDCXB -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.2429342-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"7a90de74-2e69-45b7-9512-5c384e2ec99b","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.2429342-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"7a90de74-2e69-45b7-9512-5c384e2ec99b","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.2434403-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"7a90de74-2e69-45b7-9512-5c384e2ec99b","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS17AF3EAFPGDEQRDCDCXB","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.2477644-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-7","correlationId":"7a90de74-2e69-45b7-9512-5c384e2ec99b","message":"Order processed successfully - ID: 01K5VS17AF3EAFPGDEQRDCDCXB, Status: PROCESSED, Correlation ID: a9d98733-1c57-4c16-8d3f-9ddfabb47c6e","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.2549259-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VS17AF3EAFPGDEQRDCDCXB","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.2549259-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderFlowIT]: OrderFlowIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.2559814-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderFlowIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.2602057-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VS17AF3EAFPGDEQRDCDCXB from event: Failed to process order [01K5VS17AF3EAFPGDEQRDCDCXB]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VS17AF3EAFPGDEQRDCDCXB]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.284539-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-10","correlationId":"17cf3950-7180-4743-bed1-68b55e9be4bc","message":"Processing new order request - Correlation ID: 17cf3950-7180-4743-bed1-68b55e9be4bc, Customer: customer-1, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.2912392-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-10","correlationId":"17cf3950-7180-4743-bed1-68b55e9be4bc","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.2912392-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-10","correlationId":"17cf3950-7180-4743-bed1-68b55e9be4bc","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.2917601-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-10","correlationId":"17cf3950-7180-4743-bed1-68b55e9be4bc","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS17CCFQ2VVW4VGQH4GXSG","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.301034-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-10","correlationId":"17cf3950-7180-4743-bed1-68b55e9be4bc","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.3015635-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-10","correlationId":"17cf3950-7180-4743-bed1-68b55e9be4bc","message":"CD selecionado para item ABC123 pedido 01K5VS17CCFQ2VVW4VGQH4GXSG -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.303739-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-10","correlationId":"17cf3950-7180-4743-bed1-68b55e9be4bc","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.303739-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-10","correlationId":"17cf3950-7180-4743-bed1-68b55e9be4bc","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.304296-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-10","correlationId":"17cf3950-7180-4743-bed1-68b55e9be4bc","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS17CCFQ2VVW4VGQH4GXSG","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.3080567-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-10","correlationId":"17cf3950-7180-4743-bed1-68b55e9be4bc","message":"Order processed successfully - ID: 01K5VS17CCFQ2VVW4VGQH4GXSG, Status: PROCESSED, Correlation ID: 17cf3950-7180-4743-bed1-68b55e9be4bc","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.3123094-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-9","correlationId":"d240bd6d-7b6a-42b3-b3fa-fedfa2783ab1","message":"Fetching order by ID: 01K5VS17CCFQ2VVW4VGQH4GXSG - Correlation ID: 9b1426b7-7492-4e74-93e4-8c3cc4e8f7ea","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.3160969-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VS17CCFQ2VVW4VGQH4GXSG","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.3176742-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-9","correlationId":"d240bd6d-7b6a-42b3-b3fa-fedfa2783ab1","message":"Order retrieved successfully - ID: 01K5VS17CCFQ2VVW4VGQH4GXSG, Status: PROCESSED, Correlation ID: 9b1426b7-7492-4e74-93e4-8c3cc4e8f7ea","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.3213622-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VS17CCFQ2VVW4VGQH4GXSG from event: Failed to process order [01K5VS17CCFQ2VVW4VGQH4GXSG]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VS17CCFQ2VVW4VGQH4GXSG]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.3865087-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.3865087-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 2147483646 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.5444275-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.5444275-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.5454047-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cancelled in-flight METADATA request with correlation id 11 due to node 1 being disconnected (elapsed time since creation: 0ms, elapsed time since send: 0ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.5454047-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight FETCH request with correlation id 25 due to node 1 being disconnected (elapsed time since creation: 228ms, elapsed time since send: 228ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.5454047-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight METADATA request with correlation id 26 due to node 1 being disconnected (elapsed time since creation: 187ms, elapsed time since send: 187ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.5459112-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.5459112-03:00","level":"INFO","logger":"o.a.k.clients.FetchSessionHandler","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error sending fetch request (sessionId=1688511430, epoch=12) to node 1:","exception":"org.apache.kafka.common.errors.DisconnectException: null\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.5465258-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.5465258-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions revoked: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.5482252-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Member consumer-orders-service-it-consumer-1-d959e234-04c8-49bf-9c33-9d44527eabf3 sending LeaveGroup request to coordinator localhost:53248 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.5482252-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.5482252-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.5482252-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Unsubscribed all topics or patterns and assigned partitions","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.5492483-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.5492483-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.5503466-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 2147483646 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.5503466-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight API_VERSIONS request with correlation id 28 due to node 2147483646 being disconnected (elapsed time since creation: 2ms, elapsed time since send: 2ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.5503466-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Group coordinator localhost:53248 (id: 2147483646 rack: null) is unavailable or invalid due to cause: null. isDisconnected: true. Rediscovery will be attempted.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.5503466-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.5503466-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.5503466-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.5510385-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"App info kafka.consumer for consumer-orders-service-it-consumer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.5527794-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: Consumer stopped","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.6491528-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.6496996-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cancelled in-flight API_VERSIONS request with correlation id 12 due to node 1 being disconnected (elapsed time since creation: 3ms, elapsed time since send: 3ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.6938093-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"SpringApplicationShutdownHook","message":"[Producer clientId=orders-service-producer-1] Closing the Kafka producer with timeoutMillis = 30000 ms.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.6948093-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.6958093-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.6958093-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.6958093-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"SpringApplicationShutdownHook","message":"App info kafka.producer for orders-service-producer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.7088966-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"SpringApplicationShutdownHook","message":"Closing JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.7108973-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown initiated...","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:10.713181-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown completed.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:20.3789063-03:00","level":"INFO","logger":"o.h.validator.internal.util.Version","thread":"background-preinit","message":"HV000001: Hibernate Validator 8.0.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:20.4566874-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Starting DistributionCenterCachingIT using Java 21.0.8 with PID 30868 (started by ciror in Z:\\projects\\meli-test-mktplace)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:20.4576872-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"The following 1 profile is active: \"integration-test\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:21.303895-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:21.3049035-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:21.422849-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 110 ms. Found 1 JPA repository interface.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:22.0419363-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:22.0439976-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data Redis repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:22.0884961-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationExtensionSupport","thread":"main","message":"Spring Data Redis - Could not safely identify store assignment for repository candidate interface br.com.ml.mktplace.orders.adapter.outbound.persistence.repository.JpaOrderEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:22.0894957-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 24 ms. Found 0 Redis repository interfaces.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:23.4162058-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat initialized with port 0 (http)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:23.4265584-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Initializing ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:23.4306342-03:00","level":"INFO","logger":"o.a.catalina.core.StandardService","thread":"main","message":"Starting service [Tomcat]","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:23.4334955-03:00","level":"INFO","logger":"o.a.catalina.core.StandardEngine","thread":"main","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:23.5129108-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"main","message":"Initializing Spring embedded WebApplicationContext","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:23.5129108-03:00","level":"INFO","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","thread":"main","message":"Root WebApplicationContext: initialization completed in 3019 ms","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:23.9704295-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Starting...","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:24.2853464-03:00","level":"INFO","logger":"com.zaxxer.hikari.pool.HikariPool","thread":"main","message":"OrdersHikariPool - Added connection org.postgresql.jdbc.PgConnection@1dbe76aa","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:24.2874614-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Start completed.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:24.4764436-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"Flyway Community Edition 9.22.3 by Redgate","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:24.4769653-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"See release notes here: https://rd.gt/416ObMi","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:24.4769653-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:24.5112555-03:00","level":"INFO","logger":"org.flywaydb.core.FlywayExecutor","thread":"main","message":"Database: jdbc:postgresql://localhost:53293/mktplace_orders (PostgreSQL 16.4)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:24.5228873-03:00","level":"WARN","logger":"o.f.c.i.database.base.Database","thread":"main","message":"Flyway upgrade recommended: PostgreSQL 16.4 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:24.5739358-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Schema history table \"public\".\"flyway_schema_history\" does not exist yet","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:24.5790118-03:00","level":"INFO","logger":"o.f.core.internal.command.DbValidate","thread":"main","message":"Successfully validated 2 migrations (execution time 00:00.035s)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:24.6016154-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Creating Schema History table \"public\".\"flyway_schema_history\" ...","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:24.646155-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Current version of schema \"public\": << Empty Schema >>","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:24.6593628-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"1 - initial schema\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:24.6674677-03:00","level":"WARN","logger":"o.f.c.i.s.DefaultSqlScriptExecutor","thread":"main","message":"DB: extension \"postgis\" already exists, skipping (SQL State: 42710 - Error Code: 0)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:24.7132689-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"2 - sample distribution centers\"","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:24.7334581-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Successfully applied 2 migrations to schema \"public\", now at version v2 (execution time 00:00.041s)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:24.8195258-03:00","level":"INFO","logger":"o.h.jpa.internal.util.LogHelper","thread":"main","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:24.8879355-03:00","level":"INFO","logger":"org.hibernate.Version","thread":"main","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:24.9062446-03:00","level":"INFO","logger":"o.h.s.integration.SpatialService","thread":"main","message":"HHH80000001: hibernate-spatial integration enabled : true","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:24.9312124-03:00","level":"INFO","logger":"o.h.c.i.RegionFactoryInitiator","thread":"main","message":"HHH000026: Second-level cache disabled","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:25.083132-03:00","level":"WARN","logger":"org.hibernate.orm.deprecation","thread":"main","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:25.1030782-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:25.3368234-03:00","level":"INFO","logger":"o.s.o.j.p.SpringPersistenceUnitInfo","thread":"main","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:25.3767955-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:25.889665-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000004: hibernate-spatial adding function contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:26.4362786-03:00","level":"INFO","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator","thread":"main","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:26.4496165-03:00","level":"INFO","logger":"o.hibernate.orm.connections.access","thread":"main","message":"HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@1d72edfd] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:26.4789055-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"main","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:27.1199647-03:00","level":"INFO","logger":"o.s.d.j.r.query.QueryEnhancerFactory","thread":"main","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:28.7376644-03:00","level":"WARN","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration","thread":"main","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:30.1105507-03:00","level":"INFO","logger":"o.s.b.a.e.web.EndpointLinksResolver","thread":"main","message":"Exposing 5 endpoint(s) beneath base path '/actuator'","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:30.2303295-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Starting ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:30.2435253-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat started on port 53304 (http) with context path '/api'","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:30.2870327-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:53296]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-orders-service-it-consumer-1\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = orders-service-it-consumer\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:30.4697954-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:30.4707955-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:30.4707955-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758647610468","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:30.4753107-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:30.489805-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Started DistributionCenterCachingIT in 10.779 seconds (process running for 19.055)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:30.9069768-03:00","level":"WARN","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error while fetching metadata with correlation id 2 : {orders.events=LEADER_NOT_AVAILABLE}","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:30.9096165-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cluster ID: w1FwgoVhQnWl13Lq56s8Ew","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:31.0247554-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Discovered group coordinator localhost:53296 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:31.0305-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:31.0526013-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: need to re-join with the given member-id: consumer-orders-service-it-consumer-1-7af8ec1c-3c89-4da0-a406-d2c209cfe547","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:31.0531609-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:31.0531609-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:31.0658103-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully joined group with generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-7af8ec1c-3c89-4da0-a406-d2c209cfe547', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:31.0694979-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Finished assignment for group at generation 1: {consumer-orders-service-it-consumer-1-7af8ec1c-3c89-4da0-a406-d2c209cfe547=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:31.1028136-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully synced group in generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-7af8ec1c-3c89-4da0-a406-d2c209cfe547', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:31.1028136-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:31.1053301-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:31.1187493-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:31.1288508-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:53296 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:31.1299841-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions assigned: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:32.0658386-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"http-nio-auto-1-exec-1","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:32.0658386-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-1","message":"Initializing Servlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:32.0673504-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-1","message":"Completed initialization in 2 ms","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:32.2156944-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"8653dd1f-909a-45fe-92e0-a845001fe4e5","message":"Processing new order request - Correlation ID: 86d5810f-2681-4925-859d-52af7af8bca8, Customer: customer-cache, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:32.7052824-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"8653dd1f-909a-45fe-92e0-a845001fe4e5","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:32.7062818-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"8653dd1f-909a-45fe-92e0-a845001fe4e5","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:32.7240361-03:00","level":"INFO","logger":"o.a.k.c.producer.ProducerConfig","thread":"http-nio-auto-1-exec-1","correlationId":"8653dd1f-909a-45fe-92e0-a845001fe4e5","message":"ProducerConfig values: \r\n\tacks = -1\r\n\tauto.include.jmx.reporter = true\r\n\tbatch.size = 16384\r\n\tbootstrap.servers = [PLAINTEXT://localhost:53296]\r\n\tbuffer.memory = 33554432\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = orders-service-producer-1\r\n\tcompression.type = snappy\r\n\tconnections.max.idle.ms = 540000\r\n\tdelivery.timeout.ms = 120000\r\n\tenable.idempotence = true\r\n\tinterceptor.classes = []\r\n\tkey.serializer = class org.apache.kafka.common.serialization.StringSerializer\r\n\tlinger.ms = 10\r\n\tmax.block.ms = 60000\r\n\tmax.in.flight.requests.per.connection = 5\r\n\tmax.request.size = 1048576\r\n\tmetadata.max.age.ms = 300000\r\n\tmetadata.max.idle.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartitioner.adaptive.partitioning.enable = true\r\n\tpartitioner.availability.timeout.ms = 0\r\n\tpartitioner.class = null\r\n\tpartitioner.ignore.keys = false\r\n\treceive.buffer.bytes = 32768\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretries = 3\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\ttransaction.timeout.ms = 60000\r\n\ttransactional.id = null\r\n\tvalue.serializer = class org.springframework.kafka.support.serializer.JsonSerializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:32.738766-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"http-nio-auto-1-exec-1","correlationId":"8653dd1f-909a-45fe-92e0-a845001fe4e5","message":"[Producer clientId=orders-service-producer-1] Instantiated an idempotent producer.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:32.7610065-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"8653dd1f-909a-45fe-92e0-a845001fe4e5","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:32.7610065-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"8653dd1f-909a-45fe-92e0-a845001fe4e5","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:32.7610065-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"8653dd1f-909a-45fe-92e0-a845001fe4e5","message":"Kafka startTimeMs: 1758647612761","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:32.7694778-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cluster ID: w1FwgoVhQnWl13Lq56s8Ew","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:32.7831214-03:00","level":"INFO","logger":"o.a.k.c.p.i.TransactionManager","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] ProducerId set to 0 with epoch 0","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:32.9477458-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"8653dd1f-909a-45fe-92e0-a845001fe4e5","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS1WT5T7GF4WSKCG2G2S7W","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.0119897-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VS1WT5T7GF4WSKCG2G2S7W","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.3854074-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.3854074-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-1","correlationId":"8653dd1f-909a-45fe-92e0-a845001fe4e5","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.3854074-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item CACHE1 pedido 01K5VS1WT5T7GF4WSKCG2G2S7W -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.3854074-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-1","correlationId":"8653dd1f-909a-45fe-92e0-a845001fe4e5","message":"CD selecionado para item CACHE1 pedido 01K5VS1WT5T7GF4WSKCG2G2S7W -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.3881732-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.3881732-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.3881732-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"8653dd1f-909a-45fe-92e0-a845001fe4e5","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.3881732-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"8653dd1f-909a-45fe-92e0-a845001fe4e5","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.3887558-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS1WT5T7GF4WSKCG2G2S7W","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.3887558-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"8653dd1f-909a-45fe-92e0-a845001fe4e5","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS1WT5T7GF4WSKCG2G2S7W","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.401961-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"8653dd1f-909a-45fe-92e0-a845001fe4e5","message":"Order processed successfully - ID: 01K5VS1WT5T7GF4WSKCG2G2S7W, Status: PROCESSED, Correlation ID: 86d5810f-2681-4925-859d-52af7af8bca8","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.4070184-03:00","level":"INFO","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100503: On release of batch it still contained JDBC statements","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.4075694-03:00","level":"ERROR","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100501: Exception executing batch [org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?], SQL: delete from order_items where id=?","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.4146562-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VS1WT5T7GF4WSKCG2G2S7W from event: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?","exception":"org.springframework.orm.ObjectOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:328)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:565)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:669)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:419)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:67)\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:54)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.checkRowCounts(BatchImpl.java:314)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:278)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.PreparedStatementGroupSingleTable.forEachStatement(PreparedStatementGroupSingleTable.java:59)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.performExecution(BatchImpl.java:260)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.execute(BatchImpl.java:239)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.executeBatch(JdbcCoordinatorImpl.java:188)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:659)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1415)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:496)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2325)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1988)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:561)\r\n\t... 31 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.5518697-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-3","correlationId":"3153d971-d843-4bfe-8964-990a75a273d2","message":"Fetching order by ID: 01K5VS1WT5T7GF4WSKCG2G2S7W - Correlation ID: 5dc513a1-2db9-45a4-ab30-b3077b4ef2eb","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.561804-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-3","correlationId":"3153d971-d843-4bfe-8964-990a75a273d2","message":"Order retrieved successfully - ID: 01K5VS1WT5T7GF4WSKCG2G2S7W, Status: PROCESSED, Correlation ID: 5dc513a1-2db9-45a4-ab30-b3077b4ef2eb","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.5759917-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"37bf6dc5-9cd2-45bb-b318-6fbf70384e2c","message":"Processing new order request - Correlation ID: 49252d16-cd52-42e9-b113-fe78b2a86876, Customer: customer-cache, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.582677-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"37bf6dc5-9cd2-45bb-b318-6fbf70384e2c","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.5832534-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"37bf6dc5-9cd2-45bb-b318-6fbf70384e2c","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.5837763-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"37bf6dc5-9cd2-45bb-b318-6fbf70384e2c","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS1Y47SCRW0TFE0DY5AXZ9","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.6051175-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-2","correlationId":"37bf6dc5-9cd2-45bb-b318-6fbf70384e2c","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.6051175-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-2","correlationId":"37bf6dc5-9cd2-45bb-b318-6fbf70384e2c","message":"CD selecionado para item CACHE1 pedido 01K5VS1Y47SCRW0TFE0DY5AXZ9 -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.609926-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"37bf6dc5-9cd2-45bb-b318-6fbf70384e2c","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.6104466-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"37bf6dc5-9cd2-45bb-b318-6fbf70384e2c","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.6104466-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-2","correlationId":"37bf6dc5-9cd2-45bb-b318-6fbf70384e2c","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS1Y47SCRW0TFE0DY5AXZ9","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.6116419-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VS1Y47SCRW0TFE0DY5AXZ9","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.614392-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"37bf6dc5-9cd2-45bb-b318-6fbf70384e2c","message":"Order processed successfully - ID: 01K5VS1Y47SCRW0TFE0DY5AXZ9, Status: PROCESSED, Correlation ID: 49252d16-cd52-42e9-b113-fe78b2a86876","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.6219495-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.6219495-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item CACHE1 pedido 01K5VS1Y47SCRW0TFE0DY5AXZ9 -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.6224913-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.6224913-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item CACHE1 pedido 01K5VS1Y47SCRW0TFE0DY5AXZ9 -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.6261936-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.6261936-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.6267127-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS1Y47SCRW0TFE0DY5AXZ9","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.6587235-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT]: OrderEndToEndProcessingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.6607308-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.6991651-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"ea42e594-926b-4e69-a32d-fcdf7d281f32","message":"Processing new order request - Correlation ID: ea42e594-926b-4e69-a32d-fcdf7d281f32, Customer: customer-async-proc, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.705017-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"ea42e594-926b-4e69-a32d-fcdf7d281f32","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.705017-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"ea42e594-926b-4e69-a32d-fcdf7d281f32","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7055393-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"ea42e594-926b-4e69-a32d-fcdf7d281f32","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS1Y832N62R2C6WZ0CTGFF","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7131834-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-5","correlationId":"ea42e594-926b-4e69-a32d-fcdf7d281f32","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7136994-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-5","correlationId":"ea42e594-926b-4e69-a32d-fcdf7d281f32","message":"CD selecionado para item ASYNC-PROC-1 pedido 01K5VS1Y832N62R2C6WZ0CTGFF -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7168784-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"ea42e594-926b-4e69-a32d-fcdf7d281f32","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7173977-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"ea42e594-926b-4e69-a32d-fcdf7d281f32","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7173977-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"ea42e594-926b-4e69-a32d-fcdf7d281f32","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS1Y832N62R2C6WZ0CTGFF","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7219833-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"ea42e594-926b-4e69-a32d-fcdf7d281f32","message":"Order processed successfully - ID: 01K5VS1Y832N62R2C6WZ0CTGFF, Status: PROCESSED, Correlation ID: ea42e594-926b-4e69-a32d-fcdf7d281f32","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7257636-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-4","correlationId":"0ab9bf3b-9984-443f-82e1-776459a82be1","message":"Fetching order by ID: 01K5VS1Y832N62R2C6WZ0CTGFF - Correlation ID: c7264c74-0923-422b-bb3a-a9d54ff6834a","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7310292-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VS1Y832N62R2C6WZ0CTGFF","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7310292-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-4","correlationId":"0ab9bf3b-9984-443f-82e1-776459a82be1","message":"Order retrieved successfully - ID: 01K5VS1Y832N62R2C6WZ0CTGFF, Status: PROCESSED, Correlation ID: c7264c74-0923-422b-bb3a-a9d54ff6834a","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7357141-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VS1Y832N62R2C6WZ0CTGFF from event: Failed to process order [01K5VS1Y832N62R2C6WZ0CTGFF]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VS1Y832N62R2C6WZ0CTGFF]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7393488-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT]: OrderEventConsumptionIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7409035-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7733433-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"b9740b23-530a-4559-a7cf-d84ba1c9c8d1","message":"Processing new order request - Correlation ID: f840aa5f-3cca-49dc-9f32-7adc072d9466, Customer: customer-event-consumer, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7790793-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"b9740b23-530a-4559-a7cf-d84ba1c9c8d1","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7796009-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"b9740b23-530a-4559-a7cf-d84ba1c9c8d1","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7796009-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"b9740b23-530a-4559-a7cf-d84ba1c9c8d1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS1YAD6M3ZRWXBYZ0VMXQK","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7864488-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-8","correlationId":"b9740b23-530a-4559-a7cf-d84ba1c9c8d1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7869684-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-8","correlationId":"b9740b23-530a-4559-a7cf-d84ba1c9c8d1","message":"CD selecionado para item EVT-CONSUME-1 pedido 01K5VS1YAD6M3ZRWXBYZ0VMXQK -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7890433-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"b9740b23-530a-4559-a7cf-d84ba1c9c8d1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7890433-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"b9740b23-530a-4559-a7cf-d84ba1c9c8d1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7890433-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"b9740b23-530a-4559-a7cf-d84ba1c9c8d1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS1YAD6M3ZRWXBYZ0VMXQK","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7921479-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"b9740b23-530a-4559-a7cf-d84ba1c9c8d1","message":"Order processed successfully - ID: 01K5VS1YAD6M3ZRWXBYZ0VMXQK, Status: PROCESSED, Correlation ID: f840aa5f-3cca-49dc-9f32-7adc072d9466","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7947414-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:53296]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86-2\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7977464-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7977464-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7977464-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758647613797","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.7987463-03:00","level":"INFO","logger":"o.a.k.clients.consumer.KafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86-2, groupId=order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.8045297-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86-2, groupId=order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86] Cluster ID: w1FwgoVhQnWl13Lq56s8Ew","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.8045297-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86-2, groupId=order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86] Discovered group coordinator localhost:53296 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.8055694-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VS1YAD6M3ZRWXBYZ0VMXQK","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.8060898-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86-2, groupId=order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.8081742-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86-2, groupId=order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86] Request joining group due to: need to re-join with the given member-id: consumer-order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86-2-53b8eed5-598d-4175-b2a5-f043d67d4050","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.8081742-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86-2, groupId=order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.8086842-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86-2, groupId=order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.809732-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VS1YAD6M3ZRWXBYZ0VMXQK from event: Failed to process order [01K5VS1YAD6M3ZRWXBYZ0VMXQK]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VS1YAD6M3ZRWXBYZ0VMXQK]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.812851-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86-2, groupId=order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86] Successfully joined group with generation Generation{generationId=1, memberId='consumer-order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86-2-53b8eed5-598d-4175-b2a5-f043d67d4050', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.812851-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86-2, groupId=order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86] Finished assignment for group at generation 1: {consumer-order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86-2-53b8eed5-598d-4175-b2a5-f043d67d4050=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.8165657-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86-2, groupId=order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86] Successfully synced group in generation Generation{generationId=1, memberId='consumer-order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86-2-53b8eed5-598d-4175-b2a5-f043d67d4050', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.8170837-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86-2, groupId=order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.8170837-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86-2, groupId=order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.8186294-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86-2, groupId=order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.8233438-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86-2, groupId=order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:53296 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.837094-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86-2, groupId=order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.837094-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86-2, groupId=order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86] Member consumer-order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86-2-53b8eed5-598d-4175-b2a5-f043d67d4050 sending LeaveGroup request to coordinator localhost:53296 (id: 2147483646 rack: null) due to the consumer is being closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.838603-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86-2, groupId=order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:33.838603-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86-2, groupId=order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.2854702-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.2854702-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.2854702-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.287856-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"App info kafka.consumer for consumer-order-events-test-group-2dcf5278-ac58-4aa4-9c6c-692e9357da86-2 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.2972743-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventPublishingIT]: OrderEventPublishingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.2978663-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventPublishingIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.3327512-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"b1b0cd68-7150-4703-9bc9-747e51a99bd5","message":"Processing new order request - Correlation ID: 1e398034-abbd-41c6-b009-c82a7f5e6618, Customer: customer-events, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.340545-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"b1b0cd68-7150-4703-9bc9-747e51a99bd5","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.340545-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"b1b0cd68-7150-4703-9bc9-747e51a99bd5","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.340545-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"b1b0cd68-7150-4703-9bc9-747e51a99bd5","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS1YVWXY11V0W1EQP91YRS","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.3497774-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-6","correlationId":"b1b0cd68-7150-4703-9bc9-747e51a99bd5","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.3497774-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-6","correlationId":"b1b0cd68-7150-4703-9bc9-747e51a99bd5","message":"CD selecionado para item EVT123 pedido 01K5VS1YVWXY11V0W1EQP91YRS -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.3519177-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"b1b0cd68-7150-4703-9bc9-747e51a99bd5","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.3524393-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"b1b0cd68-7150-4703-9bc9-747e51a99bd5","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.3529706-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"b1b0cd68-7150-4703-9bc9-747e51a99bd5","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS1YVWXY11V0W1EQP91YRS","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.3566678-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"b1b0cd68-7150-4703-9bc9-747e51a99bd5","message":"Order processed successfully - ID: 01K5VS1YVWXY11V0W1EQP91YRS, Status: PROCESSED, Correlation ID: 1e398034-abbd-41c6-b009-c82a7f5e6618","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.3621047-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderFlowIT]: OrderFlowIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.3626466-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderFlowIT","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.3657665-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VS1YVWXY11V0W1EQP91YRS","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.3715246-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VS1YVWXY11V0W1EQP91YRS from event: Failed to process order [01K5VS1YVWXY11V0W1EQP91YRS]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VS1YVWXY11V0W1EQP91YRS]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.3943865-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-7","correlationId":"0803d4b1-40f9-408e-b69c-cd2cbef1cdc3","message":"Processing new order request - Correlation ID: 0803d4b1-40f9-408e-b69c-cd2cbef1cdc3, Customer: customer-1, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.4002115-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"0803d4b1-40f9-408e-b69c-cd2cbef1cdc3","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.4002115-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"0803d4b1-40f9-408e-b69c-cd2cbef1cdc3","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.4007341-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"0803d4b1-40f9-408e-b69c-cd2cbef1cdc3","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS1YXT83WX0M3E9FK0E80S","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.4087475-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-7","correlationId":"0803d4b1-40f9-408e-b69c-cd2cbef1cdc3","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.4092729-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-7","correlationId":"0803d4b1-40f9-408e-b69c-cd2cbef1cdc3","message":"CD selecionado para item ABC123 pedido 01K5VS1YXT83WX0M3E9FK0E80S -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.4119163-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"0803d4b1-40f9-408e-b69c-cd2cbef1cdc3","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.4119163-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"0803d4b1-40f9-408e-b69c-cd2cbef1cdc3","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.4124365-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"0803d4b1-40f9-408e-b69c-cd2cbef1cdc3","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5VS1YXT83WX0M3E9FK0E80S","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.4166545-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-7","correlationId":"0803d4b1-40f9-408e-b69c-cd2cbef1cdc3","message":"Order processed successfully - ID: 01K5VS1YXT83WX0M3E9FK0E80S, Status: PROCESSED, Correlation ID: 0803d4b1-40f9-408e-b69c-cd2cbef1cdc3","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.4209868-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-9","correlationId":"98dbd73a-d253-4e20-8330-5d40f5097e1a","message":"Fetching order by ID: 01K5VS1YXT83WX0M3E9FK0E80S - Correlation ID: 0cdca53a-adfe-4fa0-a467-123971e9a012","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.4249785-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5VS1YXT83WX0M3E9FK0E80S","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.4270572-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-9","correlationId":"98dbd73a-d253-4e20-8330-5d40f5097e1a","message":"Order retrieved successfully - ID: 01K5VS1YXT83WX0M3E9FK0E80S, Status: PROCESSED, Correlation ID: 0cdca53a-adfe-4fa0-a467-123971e9a012","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.4296663-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5VS1YXT83WX0M3E9FK0E80S from event: Failed to process order [01K5VS1YXT83WX0M3E9FK0E80S]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5VS1YXT83WX0M3E9FK0E80S]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.49855-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.49855-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.646673-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight FETCH request with correlation id 25 due to node 1 being disconnected (elapsed time since creation: 74ms, elapsed time since send: 74ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.6476757-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.6476757-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cancelled in-flight METADATA request with correlation id 12 due to node 1 being disconnected (elapsed time since creation: 1ms, elapsed time since send: 1ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.6476757-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.6498719-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 2147483646 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.6510732-03:00","level":"INFO","logger":"o.a.k.clients.FetchSessionHandler","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error sending fetch request (sessionId=1363781843, epoch=12) to node 1:","exception":"org.apache.kafka.common.errors.DisconnectException: null\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.651627-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Group coordinator localhost:53296 (id: 2147483646 rack: null) is unavailable or invalid due to cause: coordinator unavailable. isDisconnected: true. Rediscovery will be attempted.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.6521325-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.6521325-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions revoked: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.6526505-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.6526505-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.6526505-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Unsubscribed all topics or patterns and assigned partitions","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.6531777-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.6531777-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.6549659-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.6554777-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight API_VERSIONS request with correlation id 28 due to node 1 being disconnected (elapsed time since creation: 1ms, elapsed time since send: 1ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.6560677-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.6560677-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.6566052-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.6576343-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"App info kafka.consumer for consumer-orders-service-it-consumer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.6581886-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: Consumer stopped","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.751116-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.751116-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cancelled in-flight API_VERSIONS request with correlation id 13 due to node 1 being disconnected (elapsed time since creation: 1ms, elapsed time since send: 1ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.7847422-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"SpringApplicationShutdownHook","message":"[Producer clientId=orders-service-producer-1] Closing the Kafka producer with timeoutMillis = 30000 ms.","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.7867431-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.7867431-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.7867431-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.7867431-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"SpringApplicationShutdownHook","message":"App info kafka.producer for orders-service-producer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.8014787-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"SpringApplicationShutdownHook","message":"Closing JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.8030146-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown initiated...","service":"orders-service"}
{"timestamp":"2025-09-23T14:13:34.8046257-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown completed.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:12.112848-03:00","level":"INFO","logger":"o.h.validator.internal.util.Version","thread":"background-preinit","message":"HV000001: Hibernate Validator 8.0.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:12.1616428-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Starting DistributionCenterCachingIT using Java 21.0.8 with PID 9152 (started by ciror in Z:\\projects\\meli-test-mktplace)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:12.1616428-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"The following 1 profile is active: \"integration-test\"","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:12.7282293-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:12.7282293-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:12.8254804-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 92 ms. Found 1 JPA repository interface.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:13.2582521-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:13.2592565-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data Redis repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:13.2876567-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationExtensionSupport","thread":"main","message":"Spring Data Redis - Could not safely identify store assignment for repository candidate interface br.com.ml.mktplace.orders.adapter.outbound.persistence.repository.JpaOrderEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:13.2876567-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 19 ms. Found 0 Redis repository interfaces.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:14.2220509-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat initialized with port 0 (http)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:14.2311153-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Initializing ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:14.2321144-03:00","level":"INFO","logger":"o.a.catalina.core.StandardService","thread":"main","message":"Starting service [Tomcat]","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:14.2331141-03:00","level":"INFO","logger":"o.a.catalina.core.StandardEngine","thread":"main","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:14.2938455-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"main","message":"Initializing Spring embedded WebApplicationContext","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:14.294845-03:00","level":"INFO","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","thread":"main","message":"Root WebApplicationContext: initialization completed in 2117 ms","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:14.6331432-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Starting...","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:14.8234444-03:00","level":"INFO","logger":"com.zaxxer.hikari.pool.HikariPool","thread":"main","message":"OrdersHikariPool - Added connection org.postgresql.jdbc.PgConnection@2c385411","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:14.8264425-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Start completed.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:14.9496277-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"Flyway Community Edition 9.22.3 by Redgate","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:14.9501938-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"See release notes here: https://rd.gt/416ObMi","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:14.9501938-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:14.9778742-03:00","level":"INFO","logger":"org.flywaydb.core.FlywayExecutor","thread":"main","message":"Database: jdbc:postgresql://localhost:54199/mktplace_orders (PostgreSQL 16.4)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:14.9897135-03:00","level":"WARN","logger":"o.f.c.i.database.base.Database","thread":"main","message":"Flyway upgrade recommended: PostgreSQL 16.4 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:15.0292605-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Schema history table \"public\".\"flyway_schema_history\" does not exist yet","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:15.0349704-03:00","level":"INFO","logger":"o.f.core.internal.command.DbValidate","thread":"main","message":"Successfully validated 2 migrations (execution time 00:00.029s)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:15.0538544-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Creating Schema History table \"public\".\"flyway_schema_history\" ...","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:15.0932753-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Current version of schema \"public\": << Empty Schema >>","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:15.105061-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"1 - initial schema\"","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:15.1127068-03:00","level":"WARN","logger":"o.f.c.i.s.DefaultSqlScriptExecutor","thread":"main","message":"DB: extension \"postgis\" already exists, skipping (SQL State: 42710 - Error Code: 0)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:15.1573942-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"2 - sample distribution centers\"","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:15.1749228-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Successfully applied 2 migrations to schema \"public\", now at version v2 (execution time 00:00.041s)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:15.2302428-03:00","level":"INFO","logger":"o.h.jpa.internal.util.LogHelper","thread":"main","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:15.2807244-03:00","level":"INFO","logger":"org.hibernate.Version","thread":"main","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:15.289239-03:00","level":"INFO","logger":"o.h.s.integration.SpatialService","thread":"main","message":"HHH80000001: hibernate-spatial integration enabled : true","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:15.3146516-03:00","level":"INFO","logger":"o.h.c.i.RegionFactoryInitiator","thread":"main","message":"HHH000026: Second-level cache disabled","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:15.4122014-03:00","level":"WARN","logger":"org.hibernate.orm.deprecation","thread":"main","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:15.4312453-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:15.6003268-03:00","level":"INFO","logger":"o.s.o.j.p.SpringPersistenceUnitInfo","thread":"main","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:15.6185125-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:15.9088875-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000004: hibernate-spatial adding function contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:16.3509703-03:00","level":"INFO","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator","thread":"main","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:16.3659902-03:00","level":"INFO","logger":"o.hibernate.orm.connections.access","thread":"main","message":"HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@3d0335f0] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:16.390164-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"main","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:16.7200702-03:00","level":"INFO","logger":"o.s.d.j.r.query.QueryEnhancerFactory","thread":"main","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:17.9056578-03:00","level":"WARN","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration","thread":"main","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:18.8415933-03:00","level":"INFO","logger":"o.s.b.a.e.web.EndpointLinksResolver","thread":"main","message":"Exposing 5 endpoint(s) beneath base path '/actuator'","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:18.9122473-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Starting ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:18.9242942-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat started on port 54211 (http) with context path '/api'","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:18.9576717-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:54203]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-orders-service-it-consumer-1\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = orders-service-it-consumer\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:19.071356-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:19.0723561-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:19.0723561-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758658399070","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:19.0758646-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:19.0891526-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Started DistributionCenterCachingIT in 7.471 seconds (process running for 15.578)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:19.4307208-03:00","level":"WARN","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error while fetching metadata with correlation id 2 : {orders.events=LEADER_NOT_AVAILABLE}","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:19.4334215-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cluster ID: j2Fe3zXkQq2C_WE_lYg4YA","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:19.642989-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Discovered group coordinator localhost:54203 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:19.6464598-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:19.6628303-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: need to re-join with the given member-id: consumer-orders-service-it-consumer-1-e0c7e106-156f-4adc-ba6b-b246c67a08ab","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:19.6634313-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:19.6634313-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:19.6781327-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully joined group with generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-e0c7e106-156f-4adc-ba6b-b246c67a08ab', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:19.6862282-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Finished assignment for group at generation 1: {consumer-orders-service-it-consumer-1-e0c7e106-156f-4adc-ba6b-b246c67a08ab=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:19.7246096-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully synced group in generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-e0c7e106-156f-4adc-ba6b-b246c67a08ab', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:19.7246096-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:19.7266139-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:19.7362281-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:19.7450682-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:54203 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:19.7456459-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions assigned: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:20.3972762-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"http-nio-auto-1-exec-1","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:20.3972762-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-1","message":"Initializing Servlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:20.3982759-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-1","message":"Completed initialization in 1 ms","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:20.5123137-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"46ccd7ca-ba1a-44e0-af7b-b442ef34417f","message":"Processing new order request - Correlation ID: 8df0cd01-3f5b-43e1-9e31-3964c591da24, Customer: customer-cache, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:20.9082284-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"46ccd7ca-ba1a-44e0-af7b-b442ef34417f","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:20.9082284-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"46ccd7ca-ba1a-44e0-af7b-b442ef34417f","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:20.9204406-03:00","level":"INFO","logger":"o.a.k.c.producer.ProducerConfig","thread":"http-nio-auto-1-exec-1","correlationId":"46ccd7ca-ba1a-44e0-af7b-b442ef34417f","message":"ProducerConfig values: \r\n\tacks = -1\r\n\tauto.include.jmx.reporter = true\r\n\tbatch.size = 16384\r\n\tbootstrap.servers = [PLAINTEXT://localhost:54203]\r\n\tbuffer.memory = 33554432\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = orders-service-producer-1\r\n\tcompression.type = snappy\r\n\tconnections.max.idle.ms = 540000\r\n\tdelivery.timeout.ms = 120000\r\n\tenable.idempotence = true\r\n\tinterceptor.classes = []\r\n\tkey.serializer = class org.apache.kafka.common.serialization.StringSerializer\r\n\tlinger.ms = 10\r\n\tmax.block.ms = 60000\r\n\tmax.in.flight.requests.per.connection = 5\r\n\tmax.request.size = 1048576\r\n\tmetadata.max.age.ms = 300000\r\n\tmetadata.max.idle.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartitioner.adaptive.partitioning.enable = true\r\n\tpartitioner.availability.timeout.ms = 0\r\n\tpartitioner.class = null\r\n\tpartitioner.ignore.keys = false\r\n\treceive.buffer.bytes = 32768\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretries = 3\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\ttransaction.timeout.ms = 60000\r\n\ttransactional.id = null\r\n\tvalue.serializer = class org.springframework.kafka.support.serializer.JsonSerializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:20.9309484-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"http-nio-auto-1-exec-1","correlationId":"46ccd7ca-ba1a-44e0-af7b-b442ef34417f","message":"[Producer clientId=orders-service-producer-1] Instantiated an idempotent producer.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:20.9437145-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"46ccd7ca-ba1a-44e0-af7b-b442ef34417f","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:20.9437145-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"46ccd7ca-ba1a-44e0-af7b-b442ef34417f","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:20.9447201-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"46ccd7ca-ba1a-44e0-af7b-b442ef34417f","message":"Kafka startTimeMs: 1758658400943","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:20.9519389-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cluster ID: j2Fe3zXkQq2C_WE_lYg4YA","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:20.9669531-03:00","level":"INFO","logger":"o.a.k.c.p.i.TransactionManager","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] ProducerId set to 0 with epoch 0","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.1479629-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"46ccd7ca-ba1a-44e0-af7b-b442ef34417f","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3B48CVDF43FPESRKG291A","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.2019843-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W3B48CVDF43FPESRKG291A","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.4759827-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-1","correlationId":"46ccd7ca-ba1a-44e0-af7b-b442ef34417f","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.4759827-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.4764994-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-1","correlationId":"46ccd7ca-ba1a-44e0-af7b-b442ef34417f","message":"CD selecionado para item CACHE1 pedido 01K5W3B48CVDF43FPESRKG291A -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.4764994-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item CACHE1 pedido 01K5W3B48CVDF43FPESRKG291A -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.4792884-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.4792884-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"46ccd7ca-ba1a-44e0-af7b-b442ef34417f","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.4792884-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.4792884-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"46ccd7ca-ba1a-44e0-af7b-b442ef34417f","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.4798071-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3B48CVDF43FPESRKG291A","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.4798071-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"46ccd7ca-ba1a-44e0-af7b-b442ef34417f","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3B48CVDF43FPESRKG291A","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.4903674-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"46ccd7ca-ba1a-44e0-af7b-b442ef34417f","message":"Order processed successfully - ID: 01K5W3B48CVDF43FPESRKG291A, Status: PROCESSED, Correlation ID: 8df0cd01-3f5b-43e1-9e31-3964c591da24","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.4934242-03:00","level":"INFO","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100503: On release of batch it still contained JDBC statements","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.4940591-03:00","level":"ERROR","logger":"org.hibernate.orm.jdbc.batch","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"HHH100501: Exception executing batch [org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?], SQL: delete from order_items where id=?","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.4991104-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5W3B48CVDF43FPESRKG291A from event: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?","exception":"org.springframework.orm.ObjectOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:328)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:565)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:669)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:419)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:67)\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:54)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.checkRowCounts(BatchImpl.java:314)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:278)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.PreparedStatementGroupSingleTable.forEachStatement(PreparedStatementGroupSingleTable.java:59)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.performExecution(BatchImpl.java:260)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.execute(BatchImpl.java:239)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.executeBatch(JdbcCoordinatorImpl.java:188)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:659)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1415)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:496)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2325)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1988)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:561)\r\n\t... 31 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.5575275-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"83402f46-0cc8-4b76-8610-eb58006c6245","message":"Fetching order by ID: 01K5W3B48CVDF43FPESRKG291A - Correlation ID: 639b37a0-a1a8-42ca-8952-cc197869bef5","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.5660538-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"83402f46-0cc8-4b76-8610-eb58006c6245","message":"Order retrieved successfully - ID: 01K5W3B48CVDF43FPESRKG291A, Status: PROCESSED, Correlation ID: 639b37a0-a1a8-42ca-8952-cc197869bef5","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.5803415-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-3","correlationId":"148628a8-7fb4-4090-bdf9-7c6b8821ad3c","message":"Processing new order request - Correlation ID: 833c936c-2e34-4a3a-b677-e9b2b78d5022, Customer: customer-cache, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.5859922-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"148628a8-7fb4-4090-bdf9-7c6b8821ad3c","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.5865915-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"148628a8-7fb4-4090-bdf9-7c6b8821ad3c","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.5865915-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"148628a8-7fb4-4090-bdf9-7c6b8821ad3c","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3B59DAKQ02KYXWFQP9A0W","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.6013216-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-3","correlationId":"148628a8-7fb4-4090-bdf9-7c6b8821ad3c","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.6013216-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-3","correlationId":"148628a8-7fb4-4090-bdf9-7c6b8821ad3c","message":"CD selecionado para item CACHE1 pedido 01K5W3B59DAKQ02KYXWFQP9A0W -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.6040438-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"148628a8-7fb4-4090-bdf9-7c6b8821ad3c","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.6045616-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"148628a8-7fb4-4090-bdf9-7c6b8821ad3c","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.6045616-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"148628a8-7fb4-4090-bdf9-7c6b8821ad3c","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3B59DAKQ02KYXWFQP9A0W","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.6078699-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-3","correlationId":"148628a8-7fb4-4090-bdf9-7c6b8821ad3c","message":"Order processed successfully - ID: 01K5W3B59DAKQ02KYXWFQP9A0W, Status: PROCESSED, Correlation ID: 833c936c-2e34-4a3a-b677-e9b2b78d5022","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.6140354-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W3B59DAKQ02KYXWFQP9A0W","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.6197865-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5W3B59DAKQ02KYXWFQP9A0W from event: Failed to process order [01K5W3B59DAKQ02KYXWFQP9A0W]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5W3B59DAKQ02KYXWFQP9A0W]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.6614285-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT]: OrderEndToEndProcessingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.6659361-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.7181874-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-9","correlationId":"b094cd34-9a7c-4ea9-ae45-732a4e6a0a0a","message":"Processing new order request - Correlation ID: b094cd34-9a7c-4ea9-ae45-732a4e6a0a0a, Customer: customer-async-proc, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.7250342-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-9","correlationId":"b094cd34-9a7c-4ea9-ae45-732a4e6a0a0a","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.7255481-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-9","correlationId":"b094cd34-9a7c-4ea9-ae45-732a4e6a0a0a","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.7255481-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-9","correlationId":"b094cd34-9a7c-4ea9-ae45-732a4e6a0a0a","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3B5DQEQPK2B9G6ZF4Q9WT","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.733538-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-9","correlationId":"b094cd34-9a7c-4ea9-ae45-732a4e6a0a0a","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.7341058-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-9","correlationId":"b094cd34-9a7c-4ea9-ae45-732a4e6a0a0a","message":"CD selecionado para item ASYNC-PROC-1 pedido 01K5W3B5DQEQPK2B9G6ZF4Q9WT -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.736205-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-9","correlationId":"b094cd34-9a7c-4ea9-ae45-732a4e6a0a0a","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.7367156-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-9","correlationId":"b094cd34-9a7c-4ea9-ae45-732a4e6a0a0a","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.7367156-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-9","correlationId":"b094cd34-9a7c-4ea9-ae45-732a4e6a0a0a","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3B5DQEQPK2B9G6ZF4Q9WT","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.7398743-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-9","correlationId":"b094cd34-9a7c-4ea9-ae45-732a4e6a0a0a","message":"Order processed successfully - ID: 01K5W3B5DQEQPK2B9G6ZF4Q9WT, Status: PROCESSED, Correlation ID: b094cd34-9a7c-4ea9-ae45-732a4e6a0a0a","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.7446684-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"1bb6e664-1c8b-496b-b7da-8744ba666955","message":"Fetching order by ID: 01K5W3B5DQEQPK2B9G6ZF4Q9WT - Correlation ID: e9012304-ea21-4b38-8389-f1963bf4d877","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.7495995-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"1bb6e664-1c8b-496b-b7da-8744ba666955","message":"Order retrieved successfully - ID: 01K5W3B5DQEQPK2B9G6ZF4Q9WT, Status: PROCESSED, Correlation ID: e9012304-ea21-4b38-8389-f1963bf4d877","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.7507216-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W3B5DQEQPK2B9G6ZF4Q9WT","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.7565152-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT]: OrderEventConsumptionIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.7565152-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5W3B5DQEQPK2B9G6ZF4Q9WT from event: Failed to process order [01K5W3B5DQEQPK2B9G6ZF4Q9WT]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5W3B5DQEQPK2B9G6ZF4Q9WT]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.7580761-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.7950219-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"6c60166e-848b-44f9-9229-516b0cfdb79a","message":"Processing new order request - Correlation ID: 24494f66-29fa-47b5-9351-4d0ae6a9b939, Customer: customer-event-consumer, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8010712-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"6c60166e-848b-44f9-9229-516b0cfdb79a","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8010712-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"6c60166e-848b-44f9-9229-516b0cfdb79a","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8016161-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"6c60166e-848b-44f9-9229-516b0cfdb79a","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3B5G3XHRAZ4VCSK3EKA5Q","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8095495-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-6","correlationId":"6c60166e-848b-44f9-9229-516b0cfdb79a","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8095495-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-6","correlationId":"6c60166e-848b-44f9-9229-516b0cfdb79a","message":"CD selecionado para item EVT-CONSUME-1 pedido 01K5W3B5G3XHRAZ4VCSK3EKA5Q -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.811703-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"6c60166e-848b-44f9-9229-516b0cfdb79a","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.811703-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"6c60166e-848b-44f9-9229-516b0cfdb79a","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8122226-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"6c60166e-848b-44f9-9229-516b0cfdb79a","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3B5G3XHRAZ4VCSK3EKA5Q","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.815885-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"6c60166e-848b-44f9-9229-516b0cfdb79a","message":"Order processed successfully - ID: 01K5W3B5G3XHRAZ4VCSK3EKA5Q, Status: PROCESSED, Correlation ID: 24494f66-29fa-47b5-9351-4d0ae6a9b939","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8169337-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:54203]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5-2\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8210062-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8210062-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8210062-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758658401821","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8220063-03:00","level":"INFO","logger":"o.a.k.clients.consumer.KafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5-2, groupId=order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8265667-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5-2, groupId=order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5] Cluster ID: j2Fe3zXkQq2C_WE_lYg4YA","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8265667-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5-2, groupId=order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5] Discovered group coordinator localhost:54203 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.827095-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W3B5G3XHRAZ4VCSK3EKA5Q","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8281332-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5-2, groupId=order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.830222-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5-2, groupId=order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5] Request joining group due to: need to re-join with the given member-id: consumer-order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5-2-a37c26de-4fd6-431a-91ee-fb47f3621a10","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8307592-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5-2, groupId=order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8307592-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5-2, groupId=order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8312916-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5W3B5G3XHRAZ4VCSK3EKA5Q from event: Failed to process order [01K5W3B5G3XHRAZ4VCSK3EKA5Q]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5W3B5G3XHRAZ4VCSK3EKA5Q]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.834492-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5-2, groupId=order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5] Successfully joined group with generation Generation{generationId=1, memberId='consumer-order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5-2-a37c26de-4fd6-431a-91ee-fb47f3621a10', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8350268-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5-2, groupId=order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5] Finished assignment for group at generation 1: {consumer-order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5-2-a37c26de-4fd6-431a-91ee-fb47f3621a10=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8382749-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5-2, groupId=order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5] Successfully synced group in generation Generation{generationId=1, memberId='consumer-order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5-2-a37c26de-4fd6-431a-91ee-fb47f3621a10', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8382749-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5-2, groupId=order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8388018-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5-2, groupId=order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8398296-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5-2, groupId=order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8441149-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5-2, groupId=order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:54203 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8574775-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5-2, groupId=order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8580785-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5-2, groupId=order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5] Member consumer-order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5-2-a37c26de-4fd6-431a-91ee-fb47f3621a10 sending LeaveGroup request to coordinator localhost:54203 (id: 2147483646 rack: null) due to the consumer is being closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8580785-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5-2, groupId=order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:21.8580785-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5-2, groupId=order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.3073308-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.3073308-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.307926-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.3097672-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"App info kafka.consumer for consumer-order-events-test-group-19cfe5d6-0af3-4893-bda3-af7a656021b5-2 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.3193354-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventPublishingIT]: OrderEventPublishingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.3198799-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventPublishingIT","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.3606786-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"17f86995-3b11-4b3e-a7f2-0dd558ed96a8","message":"Processing new order request - Correlation ID: 3c2f827e-65b7-4bd3-8187-e1315ac6b9d9, Customer: customer-events, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.3684759-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"17f86995-3b11-4b3e-a7f2-0dd558ed96a8","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.3684759-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"17f86995-3b11-4b3e-a7f2-0dd558ed96a8","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.3690895-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"17f86995-3b11-4b3e-a7f2-0dd558ed96a8","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3B61RPHXJQE9H4JZ2NBWZ","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.3768152-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-8","correlationId":"17f86995-3b11-4b3e-a7f2-0dd558ed96a8","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.3768152-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-8","correlationId":"17f86995-3b11-4b3e-a7f2-0dd558ed96a8","message":"CD selecionado para item EVT123 pedido 01K5W3B61RPHXJQE9H4JZ2NBWZ -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.3792405-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"17f86995-3b11-4b3e-a7f2-0dd558ed96a8","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.379776-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"17f86995-3b11-4b3e-a7f2-0dd558ed96a8","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.379776-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"17f86995-3b11-4b3e-a7f2-0dd558ed96a8","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3B61RPHXJQE9H4JZ2NBWZ","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.3833801-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"17f86995-3b11-4b3e-a7f2-0dd558ed96a8","message":"Order processed successfully - ID: 01K5W3B61RPHXJQE9H4JZ2NBWZ, Status: PROCESSED, Correlation ID: 3c2f827e-65b7-4bd3-8187-e1315ac6b9d9","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.3882015-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderFlowIT]: OrderFlowIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.3888296-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderFlowIT","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.394638-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W3B61RPHXJQE9H4JZ2NBWZ","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.4000462-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5W3B61RPHXJQE9H4JZ2NBWZ from event: Failed to process order [01K5W3B61RPHXJQE9H4JZ2NBWZ]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5W3B61RPHXJQE9H4JZ2NBWZ]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.4214246-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-7","correlationId":"b5712429-3830-4721-a7ac-2f7955c75abb","message":"Processing new order request - Correlation ID: b5712429-3830-4721-a7ac-2f7955c75abb, Customer: customer-1, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.4280828-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"b5712429-3830-4721-a7ac-2f7955c75abb","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.4280828-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"b5712429-3830-4721-a7ac-2f7955c75abb","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.4286026-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"b5712429-3830-4721-a7ac-2f7955c75abb","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3B63PHQEF7PH7S0QWP1K2","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.4364639-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-7","correlationId":"b5712429-3830-4721-a7ac-2f7955c75abb","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.4364639-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-7","correlationId":"b5712429-3830-4721-a7ac-2f7955c75abb","message":"CD selecionado para item ABC123 pedido 01K5W3B63PHQEF7PH7S0QWP1K2 -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.4393214-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"b5712429-3830-4721-a7ac-2f7955c75abb","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.4393214-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"b5712429-3830-4721-a7ac-2f7955c75abb","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.4393214-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"b5712429-3830-4721-a7ac-2f7955c75abb","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3B63PHQEF7PH7S0QWP1K2","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.443402-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-7","correlationId":"b5712429-3830-4721-a7ac-2f7955c75abb","message":"Order processed successfully - ID: 01K5W3B63PHQEF7PH7S0QWP1K2, Status: PROCESSED, Correlation ID: b5712429-3830-4721-a7ac-2f7955c75abb","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.446892-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-4","correlationId":"2b457694-c28d-4c97-9053-8ec283d6ec7a","message":"Fetching order by ID: 01K5W3B63PHQEF7PH7S0QWP1K2 - Correlation ID: 37701a2b-074c-4302-a3a9-9eb8f9653e14","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.4516404-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-4","correlationId":"2b457694-c28d-4c97-9053-8ec283d6ec7a","message":"Order retrieved successfully - ID: 01K5W3B63PHQEF7PH7S0QWP1K2, Status: PROCESSED, Correlation ID: 37701a2b-074c-4302-a3a9-9eb8f9653e14","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.4550366-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W3B63PHQEF7PH7S0QWP1K2","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.459611-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5W3B63PHQEF7PH7S0QWP1K2 from event: Failed to process order [01K5W3B63PHQEF7PH7S0QWP1K2]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5W3B63PHQEF7PH7S0QWP1K2]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.6679611-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.6679611-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions revoked: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.6679611-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Member consumer-orders-service-it-consumer-1-e0c7e106-156f-4adc-ba6b-b246c67a08ab sending LeaveGroup request to coordinator localhost:54203 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.6689603-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.6689603-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.6689603-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Unsubscribed all topics or patterns and assigned partitions","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.6689603-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.6689603-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.9132339-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.9132339-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.9132339-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.914376-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"App info kafka.consumer for consumer-orders-service-it-consumer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.914376-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: Consumer stopped","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.9839246-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:22.9853306-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:23.0382947-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"SpringApplicationShutdownHook","message":"[Producer clientId=orders-service-producer-1] Closing the Kafka producer with timeoutMillis = 30000 ms.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:23.0395325-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:23.0395325-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:23.0395325-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:23.0395325-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"SpringApplicationShutdownHook","message":"App info kafka.producer for orders-service-producer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:23.0477179-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"SpringApplicationShutdownHook","message":"Closing JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:23.0488582-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown initiated...","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:23.0505397-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown completed.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:31.7886663-03:00","level":"INFO","logger":"o.h.validator.internal.util.Version","thread":"background-preinit","message":"HV000001: Hibernate Validator 8.0.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:31.8293104-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Starting DistributionCenterCachingIT using Java 21.0.8 with PID 24660 (started by ciror in Z:\\projects\\meli-test-mktplace)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:31.8293104-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"The following 1 profile is active: \"integration-test\"","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:32.4495847-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:32.4495847-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:32.5430422-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 87 ms. Found 1 JPA repository interface.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:32.9671989-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:32.9681984-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data Redis repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:32.9925159-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationExtensionSupport","thread":"main","message":"Spring Data Redis - Could not safely identify store assignment for repository candidate interface br.com.ml.mktplace.orders.adapter.outbound.persistence.repository.JpaOrderEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:32.9925159-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 15 ms. Found 0 Redis repository interfaces.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:33.9030349-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat initialized with port 0 (http)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:33.9113225-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Initializing ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:33.9133269-03:00","level":"INFO","logger":"o.a.catalina.core.StandardService","thread":"main","message":"Starting service [Tomcat]","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:33.9133269-03:00","level":"INFO","logger":"o.a.catalina.core.StandardEngine","thread":"main","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:33.9759279-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"main","message":"Initializing Spring embedded WebApplicationContext","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:33.9759279-03:00","level":"INFO","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","thread":"main","message":"Root WebApplicationContext: initialization completed in 2129 ms","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:34.3091508-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Starting...","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:34.5451014-03:00","level":"INFO","logger":"com.zaxxer.hikari.pool.HikariPool","thread":"main","message":"OrdersHikariPool - Added connection org.postgresql.jdbc.PgConnection@57fa1c3f","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:34.5474865-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Start completed.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:34.7143-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"Flyway Community Edition 9.22.3 by Redgate","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:34.7153001-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"See release notes here: https://rd.gt/416ObMi","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:34.7153001-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:34.7404375-03:00","level":"INFO","logger":"org.flywaydb.core.FlywayExecutor","thread":"main","message":"Database: jdbc:postgresql://localhost:54246/mktplace_orders (PostgreSQL 16.4)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:34.7521245-03:00","level":"WARN","logger":"o.f.c.i.database.base.Database","thread":"main","message":"Flyway upgrade recommended: PostgreSQL 16.4 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:34.7951742-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Schema history table \"public\".\"flyway_schema_history\" does not exist yet","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:34.8003569-03:00","level":"INFO","logger":"o.f.core.internal.command.DbValidate","thread":"main","message":"Successfully validated 2 migrations (execution time 00:00.033s)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:34.8200731-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Creating Schema History table \"public\".\"flyway_schema_history\" ...","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:34.8577136-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Current version of schema \"public\": << Empty Schema >>","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:34.8696915-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"1 - initial schema\"","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:34.8767264-03:00","level":"WARN","logger":"o.f.c.i.s.DefaultSqlScriptExecutor","thread":"main","message":"DB: extension \"postgis\" already exists, skipping (SQL State: 42710 - Error Code: 0)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:34.9216763-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"2 - sample distribution centers\"","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:34.9418491-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Successfully applied 2 migrations to schema \"public\", now at version v2 (execution time 00:00.041s)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:35.0060628-03:00","level":"INFO","logger":"o.h.jpa.internal.util.LogHelper","thread":"main","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:35.0639496-03:00","level":"INFO","logger":"org.hibernate.Version","thread":"main","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:35.0745523-03:00","level":"INFO","logger":"o.h.s.integration.SpatialService","thread":"main","message":"HHH80000001: hibernate-spatial integration enabled : true","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:35.0979813-03:00","level":"INFO","logger":"o.h.c.i.RegionFactoryInitiator","thread":"main","message":"HHH000026: Second-level cache disabled","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:35.204024-03:00","level":"WARN","logger":"org.hibernate.orm.deprecation","thread":"main","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:35.2223454-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:35.3953838-03:00","level":"INFO","logger":"o.s.o.j.p.SpringPersistenceUnitInfo","thread":"main","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:35.4147997-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:35.6851852-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000004: hibernate-spatial adding function contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:36.1347102-03:00","level":"INFO","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator","thread":"main","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:36.1533749-03:00","level":"INFO","logger":"o.hibernate.orm.connections.access","thread":"main","message":"HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@1d61546e] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:36.1737964-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"main","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:36.5696367-03:00","level":"INFO","logger":"o.s.d.j.r.query.QueryEnhancerFactory","thread":"main","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:37.6955156-03:00","level":"WARN","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration","thread":"main","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:38.584266-03:00","level":"INFO","logger":"o.s.b.a.e.web.EndpointLinksResolver","thread":"main","message":"Exposing 5 endpoint(s) beneath base path '/actuator'","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:38.6626425-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Starting ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:38.6805178-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat started on port 54258 (http) with context path '/api'","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:38.7151474-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:54249]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-orders-service-it-consumer-1\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = orders-service-it-consumer\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:38.8287375-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:38.8287375-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:38.8287375-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758658418827","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:38.831727-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:38.8457553-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Started DistributionCenterCachingIT in 7.511 seconds (process running for 15.124)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:39.2073906-03:00","level":"WARN","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error while fetching metadata with correlation id 2 : {orders.events=LEADER_NOT_AVAILABLE}","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:39.209455-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cluster ID: m-zleXfARbafPsVhQbKVQw","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:39.3222843-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Discovered group coordinator localhost:54249 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:39.3255191-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:39.3463899-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: need to re-join with the given member-id: consumer-orders-service-it-consumer-1-32d32c98-c666-487d-8b52-2458b33b62c0","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:39.3463899-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:39.3463899-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:39.3605126-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully joined group with generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-32d32c98-c666-487d-8b52-2458b33b62c0', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:39.3656302-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Finished assignment for group at generation 1: {consumer-orders-service-it-consumer-1-32d32c98-c666-487d-8b52-2458b33b62c0=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:39.4078974-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully synced group in generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-32d32c98-c666-487d-8b52-2458b33b62c0', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:39.4084363-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:39.4100263-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:39.4242632-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:39.4380234-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:54249 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:39.4385807-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions assigned: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:40.1282491-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"http-nio-auto-1-exec-1","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:40.1282491-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-1","message":"Initializing Servlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:40.1292473-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-1","message":"Completed initialization in 1 ms","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:40.2378434-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"d244538f-3f75-40a5-8578-cdca94b00b81","message":"Processing new order request - Correlation ID: ce3fc71e-e0d7-4495-86c0-f2d9bb758e21, Customer: customer-cache, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:40.6091236-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"d244538f-3f75-40a5-8578-cdca94b00b81","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:40.6101254-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"d244538f-3f75-40a5-8578-cdca94b00b81","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:40.6206575-03:00","level":"INFO","logger":"o.a.k.c.producer.ProducerConfig","thread":"http-nio-auto-1-exec-1","correlationId":"d244538f-3f75-40a5-8578-cdca94b00b81","message":"ProducerConfig values: \r\n\tacks = -1\r\n\tauto.include.jmx.reporter = true\r\n\tbatch.size = 16384\r\n\tbootstrap.servers = [PLAINTEXT://localhost:54249]\r\n\tbuffer.memory = 33554432\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = orders-service-producer-1\r\n\tcompression.type = snappy\r\n\tconnections.max.idle.ms = 540000\r\n\tdelivery.timeout.ms = 120000\r\n\tenable.idempotence = true\r\n\tinterceptor.classes = []\r\n\tkey.serializer = class org.apache.kafka.common.serialization.StringSerializer\r\n\tlinger.ms = 10\r\n\tmax.block.ms = 60000\r\n\tmax.in.flight.requests.per.connection = 5\r\n\tmax.request.size = 1048576\r\n\tmetadata.max.age.ms = 300000\r\n\tmetadata.max.idle.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartitioner.adaptive.partitioning.enable = true\r\n\tpartitioner.availability.timeout.ms = 0\r\n\tpartitioner.class = null\r\n\tpartitioner.ignore.keys = false\r\n\treceive.buffer.bytes = 32768\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretries = 3\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\ttransaction.timeout.ms = 60000\r\n\ttransactional.id = null\r\n\tvalue.serializer = class org.springframework.kafka.support.serializer.JsonSerializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:40.6308022-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"http-nio-auto-1-exec-1","correlationId":"d244538f-3f75-40a5-8578-cdca94b00b81","message":"[Producer clientId=orders-service-producer-1] Instantiated an idempotent producer.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:40.6434043-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"d244538f-3f75-40a5-8578-cdca94b00b81","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:40.6444036-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"d244538f-3f75-40a5-8578-cdca94b00b81","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:40.6444036-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"d244538f-3f75-40a5-8578-cdca94b00b81","message":"Kafka startTimeMs: 1758658420643","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:40.651841-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cluster ID: m-zleXfARbafPsVhQbKVQw","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:40.6669072-03:00","level":"INFO","logger":"o.a.k.c.p.i.TransactionManager","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] ProducerId set to 0 with epoch 0","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:40.8361969-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"d244538f-3f75-40a5-8578-cdca94b00b81","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3BQGR9CDGAS6JHFYMS60A","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:40.8847181-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W3BQGR9CDGAS6JHFYMS60A","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.1636533-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.1636533-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-1","correlationId":"d244538f-3f75-40a5-8578-cdca94b00b81","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.1641883-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item CACHE1 pedido 01K5W3BQGR9CDGAS6JHFYMS60A -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.1641883-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-1","correlationId":"d244538f-3f75-40a5-8578-cdca94b00b81","message":"CD selecionado para item CACHE1 pedido 01K5W3BQGR9CDGAS6JHFYMS60A -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.1665712-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.1671579-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"d244538f-3f75-40a5-8578-cdca94b00b81","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.1671579-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.1671579-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"d244538f-3f75-40a5-8578-cdca94b00b81","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.1677247-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"d244538f-3f75-40a5-8578-cdca94b00b81","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3BQGR9CDGAS6JHFYMS60A","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.1677247-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3BQGR9CDGAS6JHFYMS60A","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.186305-03:00","level":"INFO","logger":"org.hibernate.orm.jdbc.batch","thread":"http-nio-auto-1-exec-1","correlationId":"d244538f-3f75-40a5-8578-cdca94b00b81","message":"HHH100503: On release of batch it still contained JDBC statements","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.186305-03:00","level":"ERROR","logger":"org.hibernate.orm.jdbc.batch","thread":"http-nio-auto-1-exec-1","correlationId":"d244538f-3f75-40a5-8578-cdca94b00b81","message":"HHH100501: Exception executing batch [org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?], SQL: delete from order_items where id=?","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.1924795-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"d244538f-3f75-40a5-8578-cdca94b00b81","message":"Failed to process order - Correlation ID: ce3fc71e-e0d7-4495-86c0-f2d9bb758e21","exception":"org.springframework.orm.ObjectOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:328)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:565)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:669)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:419)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:67)\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:54)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.checkRowCounts(BatchImpl.java:314)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:278)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.PreparedStatementGroupSingleTable.forEachStatement(PreparedStatementGroupSingleTable.java:59)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.performExecution(BatchImpl.java:260)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.execute(BatchImpl.java:239)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.executeBatch(JdbcCoordinatorImpl.java:188)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:659)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1415)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:496)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2325)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1988)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:561)\r\n\t... 65 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.1975618-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.r.h.GlobalExceptionHandler","thread":"http-nio-auto-1-exec-1","correlationId":"d244538f-3f75-40a5-8578-cdca94b00b81","message":"Unexpected error - Correlation ID: 8506cadd-38dc-405b-9dd2-c5bb83d6060f, Message: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?","exception":"org.springframework.orm.ObjectOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:328)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:565)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:669)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:419)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.rest.controller.OrderController.processOrder(OrderController.java:96)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.filter.CorrelationIdFilter.doFilter(CorrelationIdFilter.java:41)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from order_items where id=?\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:67)\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:54)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.checkRowCounts(BatchImpl.java:314)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:278)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.PreparedStatementGroupSingleTable.forEachStatement(PreparedStatementGroupSingleTable.java:59)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.performExecution(BatchImpl.java:260)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.execute(BatchImpl.java:239)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.executeBatch(JdbcCoordinatorImpl.java:188)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:659)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1415)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:496)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2325)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1988)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:561)\r\n\t... 65 common frames omitted\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.2965264-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT]: OrderEndToEndProcessingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.3164091-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.3569182-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-3","correlationId":"c74c0c31-78a7-43db-8c47-f416548399da","message":"Processing new order request - Correlation ID: c74c0c31-78a7-43db-8c47-f416548399da, Customer: customer-async-proc, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.3636163-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"c74c0c31-78a7-43db-8c47-f416548399da","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.3636163-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"c74c0c31-78a7-43db-8c47-f416548399da","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.3642355-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"c74c0c31-78a7-43db-8c47-f416548399da","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3BRKDK53QYSVZE79JEA0D","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.378912-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-3","correlationId":"c74c0c31-78a7-43db-8c47-f416548399da","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.3795617-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-3","correlationId":"c74c0c31-78a7-43db-8c47-f416548399da","message":"CD selecionado para item ASYNC-PROC-1 pedido 01K5W3BRKDK53QYSVZE79JEA0D -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.3829374-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"c74c0c31-78a7-43db-8c47-f416548399da","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.3829374-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"c74c0c31-78a7-43db-8c47-f416548399da","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.3829374-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"c74c0c31-78a7-43db-8c47-f416548399da","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3BRKDK53QYSVZE79JEA0D","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.3868505-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W3BRKDK53QYSVZE79JEA0D","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.3874466-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-3","correlationId":"c74c0c31-78a7-43db-8c47-f416548399da","message":"Order processed successfully - ID: 01K5W3BRKDK53QYSVZE79JEA0D, Status: PROCESSED, Correlation ID: c74c0c31-78a7-43db-8c47-f416548399da","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.3923331-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5W3BRKDK53QYSVZE79JEA0D from event: Failed to process order [01K5W3BRKDK53QYSVZE79JEA0D]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5W3BRKDK53QYSVZE79JEA0D]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.3971738-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"8f13f216-edbc-410e-bdc4-72abba488f3b","message":"Fetching order by ID: 01K5W3BRKDK53QYSVZE79JEA0D - Correlation ID: e7cad678-b082-45dc-817d-d4ea6a6b481f","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.4032076-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"8f13f216-edbc-410e-bdc4-72abba488f3b","message":"Order retrieved successfully - ID: 01K5W3BRKDK53QYSVZE79JEA0D, Status: PROCESSED, Correlation ID: e7cad678-b082-45dc-817d-d4ea6a6b481f","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.4093476-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT]: OrderEventConsumptionIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.4109516-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.4456074-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"70f6383c-994c-4b63-9066-bdb612486e5e","message":"Processing new order request - Correlation ID: f0e6e4bf-22ca-4305-8451-a68ef26466c9, Customer: customer-event-consumer, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.4517203-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"70f6383c-994c-4b63-9066-bdb612486e5e","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.452269-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"70f6383c-994c-4b63-9066-bdb612486e5e","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.452269-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"70f6383c-994c-4b63-9066-bdb612486e5e","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3BRP6Q5M7JDC57T85RJZ9","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.4609223-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-8","correlationId":"70f6383c-994c-4b63-9066-bdb612486e5e","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.4609223-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-8","correlationId":"70f6383c-994c-4b63-9066-bdb612486e5e","message":"CD selecionado para item EVT-CONSUME-1 pedido 01K5W3BRP6Q5M7JDC57T85RJZ9 -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.4636601-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"70f6383c-994c-4b63-9066-bdb612486e5e","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.4641987-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"70f6383c-994c-4b63-9066-bdb612486e5e","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.4641987-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-8","correlationId":"70f6383c-994c-4b63-9066-bdb612486e5e","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3BRP6Q5M7JDC57T85RJZ9","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.46773-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"70f6383c-994c-4b63-9066-bdb612486e5e","message":"Order processed successfully - ID: 01K5W3BRP6Q5M7JDC57T85RJZ9, Status: PROCESSED, Correlation ID: f0e6e4bf-22ca-4305-8451-a68ef26466c9","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.4701341-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:54249]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5-2\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.4733016-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.4738312-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.4738312-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758658421473","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.4743579-03:00","level":"INFO","logger":"o.a.k.clients.consumer.KafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5-2, groupId=order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.4793328-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W3BRP6Q5M7JDC57T85RJZ9","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.4801005-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5-2, groupId=order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5] Cluster ID: m-zleXfARbafPsVhQbKVQw","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.480613-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5-2, groupId=order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5] Discovered group coordinator localhost:54249 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.4817086-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5-2, groupId=order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.484364-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5W3BRP6Q5M7JDC57T85RJZ9 from event: Failed to process order [01K5W3BRP6Q5M7JDC57T85RJZ9]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5W3BRP6Q5M7JDC57T85RJZ9]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.4849078-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5-2, groupId=order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5] Request joining group due to: need to re-join with the given member-id: consumer-order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5-2-e488f6b9-b3f7-448c-a6cf-67310832037b","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.4849078-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5-2, groupId=order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.4854503-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5-2, groupId=order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.4892899-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5-2, groupId=order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5] Successfully joined group with generation Generation{generationId=1, memberId='consumer-order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5-2-e488f6b9-b3f7-448c-a6cf-67310832037b', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.489842-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5-2, groupId=order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5] Finished assignment for group at generation 1: {consumer-order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5-2-e488f6b9-b3f7-448c-a6cf-67310832037b=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.4931718-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5-2, groupId=order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5] Successfully synced group in generation Generation{generationId=1, memberId='consumer-order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5-2-e488f6b9-b3f7-448c-a6cf-67310832037b', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.4931718-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5-2, groupId=order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.4931718-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5-2, groupId=order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.4952767-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5-2, groupId=order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.5000464-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5-2, groupId=order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:54249 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.512481-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5-2, groupId=order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.5130245-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5-2, groupId=order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5] Member consumer-order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5-2-e488f6b9-b3f7-448c-a6cf-67310832037b sending LeaveGroup request to coordinator localhost:54249 (id: 2147483646 rack: null) due to the consumer is being closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.5135702-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5-2, groupId=order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.5135702-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5-2, groupId=order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.9627753-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.9634206-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.9634206-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.9652716-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"App info kafka.consumer for consumer-order-events-test-group-7f565a65-f59b-4a81-a432-34af1eccd8b5-2 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.9743395-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventPublishingIT]: OrderEventPublishingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:41.9750023-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventPublishingIT","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.0175667-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"62cdd605-5007-44a0-b050-fef8c1fc1bc8","message":"Processing new order request - Correlation ID: 8faf2a6c-4313-41e9-9846-33acb67da5d7, Customer: customer-events, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.0250433-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"62cdd605-5007-44a0-b050-fef8c1fc1bc8","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.0250433-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"62cdd605-5007-44a0-b050-fef8c1fc1bc8","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.0255875-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"62cdd605-5007-44a0-b050-fef8c1fc1bc8","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3BS81WFZAC98CP6K06W8E","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.0341038-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-6","correlationId":"62cdd605-5007-44a0-b050-fef8c1fc1bc8","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.0341038-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-6","correlationId":"62cdd605-5007-44a0-b050-fef8c1fc1bc8","message":"CD selecionado para item EVT123 pedido 01K5W3BS81WFZAC98CP6K06W8E -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.0366991-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"62cdd605-5007-44a0-b050-fef8c1fc1bc8","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.0366991-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"62cdd605-5007-44a0-b050-fef8c1fc1bc8","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.0372217-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"62cdd605-5007-44a0-b050-fef8c1fc1bc8","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3BS81WFZAC98CP6K06W8E","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.0404314-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"62cdd605-5007-44a0-b050-fef8c1fc1bc8","message":"Order processed successfully - ID: 01K5W3BS81WFZAC98CP6K06W8E, Status: PROCESSED, Correlation ID: 8faf2a6c-4313-41e9-9846-33acb67da5d7","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.0453235-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderFlowIT]: OrderFlowIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.0463593-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderFlowIT","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.0506742-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W3BS81WFZAC98CP6K06W8E","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.0564622-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5W3BS81WFZAC98CP6K06W8E from event: Failed to process order [01K5W3BS81WFZAC98CP6K06W8E]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5W3BS81WFZAC98CP6K06W8E]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.0782268-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-7","correlationId":"1ed96025-b498-4830-8ae8-ba4e4be2f739","message":"Processing new order request - Correlation ID: 1ed96025-b498-4830-8ae8-ba4e4be2f739, Customer: customer-1, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.0843916-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"1ed96025-b498-4830-8ae8-ba4e4be2f739","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.0843916-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"1ed96025-b498-4830-8ae8-ba4e4be2f739","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.0849284-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"1ed96025-b498-4830-8ae8-ba4e4be2f739","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3BS9Y3RMYGZ7AC31TWAV0","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.0920693-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"http-nio-auto-1-exec-7","correlationId":"1ed96025-b498-4830-8ae8-ba4e4be2f739","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.0920693-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"http-nio-auto-1-exec-7","correlationId":"1ed96025-b498-4830-8ae8-ba4e4be2f739","message":"CD selecionado para item ABC123 pedido 01K5W3BS9Y3RMYGZ7AC31TWAV0 -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.0947012-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"1ed96025-b498-4830-8ae8-ba4e4be2f739","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.0947012-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"1ed96025-b498-4830-8ae8-ba4e4be2f739","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.0953086-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"1ed96025-b498-4830-8ae8-ba4e4be2f739","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3BS9Y3RMYGZ7AC31TWAV0","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.0990448-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-7","correlationId":"1ed96025-b498-4830-8ae8-ba4e4be2f739","message":"Order processed successfully - ID: 01K5W3BS9Y3RMYGZ7AC31TWAV0, Status: PROCESSED, Correlation ID: 1ed96025-b498-4830-8ae8-ba4e4be2f739","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.1018742-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-4","correlationId":"8c6ece51-b192-4e28-a87a-f069ce61a6a1","message":"Fetching order by ID: 01K5W3BS9Y3RMYGZ7AC31TWAV0 - Correlation ID: d1f4a34a-a3a7-48c2-9ba6-ed244c1b066a","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.1063007-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-4","correlationId":"8c6ece51-b192-4e28-a87a-f069ce61a6a1","message":"Order retrieved successfully - ID: 01K5W3BS9Y3RMYGZ7AC31TWAV0, Status: PROCESSED, Correlation ID: d1f4a34a-a3a7-48c2-9ba6-ed244c1b066a","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.1111352-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W3BS9Y3RMYGZ7AC31TWAV0","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.1163989-03:00","level":"ERROR","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Failed to process order 01K5W3BS9Y3RMYGZ7AC31TWAV0 from event: Failed to process order [01K5W3BS9Y3RMYGZ7AC31TWAV0]: Order is already in final state: PROCESSED","exception":"br.com.ml.mktplace.orders.domain.port.ProcessOrderUseCase$ProcessOrderException: Failed to process order [01K5W3BS9Y3RMYGZ7AC31TWAV0]: Order is already in final state: PROCESSED\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl.processOrder(ProcessOrderUseCaseImpl.java:59)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat br.com.ml.mktplace.orders.domain.service.ProcessOrderUseCaseImpl$$SpringCGLIB$$0.processOrder(<generated>)\r\n\tat br.com.ml.mktplace.orders.adapter.inbound.messaging.OrderEventsListener.onOrderEvent(OrderEventsListener.java:40)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)\r\n\tat org.springframework.kafka.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:56)\r\n\tat org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:375)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:92)\r\n\tat org.springframework.kafka.listener.adapter.RecordMessagingMessageListenerAdapter.onMessage(RecordMessagingMessageListenerAdapter.java:53)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:2857)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeOnMessage(KafkaMessageListenerContainer.java:2835)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.lambda$doInvokeRecordListener$56(KafkaMessageListenerContainer.java:2753)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:565)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:2751)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeWithRecords(KafkaMessageListenerContainer.java:2604)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:2490)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:2132)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeIfHaveRecords(KafkaMessageListenerContainer.java:1487)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1451)\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:1322)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.1831861-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.1831861-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 2147483646 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.3343483-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.3343483-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.3353483-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cancelled in-flight METADATA request with correlation id 11 due to node 1 being disconnected (elapsed time since creation: 0ms, elapsed time since send: 0ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.3353483-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight FETCH request with correlation id 23 due to node 1 being disconnected (elapsed time since creation: 224ms, elapsed time since send: 224ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.3353483-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight METADATA request with correlation id 24 due to node 1 being disconnected (elapsed time since creation: 183ms, elapsed time since send: 183ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.3358518-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.3363602-03:00","level":"INFO","logger":"o.a.k.clients.FetchSessionHandler","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error sending fetch request (sessionId=881734054, epoch=11) to node 1:","exception":"org.apache.kafka.common.errors.DisconnectException: null\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.3373253-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.3380053-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions revoked: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.3380053-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Member consumer-orders-service-it-consumer-1-32d32c98-c666-487d-8b52-2458b33b62c0 sending LeaveGroup request to coordinator localhost:54249 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.3386302-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.3386302-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.3386302-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Unsubscribed all topics or patterns and assigned partitions","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.3392417-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.3392417-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.3398629-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 2147483646 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.3398629-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight API_VERSIONS request with correlation id 26 due to node 2147483646 being disconnected (elapsed time since creation: 1ms, elapsed time since send: 1ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.3398629-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Group coordinator localhost:54249 (id: 2147483646 rack: null) is unavailable or invalid due to cause: null. isDisconnected: true. Rediscovery will be attempted.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.3398629-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.3398629-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.3398629-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.3410576-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"App info kafka.consumer for consumer-orders-service-it-consumer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.3410576-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: Consumer stopped","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.4369582-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.4369582-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cancelled in-flight API_VERSIONS request with correlation id 12 due to node 1 being disconnected (elapsed time since creation: 1ms, elapsed time since send: 1ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.4636477-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"SpringApplicationShutdownHook","message":"[Producer clientId=orders-service-producer-1] Closing the Kafka producer with timeoutMillis = 30000 ms.","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.464648-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.464648-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.464648-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.464648-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"SpringApplicationShutdownHook","message":"App info kafka.producer for orders-service-producer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.4716722-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"SpringApplicationShutdownHook","message":"Closing JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.4726912-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown initiated...","service":"orders-service"}
{"timestamp":"2025-09-23T17:13:42.473683-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown completed.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:24.2945008-03:00","level":"INFO","logger":"o.h.validator.internal.util.Version","thread":"background-preinit","message":"HV000001: Hibernate Validator 8.0.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:24.3373129-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Starting DistributionCenterCachingIT using Java 21.0.8 with PID 24376 (started by ciror in Z:\\projects\\meli-test-mktplace)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:24.3383121-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"The following 1 profile is active: \"integration-test\"","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:24.9423065-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:24.9433102-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:25.0362584-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 87 ms. Found 1 JPA repository interface.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:25.5058211-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:25.5068218-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data Redis repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:25.5393094-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationExtensionSupport","thread":"main","message":"Spring Data Redis - Could not safely identify store assignment for repository candidate interface br.com.ml.mktplace.orders.adapter.outbound.persistence.repository.JpaOrderEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:25.5403106-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 17 ms. Found 0 Redis repository interfaces.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:26.5414299-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat initialized with port 0 (http)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:26.55105-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Initializing ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:26.5530494-03:00","level":"INFO","logger":"o.a.catalina.core.StandardService","thread":"main","message":"Starting service [Tomcat]","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:26.5540489-03:00","level":"INFO","logger":"o.a.catalina.core.StandardEngine","thread":"main","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:26.6133383-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"main","message":"Initializing Spring embedded WebApplicationContext","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:26.6143386-03:00","level":"INFO","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","thread":"main","message":"Root WebApplicationContext: initialization completed in 2258 ms","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:26.9633081-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Starting...","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:27.1384114-03:00","level":"INFO","logger":"com.zaxxer.hikari.pool.HikariPool","thread":"main","message":"OrdersHikariPool - Added connection org.postgresql.jdbc.PgConnection@1dbe76aa","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:27.1414157-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Start completed.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:27.2876648-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"Flyway Community Edition 9.22.3 by Redgate","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:27.2876648-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"See release notes here: https://rd.gt/416ObMi","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:27.2876648-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:27.321024-03:00","level":"INFO","logger":"org.flywaydb.core.FlywayExecutor","thread":"main","message":"Database: jdbc:postgresql://localhost:54389/mktplace_orders (PostgreSQL 16.4)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:27.3345137-03:00","level":"WARN","logger":"o.f.c.i.database.base.Database","thread":"main","message":"Flyway upgrade recommended: PostgreSQL 16.4 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:27.3781994-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Schema history table \"public\".\"flyway_schema_history\" does not exist yet","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:27.3832735-03:00","level":"INFO","logger":"o.f.core.internal.command.DbValidate","thread":"main","message":"Successfully validated 2 migrations (execution time 00:00.032s)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:27.4008254-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Creating Schema History table \"public\".\"flyway_schema_history\" ...","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:27.4390342-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Current version of schema \"public\": << Empty Schema >>","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:27.4527267-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"1 - initial schema\"","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:27.4602637-03:00","level":"WARN","logger":"o.f.c.i.s.DefaultSqlScriptExecutor","thread":"main","message":"DB: extension \"postgis\" already exists, skipping (SQL State: 42710 - Error Code: 0)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:27.5075378-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"2 - sample distribution centers\"","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:27.529936-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Successfully applied 2 migrations to schema \"public\", now at version v2 (execution time 00:00.041s)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:27.5950822-03:00","level":"INFO","logger":"o.h.jpa.internal.util.LogHelper","thread":"main","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:27.6420144-03:00","level":"INFO","logger":"org.hibernate.Version","thread":"main","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:27.6510189-03:00","level":"INFO","logger":"o.h.s.integration.SpatialService","thread":"main","message":"HHH80000001: hibernate-spatial integration enabled : true","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:27.6766971-03:00","level":"INFO","logger":"o.h.c.i.RegionFactoryInitiator","thread":"main","message":"HHH000026: Second-level cache disabled","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:27.7726568-03:00","level":"WARN","logger":"org.hibernate.orm.deprecation","thread":"main","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:27.7935515-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:27.9601818-03:00","level":"INFO","logger":"o.s.o.j.p.SpringPersistenceUnitInfo","thread":"main","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:27.9806107-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:28.2790411-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000004: hibernate-spatial adding function contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:28.7892222-03:00","level":"INFO","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator","thread":"main","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:28.8055132-03:00","level":"INFO","logger":"o.hibernate.orm.connections.access","thread":"main","message":"HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@66ba0395] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:28.8284665-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"main","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:29.2319216-03:00","level":"INFO","logger":"o.s.d.j.r.query.QueryEnhancerFactory","thread":"main","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:30.3636566-03:00","level":"WARN","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration","thread":"main","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:31.3597977-03:00","level":"INFO","logger":"o.s.b.a.e.web.EndpointLinksResolver","thread":"main","message":"Exposing 5 endpoint(s) beneath base path '/actuator'","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:31.4377704-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Starting ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:31.4502824-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat started on port 54403 (http) with context path '/api'","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:31.4959921-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:54393]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-orders-service-it-consumer-1\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = orders-service-it-consumer\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:31.6196399-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:31.6206395-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:31.6206395-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758658711618","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:31.6226522-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:31.6382259-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Started DistributionCenterCachingIT in 7.862 seconds (process running for 15.48)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:31.9771183-03:00","level":"WARN","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error while fetching metadata with correlation id 2 : {orders.events=LEADER_NOT_AVAILABLE}","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:31.9786807-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cluster ID: kqqm4JTUQGmYyKiz0tJVlQ","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:32.0935503-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Discovered group coordinator localhost:54393 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:32.0968048-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:32.1141711-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: need to re-join with the given member-id: consumer-orders-service-it-consumer-1-1e370b21-ce4b-4c2a-a9a4-8603bbe08dd3","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:32.1147748-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:32.1147748-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:32.1287045-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully joined group with generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-1e370b21-ce4b-4c2a-a9a4-8603bbe08dd3', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:32.1322648-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Finished assignment for group at generation 1: {consumer-orders-service-it-consumer-1-1e370b21-ce4b-4c2a-a9a4-8603bbe08dd3=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:32.1652781-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully synced group in generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-1e370b21-ce4b-4c2a-a9a4-8603bbe08dd3', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:32.1658846-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:32.1668909-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:32.1766516-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:32.1861635-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:54393 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:32.18679-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions assigned: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:32.8873825-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"http-nio-auto-1-exec-1","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:32.8880491-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-1","message":"Initializing Servlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:32.8880491-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-1","message":"Completed initialization in 0 ms","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:33.002696-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"0ca34e75-a56f-435b-a7bf-63becbc5b2c3","message":"Processing new order request - Correlation ID: 424a8e10-ff96-4e82-85dd-90e1d3846385, Customer: customer-cache, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:33.3858423-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"0ca34e75-a56f-435b-a7bf-63becbc5b2c3","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:33.3858423-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"0ca34e75-a56f-435b-a7bf-63becbc5b2c3","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:33.3994039-03:00","level":"INFO","logger":"o.a.k.c.producer.ProducerConfig","thread":"http-nio-auto-1-exec-1","correlationId":"0ca34e75-a56f-435b-a7bf-63becbc5b2c3","message":"ProducerConfig values: \r\n\tacks = -1\r\n\tauto.include.jmx.reporter = true\r\n\tbatch.size = 16384\r\n\tbootstrap.servers = [PLAINTEXT://localhost:54393]\r\n\tbuffer.memory = 33554432\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = orders-service-producer-1\r\n\tcompression.type = snappy\r\n\tconnections.max.idle.ms = 540000\r\n\tdelivery.timeout.ms = 120000\r\n\tenable.idempotence = true\r\n\tinterceptor.classes = []\r\n\tkey.serializer = class org.apache.kafka.common.serialization.StringSerializer\r\n\tlinger.ms = 10\r\n\tmax.block.ms = 60000\r\n\tmax.in.flight.requests.per.connection = 5\r\n\tmax.request.size = 1048576\r\n\tmetadata.max.age.ms = 300000\r\n\tmetadata.max.idle.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartitioner.adaptive.partitioning.enable = true\r\n\tpartitioner.availability.timeout.ms = 0\r\n\tpartitioner.class = null\r\n\tpartitioner.ignore.keys = false\r\n\treceive.buffer.bytes = 32768\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretries = 3\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\ttransaction.timeout.ms = 60000\r\n\ttransactional.id = null\r\n\tvalue.serializer = class org.springframework.kafka.support.serializer.JsonSerializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:33.4085135-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"http-nio-auto-1-exec-1","correlationId":"0ca34e75-a56f-435b-a7bf-63becbc5b2c3","message":"[Producer clientId=orders-service-producer-1] Instantiated an idempotent producer.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:33.4235016-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"0ca34e75-a56f-435b-a7bf-63becbc5b2c3","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:33.4245015-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"0ca34e75-a56f-435b-a7bf-63becbc5b2c3","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:33.4245015-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"0ca34e75-a56f-435b-a7bf-63becbc5b2c3","message":"Kafka startTimeMs: 1758658713423","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:33.4313142-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cluster ID: kqqm4JTUQGmYyKiz0tJVlQ","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:33.448849-03:00","level":"INFO","logger":"o.a.k.c.p.i.TransactionManager","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] ProducerId set to 0 with epoch 0","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:33.6091218-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"0ca34e75-a56f-435b-a7bf-63becbc5b2c3","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3MNDTY6DSE8SVAQ05BA9Y","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:33.6353148-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"0ca34e75-a56f-435b-a7bf-63becbc5b2c3","message":"Order accepted for async processing - ID: 01K5W3MNDTY6DSE8SVAQ05BA9Y, Current Status: RECEIVED, Correlation ID: 424a8e10-ff96-4e82-85dd-90e1d3846385","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:33.663442-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W3MNDTY6DSE8SVAQ05BA9Y","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:33.6983507-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"2eff1ea8-92ff-4130-86b2-23217da2c482","message":"Fetching order by ID: 01K5W3MNDTY6DSE8SVAQ05BA9Y - Correlation ID: 5a0ebc76-728d-4a92-bd65-d56e96054f55","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:33.7108998-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"2eff1ea8-92ff-4130-86b2-23217da2c482","message":"Order retrieved successfully - ID: 01K5W3MNDTY6DSE8SVAQ05BA9Y, Status: RECEIVED, Correlation ID: 5a0ebc76-728d-4a92-bd65-d56e96054f55","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:33.9283044-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-3","correlationId":"722e8650-6004-40f3-bca1-b831007f07ba","message":"Fetching order by ID: 01K5W3MNDTY6DSE8SVAQ05BA9Y - Correlation ID: 1cbb8c3a-7d22-4e8b-a11e-e56226df6714","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:33.9345569-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-3","correlationId":"722e8650-6004-40f3-bca1-b831007f07ba","message":"Order retrieved successfully - ID: 01K5W3MNDTY6DSE8SVAQ05BA9Y, Status: RECEIVED, Correlation ID: 1cbb8c3a-7d22-4e8b-a11e-e56226df6714","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:33.970901-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:33.9714669-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item CACHE1 pedido 01K5W3MNDTY6DSE8SVAQ05BA9Y -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:33.9743619-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:33.9743619-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:33.9743619-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3MNDTY6DSE8SVAQ05BA9Y","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.1476799-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-4","correlationId":"e08e359f-9022-49bc-8b1a-da8a677a2c43","message":"Fetching order by ID: 01K5W3MNDTY6DSE8SVAQ05BA9Y - Correlation ID: 12355188-3329-47b3-9923-4246ae4b75e7","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.1541606-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-4","correlationId":"e08e359f-9022-49bc-8b1a-da8a677a2c43","message":"Order retrieved successfully - ID: 01K5W3MNDTY6DSE8SVAQ05BA9Y, Status: PROCESSED, Correlation ID: 12355188-3329-47b3-9923-4246ae4b75e7","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.1629312-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"811025bd-dc5a-4a24-8578-396a7fc91399","message":"Processing new order request - Correlation ID: f443000e-f6d0-4c44-9ef8-179cd4d9ba9e, Customer: customer-cache, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.1688756-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"811025bd-dc5a-4a24-8578-396a7fc91399","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.1688756-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"811025bd-dc5a-4a24-8578-396a7fc91399","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.1688756-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"811025bd-dc5a-4a24-8578-396a7fc91399","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3MPHKEZ5CKRQM6F3AF3FP","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.1719028-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"811025bd-dc5a-4a24-8578-396a7fc91399","message":"Order accepted for async processing - ID: 01K5W3MPHKEZ5CKRQM6F3AF3FP, Current Status: RECEIVED, Correlation ID: f443000e-f6d0-4c44-9ef8-179cd4d9ba9e","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.1917703-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT]: OrderEndToEndProcessingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.1942797-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.1973674-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W3MPHKEZ5CKRQM6F3AF3FP","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.2138461-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.2138461-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item CACHE1 pedido 01K5W3MPHKEZ5CKRQM6F3AF3FP -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.2170272-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.2170272-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.217559-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3MPHKEZ5CKRQM6F3AF3FP","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.2402588-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"2f945024-f5b9-4f0f-80d7-e5b8ded677e6","message":"Processing new order request - Correlation ID: 2f945024-f5b9-4f0f-80d7-e5b8ded677e6, Customer: customer-async-proc, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.2464402-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"2f945024-f5b9-4f0f-80d7-e5b8ded677e6","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.2464402-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"2f945024-f5b9-4f0f-80d7-e5b8ded677e6","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.2464402-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"2f945024-f5b9-4f0f-80d7-e5b8ded677e6","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3MPM0A49K922094ABRCCD","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.249302-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"2f945024-f5b9-4f0f-80d7-e5b8ded677e6","message":"Order accepted for async processing - ID: 01K5W3MPM0A49K922094ABRCCD, Current Status: RECEIVED, Correlation ID: 2f945024-f5b9-4f0f-80d7-e5b8ded677e6","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.2528131-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-7","correlationId":"6f232e16-fa2d-4ba9-9737-e10e17a98419","message":"Fetching order by ID: 01K5W3MPM0A49K922094ABRCCD - Correlation ID: 9d2f8568-672d-48b1-9d50-d5a429b39790","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.2581338-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-7","correlationId":"6f232e16-fa2d-4ba9-9737-e10e17a98419","message":"Order retrieved successfully - ID: 01K5W3MPM0A49K922094ABRCCD, Status: RECEIVED, Correlation ID: 9d2f8568-672d-48b1-9d50-d5a429b39790","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.2719583-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W3MPM0A49K922094ABRCCD","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.2810989-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.2810989-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item ASYNC-PROC-1 pedido 01K5W3MPM0A49K922094ABRCCD -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.2836087-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.2841659-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.2841659-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3MPM0A49K922094ABRCCD","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.7614923-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"e80677b1-2e99-408c-802e-d4cf54ec6450","message":"Fetching order by ID: 01K5W3MPM0A49K922094ABRCCD - Correlation ID: 1a31bbda-e7f9-48a7-90d5-05e6cb988a97","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.7674361-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"e80677b1-2e99-408c-802e-d4cf54ec6450","message":"Order retrieved successfully - ID: 01K5W3MPM0A49K922094ABRCCD, Status: PROCESSED, Correlation ID: 1a31bbda-e7f9-48a7-90d5-05e6cb988a97","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.7730522-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT]: OrderEventConsumptionIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.7742669-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8067745-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-10","correlationId":"1525ceaf-b5eb-4639-b2fa-39749ebc64dd","message":"Processing new order request - Correlation ID: 792eda3c-b1a4-4688-8624-c4ad1aa34db5, Customer: customer-event-consumer, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8142006-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-10","correlationId":"1525ceaf-b5eb-4639-b2fa-39749ebc64dd","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8147259-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-10","correlationId":"1525ceaf-b5eb-4639-b2fa-39749ebc64dd","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8147259-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-10","correlationId":"1525ceaf-b5eb-4639-b2fa-39749ebc64dd","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3MQ5QKWMQC7YFD6AKA016","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8173469-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-10","correlationId":"1525ceaf-b5eb-4639-b2fa-39749ebc64dd","message":"Order accepted for async processing - ID: 01K5W3MQ5QKWMQC7YFD6AKA016, Current Status: RECEIVED, Correlation ID: 792eda3c-b1a4-4688-8624-c4ad1aa34db5","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8189372-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:54393]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512-2\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8221571-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8226855-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8226855-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758658714822","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8232056-03:00","level":"INFO","logger":"o.a.k.clients.consumer.KafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512-2, groupId=order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8279304-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512-2, groupId=order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512] Cluster ID: kqqm4JTUQGmYyKiz0tJVlQ","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8287065-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512-2, groupId=order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512] Discovered group coordinator localhost:54393 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8297745-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512-2, groupId=order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.83348-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512-2, groupId=order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512] Request joining group due to: need to re-join with the given member-id: consumer-order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512-2-c6ba2d99-f436-4cda-b9d0-38efa35e6c3a","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.83348-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512-2, groupId=order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.83348-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512-2, groupId=order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8388381-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512-2, groupId=order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512] Successfully joined group with generation Generation{generationId=1, memberId='consumer-order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512-2-c6ba2d99-f436-4cda-b9d0-38efa35e6c3a', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8393602-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512-2, groupId=order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512] Finished assignment for group at generation 1: {consumer-order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512-2-c6ba2d99-f436-4cda-b9d0-38efa35e6c3a=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8430609-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W3MQ5QKWMQC7YFD6AKA016","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8435856-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512-2, groupId=order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512] Successfully synced group in generation Generation{generationId=1, memberId='consumer-order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512-2-c6ba2d99-f436-4cda-b9d0-38efa35e6c3a', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8435856-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512-2, groupId=order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8441087-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512-2, groupId=order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8453701-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512-2, groupId=order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8495816-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512-2, groupId=order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:54393 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8517105-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8522572-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item EVT-CONSUME-1 pedido 01K5W3MQ5QKWMQC7YFD6AKA016 -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8596607-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8601772-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8601772-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3MQ5QKWMQC7YFD6AKA016","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8731121-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512-2, groupId=order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8736567-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512-2, groupId=order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512] Member consumer-order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512-2-c6ba2d99-f436-4cda-b9d0-38efa35e6c3a sending LeaveGroup request to coordinator localhost:54393 (id: 2147483646 rack: null) due to the consumer is being closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8929657-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512-2, groupId=order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.8937527-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512-2, groupId=order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.9064133-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.9069966-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.9069966-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.9089105-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"App info kafka.consumer for consumer-order-events-test-group-0be2d2b7-3230-4919-a58d-f18886540512-2 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.9190455-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventPublishingIT]: OrderEventPublishingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.9200456-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventPublishingIT","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.9496934-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-9","correlationId":"ee502ebe-e48e-4ad4-a12a-3efdc9918adf","message":"Processing new order request - Correlation ID: 6646fed8-778f-47d6-a846-2a266310bf63, Customer: customer-events, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.9554078-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-9","correlationId":"ee502ebe-e48e-4ad4-a12a-3efdc9918adf","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.9554078-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-9","correlationId":"ee502ebe-e48e-4ad4-a12a-3efdc9918adf","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.9559255-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-9","correlationId":"ee502ebe-e48e-4ad4-a12a-3efdc9918adf","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3MQA53TA9YSX6WKXXJNQ5","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.9581651-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-9","correlationId":"ee502ebe-e48e-4ad4-a12a-3efdc9918adf","message":"Order accepted for async processing - ID: 01K5W3MQA53TA9YSX6WKXXJNQ5, Current Status: RECEIVED, Correlation ID: 6646fed8-778f-47d6-a846-2a266310bf63","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.9631302-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderFlowIT]: OrderFlowIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.9641771-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderFlowIT","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.978171-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W3MQA53TA9YSX6WKXXJNQ5","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.9870453-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.987572-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item EVT123 pedido 01K5W3MQA53TA9YSX6WKXXJNQ5 -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.990253-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.990253-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:34.9907758-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3MQA53TA9YSX6WKXXJNQ5","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.0053737-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"c976f36f-7852-4f53-b540-557a559f0b71","message":"Processing new order request - Correlation ID: c976f36f-7852-4f53-b540-557a559f0b71, Customer: customer-1, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.0113191-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"c976f36f-7852-4f53-b540-557a559f0b71","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.0118535-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"c976f36f-7852-4f53-b540-557a559f0b71","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.0118535-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"c976f36f-7852-4f53-b540-557a559f0b71","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3MQBX56BN1A8QAXFDSQGE","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.0144752-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"c976f36f-7852-4f53-b540-557a559f0b71","message":"Order accepted for async processing - ID: 01K5W3MQBX56BN1A8QAXFDSQGE, Current Status: RECEIVED, Correlation ID: c976f36f-7852-4f53-b540-557a559f0b71","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.0176804-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"7ad45ef9-167c-404e-8239-8ed1c0dc2808","message":"Fetching order by ID: 01K5W3MQBX56BN1A8QAXFDSQGE - Correlation ID: e759bfd7-aec7-4bbc-b5f4-989f7473d8ea","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.0227395-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"7ad45ef9-167c-404e-8239-8ed1c0dc2808","message":"Order retrieved successfully - ID: 01K5W3MQBX56BN1A8QAXFDSQGE, Status: RECEIVED, Correlation ID: e759bfd7-aec7-4bbc-b5f4-989f7473d8ea","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.0387976-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W3MQBX56BN1A8QAXFDSQGE","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.0477711-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.0477711-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item ABC123 pedido 01K5W3MQBX56BN1A8QAXFDSQGE -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.0515636-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.0515636-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.0521114-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3MQBX56BN1A8QAXFDSQGE","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.0940534-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.0940534-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.2374466-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.2374466-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.2374466-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight FETCH request with correlation id 28 due to node 1 being disconnected (elapsed time since creation: 170ms, elapsed time since send: 170ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.2382444-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight METADATA request with correlation id 29 due to node 1 being disconnected (elapsed time since creation: 160ms, elapsed time since send: 160ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.2382444-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 2147483646 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.2391446-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.2391446-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cancelled in-flight API_VERSIONS request with correlation id 16 due to node 1 being disconnected (elapsed time since creation: 2ms, elapsed time since send: 2ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.2386417-03:00","level":"INFO","logger":"o.a.k.clients.FetchSessionHandler","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error sending fetch request (sessionId=905081725, epoch=16) to node 1:","exception":"org.apache.kafka.common.errors.DisconnectException: null\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.2403479-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Group coordinator localhost:54393 (id: 2147483646 rack: null) is unavailable or invalid due to cause: coordinator unavailable. isDisconnected: true. Rediscovery will be attempted.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.2415562-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.2415562-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions revoked: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.2421081-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.2421081-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.2421081-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Unsubscribed all topics or patterns and assigned partitions","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.2421081-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.2421081-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.2426817-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.2426817-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.2426817-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.2433156-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"App info kafka.consumer for consumer-orders-service-it-consumer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.2433156-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: Consumer stopped","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.3639984-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"SpringApplicationShutdownHook","message":"[Producer clientId=orders-service-producer-1] Closing the Kafka producer with timeoutMillis = 30000 ms.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.3649983-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.3649983-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.3649983-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.3649983-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"SpringApplicationShutdownHook","message":"App info kafka.producer for orders-service-producer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.3715154-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"SpringApplicationShutdownHook","message":"Closing JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.3725069-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown initiated...","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:35.3745063-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown completed.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:44.2233951-03:00","level":"INFO","logger":"o.h.validator.internal.util.Version","thread":"background-preinit","message":"HV000001: Hibernate Validator 8.0.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:44.2640956-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Starting DistributionCenterCachingIT using Java 21.0.8 with PID 30736 (started by ciror in Z:\\projects\\meli-test-mktplace)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:44.2650956-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"The following 1 profile is active: \"integration-test\"","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:44.8620415-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:44.8620415-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:44.9503962-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 82 ms. Found 1 JPA repository interface.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:45.4048469-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:45.4068621-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data Redis repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:45.4377218-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationExtensionSupport","thread":"main","message":"Spring Data Redis - Could not safely identify store assignment for repository candidate interface br.com.ml.mktplace.orders.adapter.outbound.persistence.repository.JpaOrderEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:45.4377218-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 17 ms. Found 0 Redis repository interfaces.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:46.4070948-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat initialized with port 0 (http)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:46.4150977-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Initializing ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:46.4160982-03:00","level":"INFO","logger":"o.a.catalina.core.StandardService","thread":"main","message":"Starting service [Tomcat]","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:46.4160982-03:00","level":"INFO","logger":"o.a.catalina.core.StandardEngine","thread":"main","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:46.4712927-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"main","message":"Initializing Spring embedded WebApplicationContext","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:46.4712927-03:00","level":"INFO","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","thread":"main","message":"Root WebApplicationContext: initialization completed in 2187 ms","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:46.7909377-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Starting...","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:46.9821753-03:00","level":"INFO","logger":"com.zaxxer.hikari.pool.HikariPool","thread":"main","message":"OrdersHikariPool - Added connection org.postgresql.jdbc.PgConnection@bcaa093","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:46.9831804-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Start completed.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:47.108118-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"Flyway Community Edition 9.22.3 by Redgate","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:47.108118-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"See release notes here: https://rd.gt/416ObMi","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:47.108118-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:47.1247497-03:00","level":"INFO","logger":"org.flywaydb.core.FlywayExecutor","thread":"main","message":"Database: jdbc:postgresql://localhost:54438/mktplace_orders (PostgreSQL 16.4)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:47.1335994-03:00","level":"WARN","logger":"o.f.c.i.database.base.Database","thread":"main","message":"Flyway upgrade recommended: PostgreSQL 16.4 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:47.1714065-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Schema history table \"public\".\"flyway_schema_history\" does not exist yet","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:47.1785532-03:00","level":"INFO","logger":"o.f.core.internal.command.DbValidate","thread":"main","message":"Successfully validated 2 migrations (execution time 00:00.030s)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:47.1977581-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Creating Schema History table \"public\".\"flyway_schema_history\" ...","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:47.2364741-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Current version of schema \"public\": << Empty Schema >>","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:47.2484917-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"1 - initial schema\"","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:47.2553111-03:00","level":"WARN","logger":"o.f.c.i.s.DefaultSqlScriptExecutor","thread":"main","message":"DB: extension \"postgis\" already exists, skipping (SQL State: 42710 - Error Code: 0)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:47.2999547-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"2 - sample distribution centers\"","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:47.3149099-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Successfully applied 2 migrations to schema \"public\", now at version v2 (execution time 00:00.040s)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:47.3678698-03:00","level":"INFO","logger":"o.h.jpa.internal.util.LogHelper","thread":"main","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:47.4205455-03:00","level":"INFO","logger":"org.hibernate.Version","thread":"main","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:47.4290649-03:00","level":"INFO","logger":"o.h.s.integration.SpatialService","thread":"main","message":"HHH80000001: hibernate-spatial integration enabled : true","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:47.4513454-03:00","level":"INFO","logger":"o.h.c.i.RegionFactoryInitiator","thread":"main","message":"HHH000026: Second-level cache disabled","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:47.5480161-03:00","level":"WARN","logger":"org.hibernate.orm.deprecation","thread":"main","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:47.5663215-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:47.7358652-03:00","level":"INFO","logger":"o.s.o.j.p.SpringPersistenceUnitInfo","thread":"main","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:47.7557168-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:48.0593782-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000004: hibernate-spatial adding function contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:48.5356606-03:00","level":"INFO","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator","thread":"main","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:48.5486331-03:00","level":"INFO","logger":"o.hibernate.orm.connections.access","thread":"main","message":"HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@4fc74e2d] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:48.5713407-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"main","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:48.9148752-03:00","level":"INFO","logger":"o.s.d.j.r.query.QueryEnhancerFactory","thread":"main","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:50.1402202-03:00","level":"WARN","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration","thread":"main","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:51.2012591-03:00","level":"INFO","logger":"o.s.b.a.e.web.EndpointLinksResolver","thread":"main","message":"Exposing 5 endpoint(s) beneath base path '/actuator'","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:51.278147-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Starting ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:51.2958755-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat started on port 54452 (http) with context path '/api'","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:51.3307516-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:54442]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-orders-service-it-consumer-1\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = orders-service-it-consumer\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:51.4658697-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:51.4668729-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:51.4668729-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758658731465","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:51.4698734-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:51.4839788-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Started DistributionCenterCachingIT in 7.739 seconds (process running for 15.41)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:51.8919038-03:00","level":"WARN","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error while fetching metadata with correlation id 2 : {orders.events=LEADER_NOT_AVAILABLE}","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:51.8941182-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cluster ID: brBFrTFAR3WZU_eLrqMYJw","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:52.006032-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Discovered group coordinator localhost:54442 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:52.010306-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:52.0269506-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: need to re-join with the given member-id: consumer-orders-service-it-consumer-1-a8eb02e0-95a8-4da0-bdfc-8e8405886b1f","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:52.0269506-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:52.0269506-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:52.0397103-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully joined group with generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-a8eb02e0-95a8-4da0-bdfc-8e8405886b1f', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:52.0423702-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Finished assignment for group at generation 1: {consumer-orders-service-it-consumer-1-a8eb02e0-95a8-4da0-bdfc-8e8405886b1f=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:52.0762587-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully synced group in generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-a8eb02e0-95a8-4da0-bdfc-8e8405886b1f', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:52.077263-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:52.0782642-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:52.089239-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:52.0980241-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:54442 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:52.0990296-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions assigned: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:52.8093653-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"http-nio-auto-1-exec-1","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:52.8093653-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-1","message":"Initializing Servlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:52.8103655-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-1","message":"Completed initialization in 1 ms","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:52.9216536-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"d65b0c9c-160e-4ebf-84f9-72d21a17a317","message":"Processing new order request - Correlation ID: 4732ace3-3886-4e79-95d2-083226949b14, Customer: customer-cache, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:53.304798-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"d65b0c9c-160e-4ebf-84f9-72d21a17a317","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:53.3054239-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"d65b0c9c-160e-4ebf-84f9-72d21a17a317","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:53.3139546-03:00","level":"INFO","logger":"o.a.k.c.producer.ProducerConfig","thread":"http-nio-auto-1-exec-1","correlationId":"d65b0c9c-160e-4ebf-84f9-72d21a17a317","message":"ProducerConfig values: \r\n\tacks = -1\r\n\tauto.include.jmx.reporter = true\r\n\tbatch.size = 16384\r\n\tbootstrap.servers = [PLAINTEXT://localhost:54442]\r\n\tbuffer.memory = 33554432\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = orders-service-producer-1\r\n\tcompression.type = snappy\r\n\tconnections.max.idle.ms = 540000\r\n\tdelivery.timeout.ms = 120000\r\n\tenable.idempotence = true\r\n\tinterceptor.classes = []\r\n\tkey.serializer = class org.apache.kafka.common.serialization.StringSerializer\r\n\tlinger.ms = 10\r\n\tmax.block.ms = 60000\r\n\tmax.in.flight.requests.per.connection = 5\r\n\tmax.request.size = 1048576\r\n\tmetadata.max.age.ms = 300000\r\n\tmetadata.max.idle.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartitioner.adaptive.partitioning.enable = true\r\n\tpartitioner.availability.timeout.ms = 0\r\n\tpartitioner.class = null\r\n\tpartitioner.ignore.keys = false\r\n\treceive.buffer.bytes = 32768\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretries = 3\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\ttransaction.timeout.ms = 60000\r\n\ttransactional.id = null\r\n\tvalue.serializer = class org.springframework.kafka.support.serializer.JsonSerializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:53.3241904-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"http-nio-auto-1-exec-1","correlationId":"d65b0c9c-160e-4ebf-84f9-72d21a17a317","message":"[Producer clientId=orders-service-producer-1] Instantiated an idempotent producer.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:53.3365868-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"d65b0c9c-160e-4ebf-84f9-72d21a17a317","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:53.3375865-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"d65b0c9c-160e-4ebf-84f9-72d21a17a317","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:53.3375865-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"d65b0c9c-160e-4ebf-84f9-72d21a17a317","message":"Kafka startTimeMs: 1758658733336","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:53.3448092-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cluster ID: brBFrTFAR3WZU_eLrqMYJw","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:53.3575514-03:00","level":"INFO","logger":"o.a.k.c.p.i.TransactionManager","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] ProducerId set to 0 with epoch 0","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:53.5293254-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"d65b0c9c-160e-4ebf-84f9-72d21a17a317","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3N8W9A07KF1PHVDNBCNP4","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:53.5522312-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"d65b0c9c-160e-4ebf-84f9-72d21a17a317","message":"Order accepted for async processing - ID: 01K5W3N8W9A07KF1PHVDNBCNP4, Current Status: RECEIVED, Correlation ID: 4732ace3-3886-4e79-95d2-083226949b14","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:53.5823477-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W3N8W9A07KF1PHVDNBCNP4","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:53.6187164-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-3","correlationId":"576a47eb-bf31-415b-926f-722dd6c7b6ff","message":"Fetching order by ID: 01K5W3N8W9A07KF1PHVDNBCNP4 - Correlation ID: 2808870c-9a47-4b5d-9c32-7ce49e7245db","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:53.6347976-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-3","correlationId":"576a47eb-bf31-415b-926f-722dd6c7b6ff","message":"Order retrieved successfully - ID: 01K5W3N8W9A07KF1PHVDNBCNP4, Status: RECEIVED, Correlation ID: 2808870c-9a47-4b5d-9c32-7ce49e7245db","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:53.8461399-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"871f9981-67e7-4103-8f5d-95a3a2c5bf81","message":"Fetching order by ID: 01K5W3N8W9A07KF1PHVDNBCNP4 - Correlation ID: 435cb4bc-b3ed-45aa-b81f-8cd115f45b45","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:53.8518888-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"871f9981-67e7-4103-8f5d-95a3a2c5bf81","message":"Order retrieved successfully - ID: 01K5W3N8W9A07KF1PHVDNBCNP4, Status: RECEIVED, Correlation ID: 435cb4bc-b3ed-45aa-b81f-8cd115f45b45","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:53.9031165-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:53.903639-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item CACHE1 pedido 01K5W3N8W9A07KF1PHVDNBCNP4 -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:53.9059547-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:53.9065054-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:53.9065054-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3N8W9A07KF1PHVDNBCNP4","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.0605277-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-10","correlationId":"1b9d3fe3-8f99-4a5c-8fc8-75e63188c68d","message":"Fetching order by ID: 01K5W3N8W9A07KF1PHVDNBCNP4 - Correlation ID: d7d57192-16c5-4c87-9e13-02aad44c37b0","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.0665683-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-10","correlationId":"1b9d3fe3-8f99-4a5c-8fc8-75e63188c68d","message":"Order retrieved successfully - ID: 01K5W3N8W9A07KF1PHVDNBCNP4, Status: PROCESSED, Correlation ID: d7d57192-16c5-4c87-9e13-02aad44c37b0","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.075805-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"988bcb91-f453-4eb0-9c4a-63b01c1779ed","message":"Processing new order request - Correlation ID: 4b6d54f0-5907-44e5-9036-22451d1b4321, Customer: customer-cache, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.0803739-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"988bcb91-f453-4eb0-9c4a-63b01c1779ed","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.0809427-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"988bcb91-f453-4eb0-9c4a-63b01c1779ed","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.0809427-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"988bcb91-f453-4eb0-9c4a-63b01c1779ed","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3N9ZV6WVAQM2XTJF5RT92","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.0837638-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"988bcb91-f453-4eb0-9c4a-63b01c1779ed","message":"Order accepted for async processing - ID: 01K5W3N9ZV6WVAQM2XTJF5RT92, Current Status: RECEIVED, Correlation ID: 4b6d54f0-5907-44e5-9036-22451d1b4321","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.1009611-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT]: OrderEndToEndProcessingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.1019616-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.110252-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W3N9ZV6WVAQM2XTJF5RT92","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.1330221-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.1344614-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item CACHE1 pedido 01K5W3N9ZV6WVAQM2XTJF5RT92 -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.1377997-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.1377997-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.1383276-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3N9ZV6WVAQM2XTJF5RT92","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.1674766-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-7","correlationId":"25b9a17f-0cf3-40b6-b3c4-f82d259a1622","message":"Processing new order request - Correlation ID: 25b9a17f-0cf3-40b6-b3c4-f82d259a1622, Customer: customer-async-proc, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.1778003-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"25b9a17f-0cf3-40b6-b3c4-f82d259a1622","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.1778003-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"25b9a17f-0cf3-40b6-b3c4-f82d259a1622","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.1778003-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-7","correlationId":"25b9a17f-0cf3-40b6-b3c4-f82d259a1622","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3NA2RJ2A1H708KVY4XH0H","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.1820704-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-7","correlationId":"25b9a17f-0cf3-40b6-b3c4-f82d259a1622","message":"Order accepted for async processing - ID: 01K5W3NA2RJ2A1H708KVY4XH0H, Current Status: RECEIVED, Correlation ID: 25b9a17f-0cf3-40b6-b3c4-f82d259a1622","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.1881162-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"9e2a1386-54a3-48c0-a08d-7d97cfd0467e","message":"Fetching order by ID: 01K5W3NA2RJ2A1H708KVY4XH0H - Correlation ID: 307bf2ee-8ff7-44aa-9a37-97abf05ddaac","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.1948767-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"9e2a1386-54a3-48c0-a08d-7d97cfd0467e","message":"Order retrieved successfully - ID: 01K5W3NA2RJ2A1H708KVY4XH0H, Status: RECEIVED, Correlation ID: 307bf2ee-8ff7-44aa-9a37-97abf05ddaac","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.2023799-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W3NA2RJ2A1H708KVY4XH0H","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.2138979-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.2144356-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item ASYNC-PROC-1 pedido 01K5W3NA2RJ2A1H708KVY4XH0H -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.217289-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.2178507-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.2178507-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3NA2RJ2A1H708KVY4XH0H","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7050594-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-9","correlationId":"9b949dbb-b568-4655-86f8-437893ff7a3e","message":"Fetching order by ID: 01K5W3NA2RJ2A1H708KVY4XH0H - Correlation ID: 420f52a6-6ae4-4454-8a4e-ffaebf0f51bd","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7111081-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-9","correlationId":"9b949dbb-b568-4655-86f8-437893ff7a3e","message":"Order retrieved successfully - ID: 01K5W3NA2RJ2A1H708KVY4XH0H, Status: PROCESSED, Correlation ID: 420f52a6-6ae4-4454-8a4e-ffaebf0f51bd","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7170925-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT]: OrderEventConsumptionIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.717671-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7508007-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-4","correlationId":"687daf3a-8a09-419d-aace-fcfae6d76564","message":"Processing new order request - Correlation ID: 16fef35c-c4e3-4a4d-a46b-cb67056eb3e7, Customer: customer-event-consumer, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7567379-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"687daf3a-8a09-419d-aace-fcfae6d76564","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7567379-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"687daf3a-8a09-419d-aace-fcfae6d76564","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7572844-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-4","correlationId":"687daf3a-8a09-419d-aace-fcfae6d76564","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3NAMYNZYE7S2Q5NQ43GYM","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7594294-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-4","correlationId":"687daf3a-8a09-419d-aace-fcfae6d76564","message":"Order accepted for async processing - ID: 01K5W3NAMYNZYE7S2Q5NQ43GYM, Current Status: RECEIVED, Correlation ID: 16fef35c-c4e3-4a4d-a46b-cb67056eb3e7","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7610473-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:54442]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef-2\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7644091-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7644091-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7644091-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758658734764","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7649876-03:00","level":"INFO","logger":"o.a.k.clients.consumer.KafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef-2, groupId=order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7698275-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef-2, groupId=order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef] Cluster ID: brBFrTFAR3WZU_eLrqMYJw","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7705964-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef-2, groupId=order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef] Discovered group coordinator localhost:54442 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7718154-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef-2, groupId=order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.774483-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef-2, groupId=order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef] Request joining group due to: need to re-join with the given member-id: consumer-order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef-2-ceaba4c4-b9fc-46f1-b09e-547e9695aea1","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7750298-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef-2, groupId=order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7750298-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef-2, groupId=order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7788386-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef-2, groupId=order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef] Successfully joined group with generation Generation{generationId=1, memberId='consumer-order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef-2-ceaba4c4-b9fc-46f1-b09e-547e9695aea1', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7788386-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef-2, groupId=order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef] Finished assignment for group at generation 1: {consumer-order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef-2-ceaba4c4-b9fc-46f1-b09e-547e9695aea1=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7824452-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef-2, groupId=order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef] Successfully synced group in generation Generation{generationId=1, memberId='consumer-order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef-2-ceaba4c4-b9fc-46f1-b09e-547e9695aea1', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7839613-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef-2, groupId=order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7839613-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef-2, groupId=order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7839613-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W3NAMYNZYE7S2Q5NQ43GYM","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7855071-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef-2, groupId=order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7900231-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef-2, groupId=order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:54442 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.794027-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.794027-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item EVT-CONSUME-1 pedido 01K5W3NAMYNZYE7S2Q5NQ43GYM -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7967248-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7972451-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.7972451-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3NAMYNZYE7S2Q5NQ43GYM","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.8038479-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef-2, groupId=order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.8038479-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef-2, groupId=order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef] Member consumer-order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef-2-ceaba4c4-b9fc-46f1-b09e-547e9695aea1 sending LeaveGroup request to coordinator localhost:54442 (id: 2147483646 rack: null) due to the consumer is being closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.8043571-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef-2, groupId=order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.8049114-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef-2, groupId=order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.8127554-03:00","level":"INFO","logger":"o.a.k.clients.FetchSessionHandler","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef-2, groupId=order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef] Node 1 sent an invalid full fetch response with extraIds=(0Ys039eqSlK2ftTUvXpdfQ), response=()","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.8144395-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.8149518-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.8149518-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.8169276-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"App info kafka.consumer for consumer-order-events-test-group-6bec8ca9-6d14-41f4-b6bd-3a319bab16ef-2 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.8267861-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventPublishingIT]: OrderEventPublishingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.8273887-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventPublishingIT","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.8577161-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"a1400e59-dcb7-4cae-8a98-24e2ae720e46","message":"Processing new order request - Correlation ID: 8d63f1ab-aef4-4fa8-b96e-061a5ef267f7, Customer: customer-events, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.8631199-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"a1400e59-dcb7-4cae-8a98-24e2ae720e46","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.8636498-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"a1400e59-dcb7-4cae-8a98-24e2ae720e46","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.8636498-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"a1400e59-dcb7-4cae-8a98-24e2ae720e46","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3NAR93D965X00302NG2DT","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.8658199-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"a1400e59-dcb7-4cae-8a98-24e2ae720e46","message":"Order accepted for async processing - ID: 01K5W3NAR93D965X00302NG2DT, Current Status: RECEIVED, Correlation ID: 8d63f1ab-aef4-4fa8-b96e-061a5ef267f7","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.8700408-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderFlowIT]: OrderFlowIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.871163-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderFlowIT","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.8902703-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W3NAR93D965X00302NG2DT","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.898172-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.8986996-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item EVT123 pedido 01K5W3NAR93D965X00302NG2DT -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.9009113-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.9009113-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.9014442-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3NAR93D965X00302NG2DT","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.9019761-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"ca6a925c-9206-4569-ae0d-89c0ee49de07","message":"Processing new order request - Correlation ID: ca6a925c-9206-4569-ae0d-89c0ee49de07, Customer: customer-1, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.9073333-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"ca6a925c-9206-4569-ae0d-89c0ee49de07","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.9073333-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"ca6a925c-9206-4569-ae0d-89c0ee49de07","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.9078558-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"ca6a925c-9206-4569-ae0d-89c0ee49de07","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3NASPVZEKNMK0Z2DE3YC7","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.9100103-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"ca6a925c-9206-4569-ae0d-89c0ee49de07","message":"Order accepted for async processing - ID: 01K5W3NASPVZEKNMK0Z2DE3YC7, Current Status: RECEIVED, Correlation ID: ca6a925c-9206-4569-ae0d-89c0ee49de07","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.9132302-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-3","correlationId":"78185932-cb83-43cd-bd7b-4cfc13a216de","message":"Fetching order by ID: 01K5W3NASPVZEKNMK0Z2DE3YC7 - Correlation ID: 6ecbdf8f-2cb6-4931-a2a9-95f1f4ecefea","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.9177188-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-3","correlationId":"78185932-cb83-43cd-bd7b-4cfc13a216de","message":"Order retrieved successfully - ID: 01K5W3NASPVZEKNMK0Z2DE3YC7, Status: RECEIVED, Correlation ID: 6ecbdf8f-2cb6-4931-a2a9-95f1f4ecefea","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.9198257-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W3NASPVZEKNMK0Z2DE3YC7","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.9289249-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.9289249-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item ABC123 pedido 01K5W3NASPVZEKNMK0Z2DE3YC7 -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.9311047-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.931615-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.931615-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W3NASPVZEKNMK0Z2DE3YC7","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.9872013-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:54.9877106-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 2147483646 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.1365141-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.1365141-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.1368844-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cancelled in-flight METADATA request with correlation id 15 due to node 1 being disconnected (elapsed time since creation: 1ms, elapsed time since send: 1ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.1368844-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight FETCH request with correlation id 27 due to node 1 being disconnected (elapsed time since creation: 186ms, elapsed time since send: 186ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.1368844-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight METADATA request with correlation id 28 due to node 1 being disconnected (elapsed time since creation: 116ms, elapsed time since send: 116ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.1373884-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.138413-03:00","level":"INFO","logger":"o.a.k.clients.FetchSessionHandler","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error sending fetch request (sessionId=1269803293, epoch=15) to node 1:","exception":"org.apache.kafka.common.errors.DisconnectException: null\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.1414917-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.1414917-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions revoked: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.142097-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Member consumer-orders-service-it-consumer-1-a8eb02e0-95a8-4da0-bdfc-8e8405886b1f sending LeaveGroup request to coordinator localhost:54442 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.142097-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 2147483646 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.142097-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight API_VERSIONS request with correlation id 30 due to node 2147483646 being disconnected (elapsed time since creation: 2ms, elapsed time since send: 2ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.142097-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Group coordinator localhost:54442 (id: 2147483646 rack: null) is unavailable or invalid due to cause: null. isDisconnected: true. Rediscovery will be attempted.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.142097-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.1427212-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.1427212-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Unsubscribed all topics or patterns and assigned partitions","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.1427212-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.1427212-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.1433103-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.1433103-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.1433103-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.1439022-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"App info kafka.consumer for consumer-orders-service-it-consumer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.1439022-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: Consumer stopped","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.2385209-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.2396121-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cancelled in-flight API_VERSIONS request with correlation id 16 due to node 1 being disconnected (elapsed time since creation: 1ms, elapsed time since send: 1ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.2698307-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"SpringApplicationShutdownHook","message":"[Producer clientId=orders-service-producer-1] Closing the Kafka producer with timeoutMillis = 30000 ms.","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.2710578-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.2710578-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.2710578-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.2710578-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"SpringApplicationShutdownHook","message":"App info kafka.producer for orders-service-producer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.2790784-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"SpringApplicationShutdownHook","message":"Closing JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.2800704-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown initiated...","service":"orders-service"}
{"timestamp":"2025-09-23T17:18:55.2800704-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown completed.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:31.6207815-03:00","level":"INFO","logger":"o.h.validator.internal.util.Version","thread":"background-preinit","message":"HV000001: Hibernate Validator 8.0.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:31.6596741-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Starting DistributionCenterCachingIT using Java 21.0.8 with PID 32096 (started by ciror in Z:\\projects\\meli-test-mktplace)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:31.6606741-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"The following 1 profile is active: \"integration-test\"","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:32.1981134-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:32.1981134-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:32.2884163-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 84 ms. Found 1 JPA repository interface.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:32.7932167-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:32.7952166-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data Redis repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:32.8307712-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationExtensionSupport","thread":"main","message":"Spring Data Redis - Could not safely identify store assignment for repository candidate interface br.com.ml.mktplace.orders.adapter.outbound.persistence.repository.JpaOrderEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:32.8312834-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 20 ms. Found 0 Redis repository interfaces.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:33.8188925-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat initialized with port 0 (http)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:33.826546-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Initializing ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:33.8275063-03:00","level":"INFO","logger":"o.a.catalina.core.StandardService","thread":"main","message":"Starting service [Tomcat]","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:33.8285087-03:00","level":"INFO","logger":"o.a.catalina.core.StandardEngine","thread":"main","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:33.8865817-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"main","message":"Initializing Spring embedded WebApplicationContext","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:33.8865817-03:00","level":"INFO","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","thread":"main","message":"Root WebApplicationContext: initialization completed in 2211 ms","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:34.2319444-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Starting...","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:34.4400132-03:00","level":"INFO","logger":"com.zaxxer.hikari.pool.HikariPool","thread":"main","message":"OrdersHikariPool - Added connection org.postgresql.jdbc.PgConnection@56bf0270","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:34.4418963-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Start completed.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:34.6079552-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"Flyway Community Edition 9.22.3 by Redgate","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:34.6079552-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"See release notes here: https://rd.gt/416ObMi","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:34.6084747-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:34.6357826-03:00","level":"INFO","logger":"org.flywaydb.core.FlywayExecutor","thread":"main","message":"Database: jdbc:postgresql://localhost:54808/mktplace_orders (PostgreSQL 16.4)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:34.6474142-03:00","level":"WARN","logger":"o.f.c.i.database.base.Database","thread":"main","message":"Flyway upgrade recommended: PostgreSQL 16.4 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:34.6842088-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Schema history table \"public\".\"flyway_schema_history\" does not exist yet","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:34.6891376-03:00","level":"INFO","logger":"o.f.core.internal.command.DbValidate","thread":"main","message":"Successfully validated 2 migrations (execution time 00:00.027s)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:34.710861-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Creating Schema History table \"public\".\"flyway_schema_history\" ...","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:34.7483423-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Current version of schema \"public\": << Empty Schema >>","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:34.760619-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"1 - initial schema\"","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:34.7668107-03:00","level":"WARN","logger":"o.f.c.i.s.DefaultSqlScriptExecutor","thread":"main","message":"DB: extension \"postgis\" already exists, skipping (SQL State: 42710 - Error Code: 0)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:34.8137307-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"2 - sample distribution centers\"","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:34.8374735-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Successfully applied 2 migrations to schema \"public\", now at version v2 (execution time 00:00.040s)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:34.9123563-03:00","level":"INFO","logger":"o.h.jpa.internal.util.LogHelper","thread":"main","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:34.9770682-03:00","level":"INFO","logger":"org.hibernate.Version","thread":"main","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:34.9884345-03:00","level":"INFO","logger":"o.h.s.integration.SpatialService","thread":"main","message":"HHH80000001: hibernate-spatial integration enabled : true","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:35.0154735-03:00","level":"INFO","logger":"o.h.c.i.RegionFactoryInitiator","thread":"main","message":"HHH000026: Second-level cache disabled","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:35.1274657-03:00","level":"WARN","logger":"org.hibernate.orm.deprecation","thread":"main","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:35.1449109-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:35.3138825-03:00","level":"INFO","logger":"o.s.o.j.p.SpringPersistenceUnitInfo","thread":"main","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:35.3332105-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:35.62696-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000004: hibernate-spatial adding function contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:36.0786057-03:00","level":"INFO","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator","thread":"main","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:36.0930928-03:00","level":"INFO","logger":"o.hibernate.orm.connections.access","thread":"main","message":"HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@4fc74e2d] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:36.1136309-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"main","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:36.4812356-03:00","level":"INFO","logger":"o.s.d.j.r.query.QueryEnhancerFactory","thread":"main","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:37.6593499-03:00","level":"WARN","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration","thread":"main","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:38.6185974-03:00","level":"INFO","logger":"o.s.b.a.e.web.EndpointLinksResolver","thread":"main","message":"Exposing 5 endpoint(s) beneath base path '/actuator'","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:38.6951101-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Starting ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:38.7147355-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat started on port 54820 (http) with context path '/api'","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:38.7494668-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:54811]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-orders-service-it-consumer-1\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = orders-service-it-consumer\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:38.8593815-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:38.8608892-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:38.8608892-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758662618859","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:38.8636075-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:38.8782194-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Started DistributionCenterCachingIT in 7.715 seconds (process running for 15.991)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:39.2144149-03:00","level":"WARN","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error while fetching metadata with correlation id 2 : {orders.events=LEADER_NOT_AVAILABLE}","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:39.2156616-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cluster ID: 8Lro0OncQ0-uwPccqus6aA","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:39.444628-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Discovered group coordinator localhost:54811 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:39.4478638-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:39.4635827-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: need to re-join with the given member-id: consumer-orders-service-it-consumer-1-308609ad-c374-4afc-8b32-646af9599f62","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:39.4640864-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:39.4640864-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:39.477643-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully joined group with generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-308609ad-c374-4afc-8b32-646af9599f62', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:39.4806686-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Finished assignment for group at generation 1: {consumer-orders-service-it-consumer-1-308609ad-c374-4afc-8b32-646af9599f62=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:39.5122916-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully synced group in generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-308609ad-c374-4afc-8b32-646af9599f62', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:39.5128568-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:39.5146522-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:39.5331851-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:39.5452452-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:54811 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:39.5462969-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions assigned: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:40.2262663-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"http-nio-auto-1-exec-1","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:40.2262663-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-1","message":"Initializing Servlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:40.2273327-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-1","message":"Completed initialization in 0 ms","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:40.3373433-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"c50ea90b-f3cc-4d31-923f-3ba9cb48d559","message":"Processing new order request - Correlation ID: d3feca8e-ec62-4b48-bf02-7cbfb36097ee, Customer: customer-cache, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:40.6962247-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"c50ea90b-f3cc-4d31-923f-3ba9cb48d559","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:40.6962247-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"c50ea90b-f3cc-4d31-923f-3ba9cb48d559","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:40.7075568-03:00","level":"INFO","logger":"o.a.k.c.producer.ProducerConfig","thread":"http-nio-auto-1-exec-1","correlationId":"c50ea90b-f3cc-4d31-923f-3ba9cb48d559","message":"ProducerConfig values: \r\n\tacks = -1\r\n\tauto.include.jmx.reporter = true\r\n\tbatch.size = 16384\r\n\tbootstrap.servers = [PLAINTEXT://localhost:54811]\r\n\tbuffer.memory = 33554432\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = orders-service-producer-1\r\n\tcompression.type = snappy\r\n\tconnections.max.idle.ms = 540000\r\n\tdelivery.timeout.ms = 120000\r\n\tenable.idempotence = true\r\n\tinterceptor.classes = []\r\n\tkey.serializer = class org.apache.kafka.common.serialization.StringSerializer\r\n\tlinger.ms = 10\r\n\tmax.block.ms = 60000\r\n\tmax.in.flight.requests.per.connection = 5\r\n\tmax.request.size = 1048576\r\n\tmetadata.max.age.ms = 300000\r\n\tmetadata.max.idle.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartitioner.adaptive.partitioning.enable = true\r\n\tpartitioner.availability.timeout.ms = 0\r\n\tpartitioner.class = null\r\n\tpartitioner.ignore.keys = false\r\n\treceive.buffer.bytes = 32768\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretries = 3\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\ttransaction.timeout.ms = 60000\r\n\ttransactional.id = null\r\n\tvalue.serializer = class org.springframework.kafka.support.serializer.JsonSerializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:40.7181773-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"http-nio-auto-1-exec-1","correlationId":"c50ea90b-f3cc-4d31-923f-3ba9cb48d559","message":"[Producer clientId=orders-service-producer-1] Instantiated an idempotent producer.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:40.7314296-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"c50ea90b-f3cc-4d31-923f-3ba9cb48d559","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:40.7314296-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"c50ea90b-f3cc-4d31-923f-3ba9cb48d559","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:40.7314296-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"c50ea90b-f3cc-4d31-923f-3ba9cb48d559","message":"Kafka startTimeMs: 1758662620731","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:40.7397276-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cluster ID: 8Lro0OncQ0-uwPccqus6aA","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:40.7535993-03:00","level":"INFO","logger":"o.a.k.c.p.i.TransactionManager","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] ProducerId set to 0 with epoch 0","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:40.9234626-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"c50ea90b-f3cc-4d31-923f-3ba9cb48d559","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W7BX5VH093BFPFC54SKR3S","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:40.9443167-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"c50ea90b-f3cc-4d31-923f-3ba9cb48d559","message":"Order accepted for async processing - ID: 01K5W7BX5VH093BFPFC54SKR3S, Current Status: RECEIVED, Correlation ID: d3feca8e-ec62-4b48-bf02-7cbfb36097ee","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:40.9785509-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W7BX5VH093BFPFC54SKR3S","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.0183648-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"1de87351-987f-4537-8806-c75c8c3a7428","message":"Fetching order by ID: 01K5W7BX5VH093BFPFC54SKR3S - Correlation ID: 2206cde8-fd98-4bb7-912d-714a81fe8901","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.0353203-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"1de87351-987f-4537-8806-c75c8c3a7428","message":"Order retrieved successfully - ID: 01K5W7BX5VH093BFPFC54SKR3S, Status: RECEIVED, Correlation ID: 2206cde8-fd98-4bb7-912d-714a81fe8901","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.2457925-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-3","correlationId":"55376790-f7de-44d5-8541-2422b71cf53c","message":"Fetching order by ID: 01K5W7BX5VH093BFPFC54SKR3S - Correlation ID: 005ecea1-85ee-494b-804c-e02b89dc18fe","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.2509712-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-3","correlationId":"55376790-f7de-44d5-8541-2422b71cf53c","message":"Order retrieved successfully - ID: 01K5W7BX5VH093BFPFC54SKR3S, Status: RECEIVED, Correlation ID: 005ecea1-85ee-494b-804c-e02b89dc18fe","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.3007855-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.3013595-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item CACHE1 pedido 01K5W7BX5VH093BFPFC54SKR3S -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.3036703-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.3036703-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.3042316-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W7BX5VH093BFPFC54SKR3S","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.4604983-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-4","correlationId":"73c02f62-8682-47de-b48e-7d6256e9580a","message":"Fetching order by ID: 01K5W7BX5VH093BFPFC54SKR3S - Correlation ID: 42f3d9ea-fbe2-495c-8ff4-f9f644a784f8","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.4668161-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-4","correlationId":"73c02f62-8682-47de-b48e-7d6256e9580a","message":"Order retrieved successfully - ID: 01K5W7BX5VH093BFPFC54SKR3S, Status: PROCESSED, Correlation ID: 42f3d9ea-fbe2-495c-8ff4-f9f644a784f8","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.4760954-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"14e15f1e-ade4-4d35-ac47-b8f5d57984b3","message":"Processing new order request - Correlation ID: 6c05b461-408d-476f-9001-23ba7cf05748, Customer: customer-cache, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.4816974-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"14e15f1e-ade4-4d35-ac47-b8f5d57984b3","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.4816974-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"14e15f1e-ade4-4d35-ac47-b8f5d57984b3","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.4822595-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-5","correlationId":"14e15f1e-ade4-4d35-ac47-b8f5d57984b3","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W7BY94C9MVG2JHJYGE66WR","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.4846635-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"14e15f1e-ade4-4d35-ac47-b8f5d57984b3","message":"Order accepted for async processing - ID: 01K5W7BY94C9MVG2JHJYGE66WR, Current Status: RECEIVED, Correlation ID: 6c05b461-408d-476f-9001-23ba7cf05748","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.503388-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT]: OrderEndToEndProcessingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.5049591-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.5100176-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W7BY94C9MVG2JHJYGE66WR","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.5320445-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.5325988-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item CACHE1 pedido 01K5W7BY94C9MVG2JHJYGE66WR -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.5368406-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.5368406-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.5379973-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W7BY94C9MVG2JHJYGE66WR","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.5822493-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"22e30292-c020-43ef-8091-3704ed7c55b7","message":"Processing new order request - Correlation ID: 22e30292-c020-43ef-8091-3704ed7c55b7, Customer: customer-async-proc, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.5894889-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"22e30292-c020-43ef-8091-3704ed7c55b7","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.5900694-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"22e30292-c020-43ef-8091-3704ed7c55b7","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.5900694-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"22e30292-c020-43ef-8091-3704ed7c55b7","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W7BYCFHKNV95QBVMS1AT8Y","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.5930935-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"22e30292-c020-43ef-8091-3704ed7c55b7","message":"Order accepted for async processing - ID: 01K5W7BYCFHKNV95QBVMS1AT8Y, Current Status: RECEIVED, Correlation ID: 22e30292-c020-43ef-8091-3704ed7c55b7","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.5963729-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-7","correlationId":"35647dd1-0c46-4b8f-a332-b1f76e5ebe9c","message":"Fetching order by ID: 01K5W7BYCFHKNV95QBVMS1AT8Y - Correlation ID: b769ca4f-99b0-4f6f-9d54-7d0425db424d","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.6035753-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-7","correlationId":"35647dd1-0c46-4b8f-a332-b1f76e5ebe9c","message":"Order retrieved successfully - ID: 01K5W7BYCFHKNV95QBVMS1AT8Y, Status: RECEIVED, Correlation ID: b769ca4f-99b0-4f6f-9d54-7d0425db424d","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.614832-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W7BYCFHKNV95QBVMS1AT8Y","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.6241303-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.6241303-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item ASYNC-PROC-1 pedido 01K5W7BYCFHKNV95QBVMS1AT8Y -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.6270042-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.6276054-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:41.6276054-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W7BYCFHKNV95QBVMS1AT8Y","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.121907-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"852c4101-699a-4fe6-b5d9-388ef631be6a","message":"Fetching order by ID: 01K5W7BYCFHKNV95QBVMS1AT8Y - Correlation ID: c3538b8d-6367-4b50-a721-dc59d27b0116","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.1286414-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"852c4101-699a-4fe6-b5d9-388ef631be6a","message":"Order retrieved successfully - ID: 01K5W7BYCFHKNV95QBVMS1AT8Y, Status: PROCESSED, Correlation ID: c3538b8d-6367-4b50-a721-dc59d27b0116","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.1341475-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT]: OrderEventConsumptionIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.1361479-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.16683-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-10","correlationId":"4eb46339-dd1f-4076-bc87-628752ffc13e","message":"Processing new order request - Correlation ID: 20ffb2d4-5efc-4334-9441-ddbf9fe7f945, Customer: customer-event-consumer, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.1744375-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-10","correlationId":"4eb46339-dd1f-4076-bc87-628752ffc13e","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.1744375-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-10","correlationId":"4eb46339-dd1f-4076-bc87-628752ffc13e","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.1750236-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-10","correlationId":"4eb46339-dd1f-4076-bc87-628752ffc13e","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W7BYYRPNH78TW6APCNJWV5","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.1773832-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-10","correlationId":"4eb46339-dd1f-4076-bc87-628752ffc13e","message":"Order accepted for async processing - ID: 01K5W7BYYRPNH78TW6APCNJWV5, Current Status: RECEIVED, Correlation ID: 20ffb2d4-5efc-4334-9441-ddbf9fe7f945","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.1796516-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:54811]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103-2\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.1827068-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.1832963-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.1832963-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758662622182","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.183879-03:00","level":"INFO","logger":"o.a.k.clients.consumer.KafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103-2, groupId=order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.1899146-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103-2, groupId=order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103] Cluster ID: 8Lro0OncQ0-uwPccqus6aA","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.1905252-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103-2, groupId=order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103] Discovered group coordinator localhost:54811 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.1917158-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103-2, groupId=order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.1946342-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103-2, groupId=order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103] Request joining group due to: need to re-join with the given member-id: consumer-order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103-2-e8004a15-25ef-4f8c-873f-8683ab34260b","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.1952777-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103-2, groupId=order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.1952777-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103-2, groupId=order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.1988405-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103-2, groupId=order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103] Successfully joined group with generation Generation{generationId=1, memberId='consumer-order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103-2-e8004a15-25ef-4f8c-873f-8683ab34260b', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.1994449-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103-2, groupId=order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103] Finished assignment for group at generation 1: {consumer-order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103-2-e8004a15-25ef-4f8c-873f-8683ab34260b=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.2034873-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W7BYYRPNH78TW6APCNJWV5","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.2041012-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103-2, groupId=order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103] Successfully synced group in generation Generation{generationId=1, memberId='consumer-order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103-2-e8004a15-25ef-4f8c-873f-8683ab34260b', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.2046943-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103-2, groupId=order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.2046943-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103-2, groupId=order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.2062534-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103-2, groupId=order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.2099106-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103-2, groupId=order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:54811 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.211473-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.211473-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item EVT-CONSUME-1 pedido 01K5W7BYYRPNH78TW6APCNJWV5 -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.2147415-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.2152663-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.2152663-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W7BYYRPNH78TW6APCNJWV5","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.2229986-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103-2, groupId=order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.2239985-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103-2, groupId=order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103] Member consumer-order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103-2-e8004a15-25ef-4f8c-873f-8683ab34260b sending LeaveGroup request to coordinator localhost:54811 (id: 2147483646 rack: null) due to the consumer is being closed","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.2239985-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103-2, groupId=order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.2239985-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103-2, groupId=order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.2339652-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.2339652-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.2339652-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.2359669-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"App info kafka.consumer for consumer-order-events-test-group-3a778525-7ed7-4c3a-b758-be191c2b0103-2 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.2456872-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventPublishingIT]: OrderEventPublishingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.2466843-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventPublishingIT","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.2898829-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-9","correlationId":"bdda7184-7d04-46b6-a668-351361f781ef","message":"Processing new order request - Correlation ID: ab111d98-e0bb-4328-9be5-e6f09f092661, Customer: customer-events, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.2978637-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-9","correlationId":"bdda7184-7d04-46b6-a668-351361f781ef","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.2978637-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-9","correlationId":"bdda7184-7d04-46b6-a668-351361f781ef","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.2978637-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-9","correlationId":"bdda7184-7d04-46b6-a668-351361f781ef","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W7BZ2JHKM3SBAV9B9DGXH5","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.3009343-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-9","correlationId":"bdda7184-7d04-46b6-a668-351361f781ef","message":"Order accepted for async processing - ID: 01K5W7BZ2JHKM3SBAV9B9DGXH5, Current Status: RECEIVED, Correlation ID: ab111d98-e0bb-4328-9be5-e6f09f092661","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.3059094-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderFlowIT]: OrderFlowIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.3065052-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderFlowIT","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.3240029-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W7BZ2JHKM3SBAV9B9DGXH5","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.3329458-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.3329458-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item EVT123 pedido 01K5W7BZ2JHKM3SBAV9B9DGXH5 -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.3361458-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"f87bce06-4d77-4c7c-9be5-a59956d6d661","message":"Processing new order request - Correlation ID: f87bce06-4d77-4c7c-9be5-a59956d6d661, Customer: customer-1, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.3361458-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.3361458-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.3361458-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W7BZ2JHKM3SBAV9B9DGXH5","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.3413971-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"f87bce06-4d77-4c7c-9be5-a59956d6d661","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.3419156-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"f87bce06-4d77-4c7c-9be5-a59956d6d661","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.3419156-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"f87bce06-4d77-4c7c-9be5-a59956d6d661","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W7BZ40JQ2WWSHF9FASHY6D","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.3442199-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"f87bce06-4d77-4c7c-9be5-a59956d6d661","message":"Order accepted for async processing - ID: 01K5W7BZ40JQ2WWSHF9FASHY6D, Current Status: RECEIVED, Correlation ID: f87bce06-4d77-4c7c-9be5-a59956d6d661","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.3474948-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"063091f5-6d95-40bc-9d88-fe571f490ee8","message":"Fetching order by ID: 01K5W7BZ40JQ2WWSHF9FASHY6D - Correlation ID: 4e10591c-4fc5-4bab-a10e-78025907f4a4","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.3517423-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"063091f5-6d95-40bc-9d88-fe571f490ee8","message":"Order retrieved successfully - ID: 01K5W7BZ40JQ2WWSHF9FASHY6D, Status: RECEIVED, Correlation ID: 4e10591c-4fc5-4bab-a10e-78025907f4a4","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.3538588-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W7BZ40JQ2WWSHF9FASHY6D","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.3616403-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.3616403-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item ABC123 pedido 01K5W7BZ40JQ2WWSHF9FASHY6D -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.3643506-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.3643506-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.364992-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W7BZ40JQ2WWSHF9FASHY6D","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.42574-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.42574-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.567836-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.5688365-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.5692306-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight FETCH request with correlation id 29 due to node 1 being disconnected (elapsed time since creation: 182ms, elapsed time since send: 182ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.5692306-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight METADATA request with correlation id 30 due to node 1 being disconnected (elapsed time since creation: 143ms, elapsed time since send: 143ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.5692306-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 2147483646 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.5703427-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.5703427-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cancelled in-flight API_VERSIONS request with correlation id 15 due to node 1 being disconnected (elapsed time since creation: 1ms, elapsed time since send: 1ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.5703427-03:00","level":"INFO","logger":"o.a.k.clients.FetchSessionHandler","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error sending fetch request (sessionId=527867982, epoch=15) to node 1:","exception":"org.apache.kafka.common.errors.DisconnectException: null\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.572691-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Group coordinator localhost:54811 (id: 2147483646 rack: null) is unavailable or invalid due to cause: coordinator unavailable. isDisconnected: true. Rediscovery will be attempted.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.5732983-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.5738651-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions revoked: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.5738651-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.5738651-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.5738651-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Unsubscribed all topics or patterns and assigned partitions","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.5744715-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.5744715-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.5744715-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.5744715-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.5744715-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.5750456-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"App info kafka.consumer for consumer-orders-service-it-consumer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.5756503-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: Consumer stopped","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.7027437-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"SpringApplicationShutdownHook","message":"[Producer clientId=orders-service-producer-1] Closing the Kafka producer with timeoutMillis = 30000 ms.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.7037491-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.7037491-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.7037491-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.7037491-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"SpringApplicationShutdownHook","message":"App info kafka.producer for orders-service-producer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.7112199-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"SpringApplicationShutdownHook","message":"Closing JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.7112199-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown initiated...","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:42.7147279-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown completed.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:51.4913488-03:00","level":"INFO","logger":"o.h.validator.internal.util.Version","thread":"background-preinit","message":"HV000001: Hibernate Validator 8.0.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:51.526912-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Starting DistributionCenterCachingIT using Java 21.0.8 with PID 18556 (started by ciror in Z:\\projects\\meli-test-mktplace)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:51.5279091-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"The following 1 profile is active: \"integration-test\"","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:52.0788403-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:52.0788403-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:52.1720756-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 87 ms. Found 1 JPA repository interface.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:52.6149874-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Multiple Spring Data modules found, entering strict repository configuration mode","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:52.6169864-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Bootstrapping Spring Data Redis repositories in DEFAULT mode.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:52.646946-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationExtensionSupport","thread":"main","message":"Spring Data Redis - Could not safely identify store assignment for repository candidate interface br.com.ml.mktplace.orders.adapter.outbound.persistence.repository.JpaOrderEntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:52.646946-03:00","level":"INFO","logger":"o.s.d.r.c.RepositoryConfigurationDelegate","thread":"main","message":"Finished Spring Data repository scanning in 16 ms. Found 0 Redis repository interfaces.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:53.6003227-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat initialized with port 0 (http)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:53.607954-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Initializing ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:53.6097197-03:00","level":"INFO","logger":"o.a.catalina.core.StandardService","thread":"main","message":"Starting service [Tomcat]","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:53.6107243-03:00","level":"INFO","logger":"o.a.catalina.core.StandardEngine","thread":"main","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:53.6764038-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"main","message":"Initializing Spring embedded WebApplicationContext","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:53.6774043-03:00","level":"INFO","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext","thread":"main","message":"Root WebApplicationContext: initialization completed in 2132 ms","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:54.0341331-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Starting...","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:54.2448144-03:00","level":"INFO","logger":"com.zaxxer.hikari.pool.HikariPool","thread":"main","message":"OrdersHikariPool - Added connection org.postgresql.jdbc.PgConnection@57fa1c3f","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:54.2465879-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"main","message":"OrdersHikariPool - Start completed.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:54.3961489-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"Flyway Community Edition 9.22.3 by Redgate","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:54.3966672-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"See release notes here: https://rd.gt/416ObMi","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:54.3966672-03:00","level":"INFO","logger":"o.f.c.i.license.VersionPrinter","thread":"main","message":"","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:54.4240171-03:00","level":"INFO","logger":"org.flywaydb.core.FlywayExecutor","thread":"main","message":"Database: jdbc:postgresql://localhost:54859/mktplace_orders (PostgreSQL 16.4)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:54.4354707-03:00","level":"WARN","logger":"o.f.c.i.database.base.Database","thread":"main","message":"Flyway upgrade recommended: PostgreSQL 16.4 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:54.4705175-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Schema history table \"public\".\"flyway_schema_history\" does not exist yet","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:54.4795877-03:00","level":"INFO","logger":"o.f.core.internal.command.DbValidate","thread":"main","message":"Successfully validated 2 migrations (execution time 00:00.029s)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:54.4985557-03:00","level":"INFO","logger":"o.f.c.i.s.JdbcTableSchemaHistory","thread":"main","message":"Creating Schema History table \"public\".\"flyway_schema_history\" ...","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:54.5361747-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Current version of schema \"public\": << Empty Schema >>","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:54.5477054-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"1 - initial schema\"","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:54.5549282-03:00","level":"WARN","logger":"o.f.c.i.s.DefaultSqlScriptExecutor","thread":"main","message":"DB: extension \"postgis\" already exists, skipping (SQL State: 42710 - Error Code: 0)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:54.607127-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Migrating schema \"public\" to version \"2 - sample distribution centers\"","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:54.6291038-03:00","level":"INFO","logger":"o.f.core.internal.command.DbMigrate","thread":"main","message":"Successfully applied 2 migrations to schema \"public\", now at version v2 (execution time 00:00.042s)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:54.7024113-03:00","level":"INFO","logger":"o.h.jpa.internal.util.LogHelper","thread":"main","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:54.7682638-03:00","level":"INFO","logger":"org.hibernate.Version","thread":"main","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:54.7773479-03:00","level":"INFO","logger":"o.h.s.integration.SpatialService","thread":"main","message":"HHH80000001: hibernate-spatial integration enabled : true","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:54.8063421-03:00","level":"INFO","logger":"o.h.c.i.RegionFactoryInitiator","thread":"main","message":"HHH000026: Second-level cache disabled","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:54.9121495-03:00","level":"WARN","logger":"org.hibernate.orm.deprecation","thread":"main","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:54.9315582-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:55.0994144-03:00","level":"INFO","logger":"o.s.o.j.p.SpringPersistenceUnitInfo","thread":"main","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:55.1172595-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000003: hibernate-spatial adding type contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:55.4136985-03:00","level":"INFO","logger":"org.hibernate.spatial","thread":"main","message":"HHH80000004: hibernate-spatial adding function contributions from : org.hibernate.spatial.dialect.postgis.PostgisDialectContributor","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:55.9247678-03:00","level":"INFO","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator","thread":"main","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:55.9396151-03:00","level":"INFO","logger":"o.hibernate.orm.connections.access","thread":"main","message":"HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@6822d7c9] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:55.9634125-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"main","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:56.4116596-03:00","level":"INFO","logger":"o.s.d.j.r.query.QueryEnhancerFactory","thread":"main","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:57.6105677-03:00","level":"WARN","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration","thread":"main","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:58.4841256-03:00","level":"INFO","logger":"o.s.b.a.e.web.EndpointLinksResolver","thread":"main","message":"Exposing 5 endpoint(s) beneath base path '/actuator'","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:58.5543243-03:00","level":"INFO","logger":"o.a.coyote.http11.Http11NioProtocol","thread":"main","message":"Starting ProtocolHandler [\"http-nio-auto-1\"]","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:58.5666286-03:00","level":"INFO","logger":"o.s.b.w.e.tomcat.TomcatWebServer","thread":"main","message":"Tomcat started on port 54872 (http) with context path '/api'","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:58.6003057-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:54864]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-orders-service-it-consumer-1\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = orders-service-it-consumer\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:58.7326981-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:58.7326981-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:58.7326981-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758662638730","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:58.7357629-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:58.7511821-03:00","level":"INFO","logger":"b.c.m.m.o.i.DistributionCenterCachingIT","thread":"main","message":"Started DistributionCenterCachingIT in 7.721 seconds (process running for 15.371)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:59.113225-03:00","level":"WARN","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error while fetching metadata with correlation id 2 : {orders.events=LEADER_NOT_AVAILABLE}","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:59.1179664-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cluster ID: -QTYgGz5QACKXGX-lNQoBw","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:59.2214347-03:00","level":"WARN","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error while fetching metadata with correlation id 4 : {orders.events=LEADER_NOT_AVAILABLE}","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:59.3423943-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Discovered group coordinator localhost:54864 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:59.3461448-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:59.3635709-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: need to re-join with the given member-id: consumer-orders-service-it-consumer-1-2f0ecd99-042c-4188-90d3-3927280f7948","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:59.3641897-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:59.3641897-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:59.3786509-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully joined group with generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-2f0ecd99-042c-4188-90d3-3927280f7948', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:59.3831476-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Finished assignment for group at generation 1: {consumer-orders-service-it-consumer-1-2f0ecd99-042c-4188-90d3-3927280f7948=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:59.4172893-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Successfully synced group in generation Generation{generationId=1, memberId='consumer-orders-service-it-consumer-1-2f0ecd99-042c-4188-90d3-3927280f7948', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:59.4178054-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:59.4196952-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:59.4297542-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:59.4389769-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:54864 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T18:23:59.4395744-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions assigned: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:00.1001646-03:00","level":"INFO","logger":"o.a.c.c.C.[.[localhost].[/api]","thread":"http-nio-auto-1-exec-1","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:00.1001646-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-1","message":"Initializing Servlet 'dispatcherServlet'","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:00.1011666-03:00","level":"INFO","logger":"o.s.web.servlet.DispatcherServlet","thread":"http-nio-auto-1-exec-1","message":"Completed initialization in 1 ms","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:00.2100515-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"f62c6a6a-55df-46da-80cc-9da42efe1453","message":"Processing new order request - Correlation ID: fc097dd6-482e-4ad6-a254-b0e341cdc813, Customer: customer-cache, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:00.5816202-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"f62c6a6a-55df-46da-80cc-9da42efe1453","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:00.5822059-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"f62c6a6a-55df-46da-80cc-9da42efe1453","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:00.5957294-03:00","level":"INFO","logger":"o.a.k.c.producer.ProducerConfig","thread":"http-nio-auto-1-exec-1","correlationId":"f62c6a6a-55df-46da-80cc-9da42efe1453","message":"ProducerConfig values: \r\n\tacks = -1\r\n\tauto.include.jmx.reporter = true\r\n\tbatch.size = 16384\r\n\tbootstrap.servers = [PLAINTEXT://localhost:54864]\r\n\tbuffer.memory = 33554432\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = orders-service-producer-1\r\n\tcompression.type = snappy\r\n\tconnections.max.idle.ms = 540000\r\n\tdelivery.timeout.ms = 120000\r\n\tenable.idempotence = true\r\n\tinterceptor.classes = []\r\n\tkey.serializer = class org.apache.kafka.common.serialization.StringSerializer\r\n\tlinger.ms = 10\r\n\tmax.block.ms = 60000\r\n\tmax.in.flight.requests.per.connection = 5\r\n\tmax.request.size = 1048576\r\n\tmetadata.max.age.ms = 300000\r\n\tmetadata.max.idle.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartitioner.adaptive.partitioning.enable = true\r\n\tpartitioner.availability.timeout.ms = 0\r\n\tpartitioner.class = null\r\n\tpartitioner.ignore.keys = false\r\n\treceive.buffer.bytes = 32768\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretries = 3\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\ttransaction.timeout.ms = 60000\r\n\ttransactional.id = null\r\n\tvalue.serializer = class org.springframework.kafka.support.serializer.JsonSerializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:00.6068773-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"http-nio-auto-1-exec-1","correlationId":"f62c6a6a-55df-46da-80cc-9da42efe1453","message":"[Producer clientId=orders-service-producer-1] Instantiated an idempotent producer.","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:00.6245738-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"f62c6a6a-55df-46da-80cc-9da42efe1453","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:00.6245738-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"f62c6a6a-55df-46da-80cc-9da42efe1453","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:00.6245738-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"http-nio-auto-1-exec-1","correlationId":"f62c6a6a-55df-46da-80cc-9da42efe1453","message":"Kafka startTimeMs: 1758662640624","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:00.6327714-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cluster ID: -QTYgGz5QACKXGX-lNQoBw","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:00.6469529-03:00","level":"INFO","logger":"o.a.k.c.p.i.TransactionManager","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] ProducerId set to 0 with epoch 0","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:00.8161521-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"f62c6a6a-55df-46da-80cc-9da42efe1453","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W7CGJXMZJZM689DV9G1WK0","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:00.8381444-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"f62c6a6a-55df-46da-80cc-9da42efe1453","message":"Order accepted for async processing - ID: 01K5W7CGJXMZJZM689DV9G1WK0, Current Status: RECEIVED, Correlation ID: fc097dd6-482e-4ad6-a254-b0e341cdc813","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:00.8703038-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W7CGJXMZJZM689DV9G1WK0","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:00.9115552-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"55725ca7-cf67-401e-b0b3-95dd3c978f3c","message":"Fetching order by ID: 01K5W7CGJXMZJZM689DV9G1WK0 - Correlation ID: 9c69d9d7-14e0-44aa-b1e6-fa797ae3c242","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:00.9251373-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"55725ca7-cf67-401e-b0b3-95dd3c978f3c","message":"Order retrieved successfully - ID: 01K5W7CGJXMZJZM689DV9G1WK0, Status: RECEIVED, Correlation ID: 9c69d9d7-14e0-44aa-b1e6-fa797ae3c242","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.1417413-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"fcc6213b-95b8-4e74-acb5-e6955f2eae3e","message":"Fetching order by ID: 01K5W7CGJXMZJZM689DV9G1WK0 - Correlation ID: e93b3014-4bc4-4132-8961-76a1aaa92fef","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.1469681-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-5","correlationId":"fcc6213b-95b8-4e74-acb5-e6955f2eae3e","message":"Order retrieved successfully - ID: 01K5W7CGJXMZJZM689DV9G1WK0, Status: RECEIVED, Correlation ID: e93b3014-4bc4-4132-8961-76a1aaa92fef","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.227348-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.2279143-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item CACHE1 pedido 01K5W7CGJXMZJZM689DV9G1WK0 -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.2303231-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.2309737-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.2309737-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W7CGJXMZJZM689DV9G1WK0","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.3565202-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-4","correlationId":"7bbee4a4-e389-4f5b-8634-4002482a9f23","message":"Fetching order by ID: 01K5W7CGJXMZJZM689DV9G1WK0 - Correlation ID: 62d164c9-1bdf-489b-ab48-26a11cda6389","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.3618066-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-4","correlationId":"7bbee4a4-e389-4f5b-8634-4002482a9f23","message":"Order retrieved successfully - ID: 01K5W7CGJXMZJZM689DV9G1WK0, Status: PROCESSED, Correlation ID: 62d164c9-1bdf-489b-ab48-26a11cda6389","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.3713432-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-3","correlationId":"b7d80050-5321-413d-b61a-761c304c93e8","message":"Processing new order request - Correlation ID: 1ed035e5-e59a-4c3b-94f8-1ac0684a2c79, Customer: customer-cache, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.3764991-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"b7d80050-5321-413d-b61a-761c304c93e8","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.3764991-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"b7d80050-5321-413d-b61a-761c304c93e8","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.3771017-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-3","correlationId":"b7d80050-5321-413d-b61a-761c304c93e8","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W7CHPVHBDYQ1NWSR8J5SNR","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.3794951-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-3","correlationId":"b7d80050-5321-413d-b61a-761c304c93e8","message":"Order accepted for async processing - ID: 01K5W7CHPVHBDYQ1NWSR8J5SNR, Current Status: RECEIVED, Correlation ID: 1ed035e5-e59a-4c3b-94f8-1ac0684a2c79","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.3986312-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT]: OrderEndToEndProcessingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.4001372-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEndToEndProcessingIT","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.405414-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W7CHPVHBDYQ1NWSR8J5SNR","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.4232798-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.4232798-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item CACHE1 pedido 01K5W7CHPVHBDYQ1NWSR8J5SNR -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.4264813-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.4270112-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.4270112-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W7CHPVHBDYQ1NWSR8J5SNR","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.4477311-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"8d52f4bc-2106-4d8d-b364-8d23fde622ce","message":"Processing new order request - Correlation ID: 8d52f4bc-2106-4d8d-b364-8d23fde622ce, Customer: customer-async-proc, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.4545532-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"8d52f4bc-2106-4d8d-b364-8d23fde622ce","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.4545532-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"8d52f4bc-2106-4d8d-b364-8d23fde622ce","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.4551958-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-6","correlationId":"8d52f4bc-2106-4d8d-b364-8d23fde622ce","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W7CHS8DFZ6NVGVCR9T33FV","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.458214-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-6","correlationId":"8d52f4bc-2106-4d8d-b364-8d23fde622ce","message":"Order accepted for async processing - ID: 01K5W7CHS8DFZ6NVGVCR9T33FV, Current Status: RECEIVED, Correlation ID: 8d52f4bc-2106-4d8d-b364-8d23fde622ce","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.4613732-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-7","correlationId":"c7acf37a-4654-4820-aa44-a1d201591de2","message":"Fetching order by ID: 01K5W7CHS8DFZ6NVGVCR9T33FV - Correlation ID: 19be66eb-a656-4670-910a-94cfcfc7a4fb","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.4665981-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-7","correlationId":"c7acf37a-4654-4820-aa44-a1d201591de2","message":"Order retrieved successfully - ID: 01K5W7CHS8DFZ6NVGVCR9T33FV, Status: RECEIVED, Correlation ID: 19be66eb-a656-4670-910a-94cfcfc7a4fb","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.4796586-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W7CHS8DFZ6NVGVCR9T33FV","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.4895061-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.4895061-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item ASYNC-PROC-1 pedido 01K5W7CHS8DFZ6NVGVCR9T33FV -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.4921191-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.4927239-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.4927239-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W7CHS8DFZ6NVGVCR9T33FV","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.971444-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"1fc799c7-43f2-41ba-9450-039d2ecb007c","message":"Fetching order by ID: 01K5W7CHS8DFZ6NVGVCR9T33FV - Correlation ID: dd84be86-295d-4ece-9827-1d70d16fa697","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.9773763-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-8","correlationId":"1fc799c7-43f2-41ba-9450-039d2ecb007c","message":"Order retrieved successfully - ID: 01K5W7CHS8DFZ6NVGVCR9T33FV, Status: PROCESSED, Correlation ID: dd84be86-295d-4ece-9827-1d70d16fa697","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.982989-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT]: OrderEventConsumptionIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:01.9839888-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventConsumptionIT","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0183506-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-9","correlationId":"e4af4ecb-df84-49a6-a377-14826f955703","message":"Processing new order request - Correlation ID: 4a2bf3e5-d204-46ce-bc91-80cd1d3ad620, Customer: customer-event-consumer, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0248496-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-9","correlationId":"e4af4ecb-df84-49a6-a377-14826f955703","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0248496-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-9","correlationId":"e4af4ecb-df84-49a6-a377-14826f955703","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0255161-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-9","correlationId":"e4af4ecb-df84-49a6-a377-14826f955703","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W7CJB27421ZB9R271DVNHG","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0279238-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-9","correlationId":"e4af4ecb-df84-49a6-a377-14826f955703","message":"Order accepted for async processing - ID: 01K5W7CJB27421ZB9R271DVNHG, Current Status: RECEIVED, Correlation ID: 4a2bf3e5-d204-46ce-bc91-80cd1d3ad620","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0297364-03:00","level":"INFO","logger":"o.a.k.c.consumer.ConsumerConfig","thread":"main","message":"ConsumerConfig values: \r\n\tallow.auto.create.topics = true\r\n\tauto.commit.interval.ms = 5000\r\n\tauto.include.jmx.reporter = true\r\n\tauto.offset.reset = earliest\r\n\tbootstrap.servers = [PLAINTEXT://localhost:54864]\r\n\tcheck.crcs = true\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = consumer-order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe-2\r\n\tclient.rack = \r\n\tconnections.max.idle.ms = 540000\r\n\tdefault.api.timeout.ms = 60000\r\n\tenable.auto.commit = true\r\n\texclude.internal.topics = true\r\n\tfetch.max.bytes = 52428800\r\n\tfetch.max.wait.ms = 500\r\n\tfetch.min.bytes = 1\r\n\tgroup.id = order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe\r\n\tgroup.instance.id = null\r\n\theartbeat.interval.ms = 3000\r\n\tinterceptor.classes = []\r\n\tinternal.leave.group.on.close = true\r\n\tinternal.throw.on.fetch.stable.offset.unsupported = false\r\n\tisolation.level = read_uncommitted\r\n\tkey.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n\tmax.partition.fetch.bytes = 1048576\r\n\tmax.poll.interval.ms = 300000\r\n\tmax.poll.records = 500\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsession.timeout.ms = 45000\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\tvalue.deserializer = class org.apache.kafka.common.serialization.StringDeserializer\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0328141-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka version: 3.6.0","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0333755-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka commitId: 60e845626d8a465a","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0333755-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"Kafka startTimeMs: 1758662642032","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0339061-03:00","level":"INFO","logger":"o.a.k.clients.consumer.KafkaConsumer","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe-2, groupId=order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe] Subscribed to topic(s): orders.events","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0393778-03:00","level":"INFO","logger":"org.apache.kafka.clients.Metadata","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe-2, groupId=order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe] Cluster ID: -QTYgGz5QACKXGX-lNQoBw","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0399428-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe-2, groupId=order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe] Discovered group coordinator localhost:54864 (id: 2147483646 rack: null)","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0411626-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe-2, groupId=order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0434627-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe-2, groupId=order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe] Request joining group due to: need to re-join with the given member-id: consumer-order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe-2-6030625a-b2f5-4fc7-a84e-5baa07ca004e","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0441782-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe-2, groupId=order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0441782-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe-2, groupId=order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe] (Re-)joining group","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0479751-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe-2, groupId=order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe] Successfully joined group with generation Generation{generationId=1, memberId='consumer-order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe-2-6030625a-b2f5-4fc7-a84e-5baa07ca004e', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0484878-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe-2, groupId=order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe] Finished assignment for group at generation 1: {consumer-order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe-2-6030625a-b2f5-4fc7-a84e-5baa07ca004e=Assignment(partitions=[orders.events-0])}","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0528779-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe-2, groupId=order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe] Successfully synced group in generation Generation{generationId=1, memberId='consumer-order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe-2-6030625a-b2f5-4fc7-a84e-5baa07ca004e', protocol='range'}","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.053382-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe-2, groupId=order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe] Notifying assignor about the new Assignment(partitions=[orders.events-0])","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.053382-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe-2, groupId=order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe] Adding newly assigned partitions: orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.053382-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W7CJB27421ZB9R271DVNHG","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0545393-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe-2, groupId=order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe] Found no committed offset for partition orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.058316-03:00","level":"INFO","logger":"o.a.k.c.c.i.SubscriptionState","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe-2, groupId=order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe] Resetting offset for partition orders.events-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[localhost:54864 (id: 1 rack: null)], epoch=0}}.","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0616465-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0622545-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item EVT-CONSUME-1 pedido 01K5W7CJB27421ZB9R271DVNHG -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0649354-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0649354-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0654654-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W7CJB27421ZB9R271DVNHG","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0719007-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe-2, groupId=order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0724293-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe-2, groupId=order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe] Member consumer-order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe-2-6030625a-b2f5-4fc7-a84e-5baa07ca004e sending LeaveGroup request to coordinator localhost:54864 (id: 2147483646 rack: null) due to the consumer is being closed","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0729672-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe-2, groupId=order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0729672-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe-2, groupId=order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0808279-03:00","level":"INFO","logger":"o.a.k.clients.FetchSessionHandler","thread":"main","message":"[Consumer clientId=consumer-order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe-2, groupId=order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe] Node 1 sent an invalid full fetch response with extraIds=(ZFHNsZQ4QO2zHMpwAPRRfw), response=()","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0821942-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0821942-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0821942-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"main","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.0841454-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"main","message":"App info kafka.consumer for consumer-order-events-test-group-b12bd2ba-46c0-4bc2-9e1a-59775aff0ffe-2 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.094338-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderEventPublishingIT]: OrderEventPublishingIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.094915-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderEventPublishingIT","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.1245494-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-10","correlationId":"cc3735b3-60ba-40cc-b06a-55c27a93df02","message":"Processing new order request - Correlation ID: cffda5a5-67cb-42ce-afa8-18f208ca5e31, Customer: customer-events, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.1302486-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-10","correlationId":"cc3735b3-60ba-40cc-b06a-55c27a93df02","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.1302486-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-10","correlationId":"cc3735b3-60ba-40cc-b06a-55c27a93df02","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.130803-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-10","correlationId":"cc3735b3-60ba-40cc-b06a-55c27a93df02","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W7CJEC2CMSE0KEX7YX7YG2","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.1329634-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-10","correlationId":"cc3735b3-60ba-40cc-b06a-55c27a93df02","message":"Order accepted for async processing - ID: 01K5W7CJEC2CMSE0KEX7YX7YG2, Current Status: RECEIVED, Correlation ID: cffda5a5-67cb-42ce-afa8-18f208ca5e31","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.1373349-03:00","level":"INFO","logger":"o.s.t.c.s.AnnotationConfigContextLoaderUtils","thread":"main","message":"Could not detect default configuration classes for test class [br.com.ml.mktplace.orders.integration.OrderFlowIT]: OrderFlowIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.1380026-03:00","level":"INFO","logger":"o.s.b.t.c.SpringBootTestContextBootstrapper","thread":"main","message":"Found @SpringBootConfiguration br.com.ml.mktplace.orders.OrdersApplication for test class br.com.ml.mktplace.orders.integration.OrderFlowIT","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.1580921-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W7CJEC2CMSE0KEX7YX7YG2","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.1666-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.1666-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item EVT123 pedido 01K5W7CJEC2CMSE0KEX7YX7YG2 -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.1693822-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.1700354-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.1700354-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W7CJEC2CMSE0KEX7YX7YG2","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.170638-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"2e57ae26-3bb9-4cf8-8723-3ad08089ca3a","message":"Processing new order request - Correlation ID: 2e57ae26-3bb9-4cf8-8723-3ad08089ca3a, Customer: customer-1, Items: 1","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.1762679-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"2e57ae26-3bb9-4cf8-8723-3ad08089ca3a","message":"Publishing event to topic: order.created - Event: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.1762679-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"2e57ae26-3bb9-4cf8-8723-3ad08089ca3a","message":"Event published successfully: ORDER_CREATED","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.1767836-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"http-nio-auto-1-exec-1","correlationId":"2e57ae26-3bb9-4cf8-8723-3ad08089ca3a","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W7CJFTXNTZP435E466SEJ9","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.1789128-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-1","correlationId":"2e57ae26-3bb9-4cf8-8723-3ad08089ca3a","message":"Order accepted for async processing - ID: 01K5W7CJFTXNTZP435E466SEJ9, Current Status: RECEIVED, Correlation ID: 2e57ae26-3bb9-4cf8-8723-3ad08089ca3a","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.182052-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"10d1f7bc-eeaa-42b5-9714-9101325e7de5","message":"Fetching order by ID: 01K5W7CJFTXNTZP435E466SEJ9 - Correlation ID: 593f2d0f-7818-4ed2-b53a-4194a0830256","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.1863509-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.r.c.OrderController","thread":"http-nio-auto-1-exec-2","correlationId":"10d1f7bc-eeaa-42b5-9714-9101325e7de5","message":"Order retrieved successfully - ID: 01K5W7CJFTXNTZP435E466SEJ9, Status: RECEIVED, Correlation ID: 593f2d0f-7818-4ed2-b53a-4194a0830256","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.1880758-03:00","level":"INFO","logger":"b.c.m.m.o.a.i.m.OrderEventsListener","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[OrderEventsListener] Processing ORDER_CREATED event for order 01K5W7CJFTXNTZP435E466SEJ9","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.1984946-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.DistributionCenterSelectionService","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD mais próximo selecionado center=CDY distanceKm=5,652","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.1984946-03:00","level":"INFO","logger":"b.c.m.m.o.d.s.ProcessOrderUseCaseImpl","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"CD selecionado para item ABC123 pedido 01K5W7CJFTXNTZP435E466SEJ9 -> CDY","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.2026913-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Publishing event to topic: order.processed - Event: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.2026913-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event published successfully: ORDER_PROCESSED","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.2033199-03:00","level":"INFO","logger":"b.c.m.m.o.a.o.m.KafkaEventPublisher","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Event dispatched to Kafka default topic 'orders.events' with key 01K5W7CJFTXNTZP435E466SEJ9","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.2759062-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.2759062-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.4286291-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node -1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.4296297-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.4302102-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight FETCH request with correlation id 29 due to node 1 being disconnected (elapsed time since creation: 208ms, elapsed time since send: 208ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.4302102-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Cancelled in-flight METADATA request with correlation id 30 due to node 1 being disconnected (elapsed time since creation: 141ms, elapsed time since send: 141ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.4302102-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Node 2147483646 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.4307197-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.4307197-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cancelled in-flight API_VERSIONS request with correlation id 15 due to node 1 being disconnected (elapsed time since creation: 0ms, elapsed time since send: 0ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.4312533-03:00","level":"INFO","logger":"o.a.k.clients.FetchSessionHandler","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Error sending fetch request (sessionId=429666953, epoch=15) to node 1:","exception":"org.apache.kafka.common.errors.DisconnectException: null\r\n","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.4331555-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"kafka-coordinator-heartbeat-thread | orders-service-it-consumer","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Group coordinator localhost:54864 (id: 2147483646 rack: null) is unavailable or invalid due to cause: coordinator unavailable. isDisconnected: true. Rediscovery will be attempted.","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.4344807-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Revoke previously assigned partitions orders.events-0","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.4344807-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: partitions revoked: [orders.events-0]","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.4344807-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.4344807-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.4351311-03:00","level":"INFO","logger":"o.s.k.c.DefaultKafkaConsumerFactory$ExtendedKafkaConsumer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Unsubscribed all topics or patterns and assigned partitions","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.4351311-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Resetting generation and member id due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.4351311-03:00","level":"INFO","logger":"o.a.k.c.c.i.ConsumerCoordinator","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"[Consumer clientId=consumer-orders-service-it-consumer-1, groupId=orders-service-it-consumer] Request joining group due to: consumer pro-actively leaving the group","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.435708-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.435708-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.435708-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.4363322-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"App info kafka.consumer for consumer-orders-service-it-consumer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.436896-03:00","level":"INFO","logger":"o.s.k.l.KafkaMessageListenerContainer","thread":"org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1","message":"orders-service-it-consumer: Consumer stopped","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.5323989-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Node 1 disconnected.","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.5330183-03:00","level":"INFO","logger":"o.apache.kafka.clients.NetworkClient","thread":"kafka-producer-network-thread | orders-service-producer-1","message":"[Producer clientId=orders-service-producer-1] Cancelled in-flight API_VERSIONS request with correlation id 16 due to node 1 being disconnected (elapsed time since creation: 1ms, elapsed time since send: 1ms, request timeout: 30000ms)","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.5556386-03:00","level":"INFO","logger":"o.a.k.clients.producer.KafkaProducer","thread":"SpringApplicationShutdownHook","message":"[Producer clientId=orders-service-producer-1] Closing the Kafka producer with timeoutMillis = 30000 ms.","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.5576769-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics scheduler closed","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.5576769-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Closing reporter org.apache.kafka.common.metrics.JmxReporter","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.5576769-03:00","level":"INFO","logger":"o.a.kafka.common.metrics.Metrics","thread":"SpringApplicationShutdownHook","message":"Metrics reporters closed","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.5576769-03:00","level":"INFO","logger":"o.a.kafka.common.utils.AppInfoParser","thread":"SpringApplicationShutdownHook","message":"App info kafka.producer for orders-service-producer-1 unregistered","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.5661796-03:00","level":"INFO","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean","thread":"SpringApplicationShutdownHook","message":"Closing JPA EntityManagerFactory for persistence unit 'default'","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.5671877-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown initiated...","service":"orders-service"}
{"timestamp":"2025-09-23T18:24:02.5681842-03:00","level":"INFO","logger":"com.zaxxer.hikari.HikariDataSource","thread":"SpringApplicationShutdownHook","message":"OrdersHikariPool - Shutdown completed.","service":"orders-service"}
