# ADR 012 – Autenticação e Autorização das APIs

Data: 21/09/2025  
Autor: Ciro Rezende <cirorezende@gmail.com>

**Item:** Mecanismo de segurança para controle de acesso às APIs de processamento e consulta de pedidos.

**Decisão a ser tomada:** Definir como será implementada a autenticação e autorização para proteger as APIs do sistema contra acesso não autorizado.

**Possibilidades levantadas:**  

- **API Key simples:** Chave estática compartilhada, fácil implementação, baixa segurança.
- **JWT (JSON Web Token):** Tokens com expiração, stateless, boa segurança.
- **OAuth 2.0:** Padrão robusto, complexidade adicional para implementação.
- **AWS API Gateway + IAM:** Integração nativa com AWS, controle granular de permissões.
- **mTLS (Mutual TLS):** Autenticação baseada em certificados, alta segurança.

**Escolha:** AWS API Gateway com autenticação JWT + IAM roles.

**Justificativa:**  
Esta combinação oferece segurança robusta com simplicidade operacional, além de permitir que os serviços internos não necessitem de validações de segurança, visto que toda validação está ocorrendo no Gateway.

**AWS API Gateway:**
- Rate limiting nativo (1000 req/min por cliente)
- Throttling automático em caso de sobrecarga
- Logs detalhados de acesso
- Integração nativa com AWS WAF e AWS Shield

**Autenticação JWT:**
- Tokens com expiração de 30 minutos
- Refresh tokens com expiração de 40 minutos
- Claims customizados para identificação do cliente
- Algoritmo de assinatura: RS256

**Benefícios:**
- Controle granular de acesso por operação
- Auditoria completa de acessos via CloudTrail
- Escalabilidade automática do gateway
- Proteção contra ataques comuns (DDoS, injection)
- Integração simplificada com outros serviços AWS