# ADR 009 – Algoritmo de Seleção de Centro de Distribuição

Data: 21/09/2025  
Autor: Ciro Rezende <cirorezende@gmail.com>

**Item:** Lógica de inteligência para determinar o melhor centro de distribuição para cada item do pedido.

**Decisão a ser tomada:** Definir o algoritmo que será usado para selecionar o CD mais adequado quando múltiplos CDs podem atender um item, considerando os objetivos de redução de custos logísticos e prazos de entrega.

**Possibilidades levantadas:**  

- **Proximidade geográfica simples:** Selecionar sempre o CD mais próximo do endereço de entrega usando distância euclidiana.
- **Algoritmo baseado em múltiplos fatores:** Considerar proximidade, capacidade do CD, custos de envio, tempo de processamento e regras de negócio.
- **Machine Learning:** Usar modelos preditivos para otimização dinâmica baseada em histórico.
- **Algoritmo de otimização por pedido completo:** Minimizar o número total de CDs por pedido para reduzir custos de envio.

**Escolha:** Proximidade geográfica simples.

**Justificativa:**  
Para a primeira versão do sistema, a abordagem mais simples e eficaz é selecionar sempre o centro de distribuição mais próximo geograficamente do endereço de entrega. Esta decisão se baseia nos seguintes fatores:

1. **Simplicidade de implementação:** Reduz a complexidade inicial do sistema, permitindo entrega mais rápida da funcionalidade core
2. **Transparência:** Decisões facilmente auditáveis e compreensíveis pelos operadores logísticos
3. **Performance:** Cálculo direto de distância via PostGIS sem necessidade de algoritmos complexos
4. **Eficácia comprovada:** Proximidade geográfica é o fator mais impactante na redução de custos logísticos e prazos de entrega
5. **Evolução incremental:** Base sólida para futuras melhorias como consolidação de envios, balanceamento de carga entre CDs, e otimização por múltiplos fatores

O algoritmo utilizará a função de distância do PostGIS para calcular a distância real entre as coordenadas do endereço de entrega e cada CD disponível para o item, selecionando sempre o mais próximo. Esta abordagem atende diretamente ao objetivo principal de reduzir prazos e custos logísticos com máxima simplicidade.